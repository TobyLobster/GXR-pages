<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Chapter 12: VDU commands</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Carousel.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/ACME-Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<p>BBC Computer 32K</p>
<h1>*GXR</h1>
<ul><li><a href="../index.html">&#x21A9; home</a></li><li><a href="index.html"><span class="selectedlink">contents</span></a></li>
<li><a href="S-s1.html">introduction</a></li>
<li><a href="S-s2.html">constants</a></li>
<li><a href="S-s3.html">memory addresses</a></li>
<li><a href="S-s4.html"><b>$8000</b>: chapter 4</a></li>
<li><a href="S-s5.html"><b>$8167</b>: chapter 5</a></li>
<li><a href="S-s6.html"><b>$82a9</b>: chapter 6</a></li>
<li><a href="S-s7.html"><b>$8349</b>: chapter 7</a></li>
<li><a href="S-s8.html"><b>$88f9</b>: chapter 8</a></li>
<li><a href="S-s9.html"><b>$8955</b>: chapter 9</a></li>
<li><a href="S-s10.html"><b>$899d</b>: chapter 10</a></li>
<li><a href="S-s11.html"><b>$8a8a</b>: chapter 11</a></li>
<li><span class="unlink"><b>$8bb4</b>: chapter 12</span></li>
<li><a href="S-s13.html"><b>$8d83</b>: chapter 13</a></li>
<li><a href="S-s14.html"><b>$8dd2</b>: chapter 14</a></li>
<li><a href="S-s15.html"><b>$8e5b</b>: chapter 15</a></li>
<li><a href="S-s16.html"><b>$9044</b>: chapter 16</a></li>
<li><a href="S-s17.html"><b>$9872</b>: chapter 17</a></li>
<li><a href="S-s18.html"><b>$9ced</b>: chapter 18</a></li>
<li><a href="S-s19.html"><b>$9f7c</b>: chapter 19</a></li>
<li><a href="S-s20.html"><b>$a258</b>: chapter 20</a></li>
<li><a href="S-s21.html"><b>$a40e</b>: chapter 21</a></li>
<li><a href="S-s22.html"><b>$a808</b>: chapter 22</a></li>
<li><a href="S-s23.html"><b>$b9ea</b>: chapter 23</a></li>
<li><a href="S-s24.html"><b>$bdd0</b>: chapter 24</a></li>
<li><a href="S-s25.html"><b>$bfdb</b>: chapter 25</a></li>

</ul>
		</nav>
		<main role="main">
		<!--Weave of 'Chapter 12: VDU commands' generated by Inweb-->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">GXR</a></li><li><b>Chapter 12: VDU commands</b></li></ul></div>
<p class="purpose">Implementation of the new VDU commands - 463 bytes (2.8%)</p>

<ul class="toc"><li><a href="S-s12.html#SP1">&#167;1. Unknown PLOT</a></li><li><a href="S-s12.html#SP2">&#167;2. Reset fill patterns and dot-dash line pattern</a></li><li><a href="S-s12.html#SP3">&#167;3. Intercepting VDU 22 (MODE change) and VDU 25 (PLOT command)</a></li><li><a href="S-s12.html#SP4">&#167;4. Move graphics cursor and finish PLOT command</a></li><li><a href="S-s12.html#SP5">&#167;5. vdu23SChooseOrSGet</a></li><li><a href="S-s12.html#SP6">&#167;6. Extended Vector VDU Routine</a></li><li><a href="S-s12.html#SP7">&#167;7. Define a dot-dash line pattern</a></li><li><a href="S-s12.html#SP8">&#167;8. Reset all fill patterns</a></li><li><a href="S-s12.html#SP9">&#167;9. Define simple fill pattern</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1. Unknown PLOT. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> For PLOT commands we don't know about, we finish up by restoring the soft character</span>
<span class="ACME-plain-syntax"> definitions, then send it along for other ROMs to check.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">unknownPlot</span><button class="popup" onclick="togglePopup('usagePopup1')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup1">Usage of <span class="code-font"><span class="ACME-function-syntax">unknownPlot</span></span>:<br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8bb1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">copyWorkspaceCacheBackIntoCharacterDefinitons</span></a><span class="ACME-plain-syntax">  </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">passOnPLOT</span><button class="popup" onclick="togglePopup('usagePopup2')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup2">Usage of <span class="code-font"><span class="ACME-function-syntax">passOnPLOT</span></span>:<br/><a href="S-s12.html#SP3">&#167;3</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8bb4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterPlotType</span></a><span class="ACME-plain-syntax">                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vectorVDUVLow</span></a><span class="ACME-plain-syntax">)                                </span>
</pre>
<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2. Reset fill patterns and dot-dash line pattern. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Preserves A, X, Y</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">resetFillPatternsAndDotDashPattern</span><button class="popup" onclick="togglePopup('usagePopup3')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup3">Usage of <span class="code-font"><span class="ACME-function-syntax">resetFillPatternsAndDotDashPattern</span></span>:<br/><a href="S-s12.html#SP3">&#167;3</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8bbb</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember A,X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP8" class="function-link"><span class="ACME-function-syntax">resetPatternFillsToDefaults</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s6.html#SP6" class="function-link"><span class="ACME-function-syntax">setDotPatternAndRepeat</span></a><span class="ACME-plain-syntax">                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall A,X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP3" class="paragraph-anchor"></a><b>&#167;3. Intercepting VDU 22 (MODE change) and VDU 25 (PLOT command). </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> The trampoline code (see </span><a href="S-s9.html" class="internal">Chapter 9: Trampoline code for OSWRCH</a><span class="ACME-plain-syntax">) that intercepts OSWRCH sends VDU 22 (MODE) and VDU 25 (PLOT)</span>
<span class="ACME-plain-syntax"> here.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   Carry  set  for VDU 22 (MODE change)</span>
<span class="ACME-plain-syntax">   Carry clear for VDU 25 (PLOT command)</span>

<span class="ACME-plain-syntax">  PLOT Codes              |  Effect</span>
<span class="ACME-plain-syntax"> -------------------------+-------------------------------------------------------------</span>
<span class="ACME-plain-syntax">  $00 - $07   ( 0 -   7)  |  Line: Both ends, no pattern</span>
<span class="ACME-plain-syntax">  $08 - $0F   ( 8 -  15)  |  Line: End omitted, no pattern</span>
<span class="ACME-plain-syntax">  $10 - $17   (16 -  23)  |  Line: Both ends, pattern restarts</span>
<span class="ACME-plain-syntax">  $18 - $1F   (24 -  31)  |  Line: End omitted, pattern restarts</span>
<span class="ACME-plain-syntax">  $20 - $27   (32 -  39)  |  Line: Start omitted, no pattern</span>
<span class="ACME-plain-syntax">  $28 - $2F   (40 -  47)  |  Line: Neither end, no pattern</span>
<span class="ACME-plain-syntax">  $30 - $37   (48 -  55)  |  Line: Start omitted, pattern continues</span>
<span class="ACME-plain-syntax">  $38 - $3F   (56 -  63)  |  Line: Neither end, pattern continues</span>
<span class="ACME-plain-syntax">  $40 - $47   (64 -  71)  |  Plot single point</span>
<span class="ACME-plain-syntax">  $48 - $4F   (72 -  79)  |  Horizontal line fill left and right to non-background</span>
<span class="ACME-plain-syntax">  $50 - $57   (80 -  87)  |  Fill a triangle</span>
<span class="ACME-plain-syntax">  $58 - $5F   (88 -  95)  |  Horizontal line fill right to background</span>
<span class="ACME-plain-syntax">  $60 - $67   (96 - 103)  |  Rectangle fill</span>
<span class="ACME-plain-syntax">  $68 - $6F  (104 - 111)  |  Horizontal line fill left and right to foreground</span>
<span class="ACME-plain-syntax">  $70 - $77  (112 - 119)  |  Parallelogram fill</span>
<span class="ACME-plain-syntax">  $78 - $7F  (120 - 127)  |  Horizontal line fill right to non-foreground</span>
<span class="ACME-plain-syntax">  $80 - $87  (128 - 135)  |  Flood fill to non-background</span>
<span class="ACME-plain-syntax">  $88 - $8F  (136 - 143)  |  Flood fill to foreground</span>
<span class="ACME-plain-syntax">  $90 - $97  (144 - 151)  |  Circle outline</span>
<span class="ACME-plain-syntax">  $98 - $9F  (152 - 159)  |  Circle fill</span>
<span class="ACME-plain-syntax">  $A0 - $A7  (160 - 167)  |  Circular arc</span>
<span class="ACME-plain-syntax">  $A8 - $AF  (168 - 175)  |  Circular segment</span>
<span class="ACME-plain-syntax">  $B0 - $B7  (176 - 183)  |  Circular sector</span>
<span class="ACME-plain-syntax">  $B8 - $BF  (184 - 191)  |  On screen rectangle copy or move</span>
<span class="ACME-plain-syntax">  $C0 - $C7  (192 - 199)  |  Ellipse outline</span>
<span class="ACME-plain-syntax">  $C8 - $CF  (200 - 207)  |  Ellipse fill</span>
<span class="ACME-plain-syntax">  $D0 - $D7  (208 - 215)  |  [unused]</span>
<span class="ACME-plain-syntax">  $D8 - $DF  (216 - 223)  |  [unused]</span>
<span class="ACME-plain-syntax">  $E0 - $E7  (224 - 231)  |  [unused]</span>
<span class="ACME-plain-syntax">  $E8 - $EF  (232 - 239)  |  Sprite plot</span>
<span class="ACME-plain-syntax">  $F0 - $F7  (240 - 247)  |  [unused]</span>
<span class="ACME-plain-syntax">  $F8 - $FF  (248 - 255)  |  [unused]</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">vdu22Or25EntryPoint</span><button class="popup" onclick="togglePopup('usagePopup4')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup4">Usage of <span class="code-font"><span class="ACME-function-syntax">vdu22Or25EntryPoint</span></span>:<br/><a href="S-s12.html#SP4">&#167;4</a><br/>Chapter 9: Trampoline code for OSWRCH - <a href="S-s9.html#SP2">&#167;2</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8bce</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">get workspace address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP2" class="function-link"><span class="ACME-function-syntax">resetFillPatternsAndDotDashPattern</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">if (MODE change) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(to reset patterns and line style)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">PLOT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP1" class="function-link"><span class="ACME-function-syntax">passOnPLOT</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">if (not a graphics MODE) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">For the duration of the PLOT command, we cache the soft font definitions from</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">$0C00 - $0C66 into private workspace memory to give us memory at $C00 (a fixed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">memory location). This helps with access speed and size, and uses fewer registers</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">than having to use indirect addressing to access our private workspace.</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy $0C00 - $0C66 into workspace[$99-$FF]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetSoftFontCache</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$66</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">softCharacterDefinitions</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">reset workspace low to zero</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetHasCachedSoftCharacterDefinitions</span></a><span class="ACME-plain-syntax"> </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">mark as cached</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">       </span><span class="ACME-comment-syntax">X is offset to X Coordinate (low)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">plotConvertExternalRelativeCoordinatesToPixels</span></a><span class="ACME-plain-syntax"> </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">Y=5 (invalid GCOL mode)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterPlotType</span></a><span class="ACME-plain-syntax">                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$C3</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">check for one of (0,4,8,12,16,20,24,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">28,32,36,40,44,48,52,56,60)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">if (line move relative or absolute)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">check for one of (64,68,72,76,80,84,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">88,92,96,100,104,108,112,116,120,124,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">128,132,136,140,144,148,152,156,160,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">164,168,172,176,180,184,188,192,196,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">200,204,208,212,216,220,224,228,232,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">236,240,244,248,252)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP3" class="function-link"><span class="ACME-function-syntax">skipStandardColourModes</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (move relative or absolute for a</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">non-line) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=4 (inverse colour GCOL mode)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP3" class="function-link"><span class="ACME-function-syntax">skipStandardColourModes</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (logical inverse colour) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">draw using foreground colour (X=0)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">or background colour (X=1)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGCOLMode</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">Y=foreground or background GCOL mode</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(0=Normal, 1=OR, 2=AND, 3=EOR,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">4=Invert)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} X = foreground or background</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} graphics colour</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipStandardColourModes</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8c0d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = GCOL mode (0=Normal, 1=OR,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">2=AND, 3=EOR, 4=Invert)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Set up mask variables for the GCOL Mode</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$0F</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">make sure it is in range (0-15)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = GCOL mode</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">gcolPlotOptionsTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">gcolModeMask0</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">gcolPlotOptionsTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">gcolModeMask1</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">gcolPlotOptionsTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">gcolModeMask2</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">gcolPlotOptionsTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">gcolModeMask3</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = GCOL mode top nybble</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$F0</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">get top nybble</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">divide by two (we get multiples of 8)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP3" class="function-link"><span class="ACME-function-syntax">copyPattern</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (we want to use a pattern) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">solid colour fill</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">2</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">3</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">} store solid graphics colour in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} fillPattern</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">5</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">6</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP3" class="function-link"><span class="ACME-function-syntax">doneCopyingPattern</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">ALWAYS branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">copyPattern</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8c46</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #7                                              </span><span class="ACME-comment-syntax">loop counter.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = 8,16,24,32 i.e. Y = (pattern 1</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to 4) * 8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = 7,15,23,31 i.e. Y = (pattern 1</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to 4) * 8 - 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetCurrentPatterns</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">copy from workspace[$6C+Y]</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">pattern 1 = workspace[$6C to $73]</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">pattern 2 = workspace[$74 to $7B]</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">pattern 3 = workspace[$7C to $83]</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">pattern 4 = workspace[$84 to $8C]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">fillPattern</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">copy to $0C00+X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">loop 8 times</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">doneCopyingPattern</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8c57</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterPlotType</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">get plot type</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$F8</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">mask out the bottom three bits</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} divide by four to get the offset</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} within the table of PLOT routines</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = offset into array</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP8" class="function-link"><span class="ACME-function-syntax">plotTypeRoutineTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} get address of routine from table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP8" class="function-link"><span class="ACME-function-syntax">plotTypeRoutineTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">)                               </span><span class="ACME-comment-syntax">call routine</span>
</pre>
<p class="commentary firstcommentary"><a id="SP4" class="paragraph-anchor"></a><b>&#167;4. Move graphics cursor and finish PLOT command. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Moves the graphics cursor by a relative amount or to an absolute position.</span>
<span class="ACME-plain-syntax"> Also restores the soft font definitions, since this is called at the end of each PLOT</span>
<span class="ACME-plain-syntax"> command.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span><button class="popup" onclick="togglePopup('usagePopup5')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup5">Usage of <span class="code-font"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></span>:<br/><a href="S-s12.html#SP3">&#167;3</a><br/>Chapter 14: Point and Rectangle - <a href="S-s14.html#SP1">&#167;1</a>, <a href="S-s14.html#SP2">&#167;2</a><br/>Chapter 15: Parallelogram and Triangle - <a href="S-s15.html#SP2">&#167;2</a>, <a href="S-s15.html#SP3">&#167;3</a><br/>Chapter 16: Circle - <a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a><br/>Chapter 17: Lines - <a href="S-s17.html#SP11">&#167;11</a><br/>Chapter 18: Flood fill and horizontal fill - <a href="S-s18.html#SP3">&#167;3</a><br/>Chapter 19: Rectangle copy and move - <a href="S-s19.html#SP4">&#167;4</a><br/>Chapter 20: Sprite plotting - <a href="S-s20.html#SP1">&#167;1</a><br/>Chapter 23: Ellipse - <a href="S-s23.html#SP3">&#167;3</a>, <a href="S-s23.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8c6f</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Update graphics cursors:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  vduOldGraphicsCursor = vduGraphicsCursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  vduGraphicsCursor    = vdu25Parameter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">get current graphics cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">store in old graphics cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">get new parameter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">store in current graphics cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (still bytes to copy) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(loop back)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy the soft character definitions previously stored in the private workspace using</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">code at .vdu22Or25EntryPoint back into the original memory at $0C00.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Preserves X</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">copyWorkspaceCacheBackIntoCharacterDefinitons</span><button class="popup" onclick="togglePopup('usagePopup6')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup6">Usage of <span class="code-font"><span class="ACME-function-syntax">copyWorkspaceCacheBackIntoCharacterDefinitons</span></span>:<br/><a href="S-s12.html#SP1">&#167;1</a><br/>Chapter 4: ROM header and service entry routines - <a href="S-s4.html#SP4">&#167;4</a><br/>Chapter 18: Flood fill and horizontal fill - <a href="S-s18.html#SP15">&#167;15</a>, <a href="S-s18.html#SP18">&#167;18</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8c80</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy memory from [workspace + $99,workspace + $FF] to [$0C00, $0C66]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetSoftFontCache</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">start address (low)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$66</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">softCharacterDefinitions</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">workspaceLow = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetHasCachedSoftCharacterDefinitions</span></a><span class="ACME-plain-syntax"> </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">mark as not cached</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP5" class="paragraph-anchor"></a><b>&#167;5. vdu23SChooseOrSGet. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">vdu23SChooseOrSGet</span><button class="popup" onclick="togglePopup('usagePopup7')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup7">Usage of <span class="code-font"><span class="ACME-function-syntax">vdu23SChooseOrSGet</span></span>:<br/><a href="S-s12.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8c9a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP5" class="function-link"><span class="ACME-function-syntax">vdu23SGet</span></a><span class="ACME-plain-syntax">                                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Handle 'SChoose'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23SChooseOrSGetSpriteNumberParameter</span></a><span class="ACME-plain-syntax">        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s21.html#SP14" class="function-link"><span class="ACME-function-syntax">sChooseA</span></a><span class="ACME-plain-syntax">                                       </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">vdu23SGet</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8ca5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check for 'SGet'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP5" class="function-link"><span class="ACME-function-syntax">vdu23Unknown</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Handle 'SGet'</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23SChooseOrSGetSpriteNumberParameter</span></a><span class="ACME-plain-syntax">        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s21.html#SP4" class="function-link"><span class="ACME-function-syntax">sgetInternal</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">vdu23Unknown</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8caf</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #27                                             </span><span class="ACME-comment-syntax">VDU 27 = do nothing</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP6" class="function-link"><span class="ACME-function-syntax">passThroughWithCarrySet</span></a><span class="ACME-plain-syntax">                        </span>
</pre>
<p class="commentary firstcommentary"><a id="SP6" class="paragraph-anchor"></a><b>&#167;6. Extended Vector VDU Routine. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> When a VDU sequence that is unknown to the OS is used, this routine executes allowing</span>
<span class="ACME-plain-syntax"> our code to process new VDU functionality.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">extendedVectorVDURoutine</span><button class="popup" onclick="togglePopup('usagePopup8')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup8">Usage of <span class="code-font"><span class="ACME-function-syntax">extendedVectorVDURoutine</span></span>:<br/>Chapter 4: ROM header and service entry routines - <a href="S-s4.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8cb4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP6" class="function-link"><span class="ACME-function-syntax">passThrough</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (already handled) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP6" class="function-link"><span class="ACME-function-syntax">passThroughWithCarrySet</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (non-graphics mode) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #6                                              </span><span class="ACME-comment-syntax">check for VDU 23,6 = dot-dash line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">defineDotDashLine</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (dot-dash line) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP7" class="function-link"><span class="ACME-function-syntax">defineFullPattern</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (full pattern) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #11                                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP6" class="function-link"><span class="ACME-function-syntax">passThroughWithCarrySet</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (A &lt; 11) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP8" class="function-link"><span class="ACME-function-syntax">resetPatternFillsToDefaults</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">if (VDU 23,11) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #16                                             </span><span class="ACME-comment-syntax">check for VDU 23,{12 to 15}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP9" class="function-link"><span class="ACME-function-syntax">defineSimplePattern</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">if (simple pattern) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #27                                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP5" class="function-link"><span class="ACME-function-syntax">vdu23SChooseOrSGet</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (VDU 23,27) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">passThroughWithCarrySet</span><button class="popup" onclick="togglePopup('usagePopup9')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup9">Usage of <span class="code-font"><span class="ACME-function-syntax">passThroughWithCarrySet</span></span>:<br/><a href="S-s12.html#SP5">&#167;5</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8cd2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry set means 'not yet handled'</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">passThrough</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8cd3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP1" class="function-link"><span class="ACME-function-syntax">swapWorkspaceWithVDUVectors</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">swap out our VDUV</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLP</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP6" class="function-link"><span class="ACME-function-syntax">jumpToVDURoutine</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">execute original VDU routine</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP1" class="function-link"><span class="ACME-function-syntax">swapWorkspaceWithVDUVectors</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">swap back in our VDUV</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">jumpToVDURoutine</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8ce3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vectorVDUVLow</span></a><span class="ACME-plain-syntax">)                                </span>
</pre>
<p class="commentary firstcommentary"><a id="SP7" class="paragraph-anchor"></a><b>&#167;7. Define a dot-dash line pattern. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> The line pattern is an array of (up to) 64 on / off bits (8 bytes)</span>
</pre>
<p class="center-p"><img src="dot2.png" alt="dot2.png"></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">

<span class="ACME-plain-syntax">  10 REM dotted border</span>
<span class="ACME-plain-syntax">  20 MODE 1:VDU23,6,&amp;54,&amp;48,&amp;3F,&amp;A9,&amp;26,&amp;BB,&amp;C3,&amp;9D</span>
<span class="ACME-plain-syntax">  30 *FX163,242,64</span>
<span class="ACME-plain-syntax">  40 T%=&amp;35:SX%=16:SY%=16</span>
<span class="ACME-plain-syntax">  50 FOR N%=0 TO 2</span>
<span class="ACME-plain-syntax">  60   MOVE 100+N%*SX%,100+N%*SY%</span>
<span class="ACME-plain-syntax">  70   PLOT T%,1180-N%*SX%,100+N%*SY%</span>
<span class="ACME-plain-syntax">  80   PLOT T%,1180-N%*SX%,924-N%*SY%</span>
<span class="ACME-plain-syntax">  90   PLOT T%,100+N%*SX%,924-N%*SY%</span>
<span class="ACME-plain-syntax"> 100   PLOT T%,100+N%*SX%,100+N%*SY%</span>
<span class="ACME-plain-syntax"> 110 NEXT</span>
<span class="ACME-plain-syntax"> 120 VDU 23,1,0;0;0;0;:A$=GET$:VDU 23,1,1;0;0;0;</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">defineDotDashLine</span><button class="popup" onclick="togglePopup('usagePopup10')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup10">Usage of <span class="code-font"><span class="ACME-function-syntax">defineDotDashLine</span></span>:<br/><a href="S-s12.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8ce6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetDotDashRepeatLength</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">workspace[dot-dash bits remaining] =</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">dot-dash line pattern bits remaining</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">workspace[dot-dash bit] = $80</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">i.e. one bit set for reading next</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">bit from pattern</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">workspace[pattern byte] = current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">within dot-dash line pattern</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">defineFullPattern</span><button class="popup" onclick="togglePopup('usagePopup11')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup11">Usage of <span class="code-font"><span class="ACME-function-syntax">defineFullPattern</span></span>:<br/><a href="S-s12.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8cf8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = 2,3,4,5,6 (2-5 = full pattern, 6</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">= dot-dash line pattern)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetCurrentPatterns</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = ((A-1)*8) +</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.workspaceOffsetCurrentPatterns - 1</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">Y = $73,$7B,$83,$8B,$93</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">[NOTE: Could do this to save three bytes:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">ASL</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">ASL</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">ASL</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">CLC</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">ADC #.workspaceOffsetCurrentPatterns - 9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">TAY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #7                                              </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} copy vdu parameters into the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} workspace pattern</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP8" class="paragraph-anchor"></a><b>&#167;8. Reset all fill patterns. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">resetPatternFillsToDefaults</span><button class="popup" onclick="togglePopup('usagePopup12')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup12">Usage of <span class="code-font"><span class="ACME-function-syntax">resetPatternFillsToDefaults</span></span>:<br/><a href="S-s12.html#SP2">&#167;2</a>, <a href="S-s12.html#SP6">&#167;6</a><br/>Chapter 4: ROM header and service entry routines - <a href="S-s4.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8d0e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not MODE 0) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">A = $FF [NOTE: could just LDA #255</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to save a byte]</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">(MODE 0,1,2,3,4,5,6,7) AND 3 =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(3,1,2,X,0,1,X,X)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">(A AND 3) + 1 = (4,2,3,X,1,2,X,X)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">((A AND 3) + 1) * 32, i.e.</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">MODE    0,   1,   2, 3,   4,   5, 6,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">7</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">   A  $80, $40, $60, -, $20, $40, -,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X is the offset to the default</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">patterns for the current MODE</span>

<span class="ACME-comment-syntax">[NOTE: alternatively this is seven bytes shorter:</span>

<span class="ACME-comment-syntax">.offsetToDefaultTable</span>
<span class="ACME-comment-syntax">   !byte $80, $40, $60, $00, $20, $40</span>

<span class="ACME-comment-syntax">.resetPatternFillsToDefaults</span>
<span class="ACME-comment-syntax">   LDY .vduCurrentScreenMODE</span>
<span class="ACME-comment-syntax">   LDX .offsetToDefaultTable,Y</span>
<span class="ACME-comment-syntax">   ...</span>
<span class="ACME-comment-syntax">]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy the default patterns into the right place in the private workspace</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #32                                             </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetCurrentPatterns</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">            </span><span class="ACME-comment-syntax">offset in workspace to store current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">patterns (minus 1)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">.privateWorkspaceLow =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.workspaceOffsetCurrentPatterns - 1</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP2" class="function-link"><span class="ACME-function-syntax">defaultPatterns</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">read default patterns from table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">store 32 bytes of default patterns</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">in workspace at offset $6B-$8A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP9" class="paragraph-anchor"></a><b>&#167;9. Define simple fill pattern. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   A: pattern number 12-15</span>
<span class="ACME-plain-syntax">   carry clear</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">defineSimplePattern</span><button class="popup" onclick="togglePopup('usagePopup13')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup13">Usage of <span class="code-font"><span class="ACME-function-syntax">defineSimplePattern</span></span>:<br/><a href="S-s12.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $8d31</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #11                                             </span><span class="ACME-comment-syntax">A = 0-3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">A = 3,11,19,27</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(offset to store within workspace</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">patterns)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">[NOTE: Could be ASL:ASL:ASL:SBC #32</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to save 2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop to get and mask colour information for current mode</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #7                                              </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduNumberOfLogicalColoursMinusOne</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">DA = parameter[X] AND numColours-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduNumberOfLogicalColoursMinusOne</span></a><span class="ACME-plain-syntax">              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #7                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} DA += number of colours - 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">twoColourMODEParameterTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">              </span><span class="ACME-comment-syntax">look up colour data in table</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">parameter[X] = colour data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if(not done yet) then branch (loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">back)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Single or double pixels</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%01010101</span><span class="ACME-plain-syntax">                                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%00110011</span><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">MODE 0 uses double pixels</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store mask</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = 3,11,19,27</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetCurrentPatterns</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">A = offset to store pattern within</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">workspace</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = A = offset to store pattern</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">within workspace</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop to set simple pattern</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #7                                              </span><span class="ACME-comment-syntax">loop counter, decrements twice</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(7,5,3,1)</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">pixel value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">EOR previous pixel value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">AND mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu23NParameter</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">EOR previous pixel value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">} workspace[Y] = A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} workspace[Y+4] = A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Y--</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not done yet) then branch (loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">back)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="S-s11.html">&#10094;</a></li><li class="progresssection"><a href="S-s1.html">1</a></li><li class="progresssection"><a href="S-s2.html">2</a></li><li class="progresssection"><a href="S-s3.html">3</a></li><li class="progresssection"><a href="S-s4.html">4</a></li><li class="progresssection"><a href="S-s5.html">5</a></li><li class="progresssection"><a href="S-s6.html">6</a></li><li class="progresssection"><a href="S-s7.html">7</a></li><li class="progresssection"><a href="S-s8.html">8</a></li><li class="progresssection"><a href="S-s9.html">9</a></li><li class="progresssection"><a href="S-s10.html">10</a></li><li class="progresssection"><a href="S-s11.html">11</a></li><li class="progresscurrent">12</li><li class="progresssection"><a href="S-s13.html">13</a></li><li class="progresssection"><a href="S-s14.html">14</a></li><li class="progresssection"><a href="S-s15.html">15</a></li><li class="progresssection"><a href="S-s16.html">16</a></li><li class="progresssection"><a href="S-s17.html">17</a></li><li class="progresssection"><a href="S-s18.html">18</a></li><li class="progresssection"><a href="S-s19.html">19</a></li><li class="progresssection"><a href="S-s20.html">20</a></li><li class="progresssection"><a href="S-s21.html">21</a></li><li class="progresssection"><a href="S-s22.html">22</a></li><li class="progresssection"><a href="S-s23.html">23</a></li><li class="progresssection"><a href="S-s24.html">24</a></li><li class="progresssection"><a href="S-s25.html">25</a></li><li class="progressnext"><a href="S-s13.html">&#10095;</a></li></ul></div>
</nav><!--End of weave-->

		</main>
	</body>
</html>

