<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Chapter 16: Circle</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Carousel.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/ACME-Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<p>BBC Computer 32K</p>
<h1>*GXR</h1>
<ul><li><a href="../index.html">&#x21A9; home</a></li><li><a href="index.html"><span class="selectedlink">contents</span></a></li>
<li><a href="S-s1.html">introduction</a></li>
<li><a href="S-s2.html">constants</a></li>
<li><a href="S-s3.html">memory addresses</a></li>
<li><a href="S-s4.html"><b>$8000</b>: chapter 4</a></li>
<li><a href="S-s5.html"><b>$8167</b>: chapter 5</a></li>
<li><a href="S-s6.html"><b>$82a9</b>: chapter 6</a></li>
<li><a href="S-s7.html"><b>$8349</b>: chapter 7</a></li>
<li><a href="S-s8.html"><b>$88f9</b>: chapter 8</a></li>
<li><a href="S-s9.html"><b>$8955</b>: chapter 9</a></li>
<li><a href="S-s10.html"><b>$899d</b>: chapter 10</a></li>
<li><a href="S-s11.html"><b>$8a8a</b>: chapter 11</a></li>
<li><a href="S-s12.html"><b>$8bb4</b>: chapter 12</a></li>
<li><a href="S-s13.html"><b>$8d83</b>: chapter 13</a></li>
<li><a href="S-s14.html"><b>$8dd2</b>: chapter 14</a></li>
<li><a href="S-s15.html"><b>$8e5b</b>: chapter 15</a></li>
<li><span class="unlink"><b>$9044</b>: chapter 16</span></li>
<li><a href="S-s17.html"><b>$9872</b>: chapter 17</a></li>
<li><a href="S-s18.html"><b>$9ced</b>: chapter 18</a></li>
<li><a href="S-s19.html"><b>$9f7c</b>: chapter 19</a></li>
<li><a href="S-s20.html"><b>$a258</b>: chapter 20</a></li>
<li><a href="S-s21.html"><b>$a40e</b>: chapter 21</a></li>
<li><a href="S-s22.html"><b>$a808</b>: chapter 22</a></li>
<li><a href="S-s23.html"><b>$b9ea</b>: chapter 23</a></li>
<li><a href="S-s24.html"><b>$bdd0</b>: chapter 24</a></li>
<li><a href="S-s25.html"><b>$bfdb</b>: chapter 25</a></li>

</ul>
		</nav>
		<main role="main">
		<!--Weave of 'Chapter 16: Circle' generated by Inweb-->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">GXR</a></li><li><b>Chapter 16: Circle</b></li></ul></div>
<p class="purpose">Outline; Filled; Arc; Sector; Segment - 2094 bytes (12.7%)</p>

<ul class="toc"><li><a href="S-s16.html#SP1">&#167;1. Types of circle routines available</a></li><li><a href="S-s16.html#SP2">&#167;2. Plot the outline of a circle</a></li><li><a href="S-s16.html#SP3">&#167;3. Plot a filled circle</a></li><li><a href="S-s16.html#SP4">&#167;4. Get the circle radius squared</a></li><li><a href="S-s16.html#SP5">&#167;5. Initialise circle plotting variables</a></li><li><a href="S-s16.html#SP6">&#167;6. Moves coordinates onto the next pixel around the circle</a></li><li><a href="S-s16.html#SP7">&#167;7. Plot an arc of a circle</a></li><li><a href="S-s16.html#SP8">&#167;8. Plot a sector of a circle</a></li><li><a href="S-s16.html#SP9">&#167;9. Plot a segment of a circle</a></li><li><a href="S-s16.html#SP10">&#167;10. reflectCirclePointXAboutCircleCentre</a></li><li><a href="S-s16.html#SP11">&#167;11. addCirclePointYToCircleCentre</a></li><li><a href="S-s16.html#SP12">&#167;12. Set left and right points Y coordinate to be reflected below the centre row of the circle</a></li><li><a href="S-s16.html#SP13">&#167;13. Square a 16 bit number</a></li><li><a href="S-s16.html#SP14">&#167;14. Initialise variables for drawing a segment</a></li><li><a href="S-s16.html#SP15">&#167;15. Initialise segment when chord crosses centre row</a></li><li><a href="S-s16.html#SP17">&#167;17. circleDoLineAndQuadrantInitialisation</a></li><li><a href="S-s16.html#SP18">&#167;18. Get the quadrant of the line's direction</a></li><li><a href="S-s16.html#SP19">&#167;19. Circle arc / sector / segment quadrant preparation</a></li><li><a href="S-s16.html#SP20">&#167;20. Circle arc / sector / segment quadrant preparation</a></li><li><a href="S-s16.html#SP21">&#167;21. startTrackingChordWithCorrectQuadrantData</a></li><li><a href="S-s16.html#SP22">&#167;22. We have reached the start of the chord</a></li><li><a href="S-s16.html#SP23">&#167;23. Updates tracking the position along the current line</a></li><li><a href="S-s16.html#SP24">&#167;24. Update the line until we reach a new row, then move to that new row</a></li><li><a href="S-s16.html#SP25">&#167;25. When drawing a circle segment, update the position along the chord</a></li><li><a href="S-s16.html#SP26">&#167;26. trackingChordLineHorizontally</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1. Types of circle routines available. </b></p>

<p class="center-p"><img src="circles_chart.png" alt="circles_chart.png"></p>

<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2. Plot the outline of a circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> The circle is specified by two points, the centre point and a point on the radius.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .vduGraphicsCursorPixelsXLow:   centre point    [4 bytes]</span>
<span class="ACME-plain-syntax">   .vdu25ParameterXLow:            point on radius [4 bytes]</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleOutline</span><button class="popup" onclick="togglePopup('usagePopup1')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup1">Usage of <span class="code-font"><span class="ACME-function-syntax">plotCircleOutline</span></span>:<br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9044</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy the centre of the circle point to the old graphics position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax">    </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">source (centre of circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">destination (old graphics</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">copyFourBytesWithinVDUVariables</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">copy current graphics cursor</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">position to old graphics</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">cursor position</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">i.e. copy the centre of the</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">circle</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">centre of circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">plot position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Initialise circle variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP5" class="function-link"><span class="ACME-function-syntax">circleInitialisation</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop to draw the circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Each time around the loop we move to the next pixel around the first quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">of the circle and we reflect to draw the other quadrants</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleOutlineLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9055</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the centre point to get the right hand side point on the circle, then reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">about the centre Y axis to get the left side point on the circle.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointRight = (centreX + pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointLeft  = (centreX - pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP10" class="function-link"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">Set X coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP11" class="function-link"><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">Set Y coordinates</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot four points symmetrically about the centre of the circle</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot right point (quadrant 0)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot point .circlePointRight</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Don't draw the left point if exactly on the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">(since it would be the same as the right point already drawn)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (circle X is zero) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(skip forward)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot left point (quadrant 1)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot point .circlePointLeft</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Don't reflect below the centre row if exactly on the centre row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP2" class="function-link"><span class="ACME-function-syntax">circleOutlineNext</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (circle point Y is zero) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch (skip forward)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP12" class="function-link"><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">reflect points .circlePointLeft and</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.circlePointRight</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically about the centre</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot right point (quadrant 3)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot point .circlePointRight</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Don't reflect if on the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP2" class="function-link"><span class="ACME-function-syntax">circleOutlineNext</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (circle X is zero) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(skip forward)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot left point (quadrant 2)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot point .circlePointLeft</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleOutlineNext</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $908a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrement</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">move to next pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP2" class="function-link"><span class="ACME-function-syntax">circleOutlineLoop</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (circle point X &gt;= 0) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(loop back)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></a><span class="ACME-plain-syntax">         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP3" class="paragraph-anchor"></a><b>&#167;3. Plot a filled circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> The circle is specified by two points, the centre point and a point on the radius.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .vduGraphicsCursorPixelsXLow: centre point [4 bytes]</span>
<span class="ACME-plain-syntax">   .vdu25ParameterXLow: point on radius [4 bytes]</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleFilled</span><button class="popup" onclick="togglePopup('usagePopup2')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup2">Usage of <span class="code-font"><span class="ACME-function-syntax">plotCircleFilled</span></span>:<br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9095</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy centre of circle to old graphics cursor position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">source</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">destination</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP8" class="function-link"><span class="ACME-function-syntax">copyFourBytesWithinVDUVariables</span></a><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Initialise circle variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP5" class="function-link"><span class="ACME-function-syntax">circleInitialisation</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop to draw the circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Each time around the loop we move to the next row of the circle moving from the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">centre row upwards to the top, reflecting each time to draw the rows below the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">centre.</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleFilledLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $90a6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the centre point to get the right hand side point on the circle, then reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">about the centre Y axis to get the left side point on the circle.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointRight = (centreX + pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointLeft  = (centreX - pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP10" class="function-link"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">Set X coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP11" class="function-link"><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">Set Y coordinates</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">draw row in upper half of circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">if we are on the centre row, skip forward</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Reflect points below the centre</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP12" class="function-link"><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">reflect points vertically about the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">centre</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">this gives us the points in the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">remaining two quadrants</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">draw row in lower half of circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Increment the circle point until we reach a new row, then loop back to .circleFilledLoop</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">flag to tell us when we reach a new</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">row</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $90ca</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrement</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">move to next pixel around circle</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP3" class="function-link"><span class="ACME-function-syntax">finishedCircleFilled</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} if (finished) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP3" class="function-link"><span class="ACME-function-syntax">circleRowLoop</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">} if (not on new row yet) loop back</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP3" class="function-link"><span class="ACME-function-syntax">circleFilledLoop</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">ALWAYS branch (loop back)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">finishedCircleFilled</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $90d9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></a><span class="ACME-plain-syntax">         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP4" class="paragraph-anchor"></a><b>&#167;4. Get the circle radius squared. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> By calculating deltaX^2 + deltaY^2 we get the radius squared.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: the vdu variables offset to the centre point of the circle</span>
<span class="ACME-plain-syntax">   Y: the vdu variables offset to a point on the circumference of the circle</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .circleRadiusSquared and .gxrTemp4567: radius squared, i.e.: (deltaX^2) + (deltaY^2)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">getCircleRadiusSquared</span><button class="popup" onclick="togglePopup('usagePopup3')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup3">Usage of <span class="code-font"><span class="ACME-function-syntax">getCircleRadiusSquared</span></span>:<br/><a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP6">&#167;6</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a>, <a href="S-s16.html#SP14">&#167;14</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $90dc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">remember initial X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">remember initial Y</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.gxrTemp12 = delta X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} .gxrTemp12 = point[X].X -</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} point[Y].X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}            = width (signed value)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Compensate for double width pixels (MODE 2,5)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP3" class="function-link"><span class="ACME-function-syntax">pixelShapeForMODE</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeForCurrentMODE</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">store pixel shape based on MODE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not double width pixels) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">to handle double width pixels (MODE 2,5), we double delta X, and deal with the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">consequences</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">in the update routine (see .</span><a href="S-s16.html#SP6" class="internal">circleIncrement</a><span class="ACME-comment-syntax">)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} multiply X coordinate by two to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} compensate</span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Square delta X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP13" class="function-link"><span class="ACME-function-syntax">square12_into4567</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">square width in .gxrTemp12 to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.gxrTemp4567</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleRadiusSquared = .gxrTemp4567</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp4</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} recall initial X, Y variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>


<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.gxrTemp12 = delta Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">2</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">2</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} .gxrTemp12 = point[X].Y -</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} point[Y].Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">3</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}            = height (signed value)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">3</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Compensate for half width pixels (MODE 0)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeForCurrentMODE</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get pixel shape based on MODE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not half width pixels) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">to handle half width pixels (MODE 0), we double the delta Y, and deal with the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">consequences</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">in the update routine (see .</span><a href="S-s16.html#SP6" class="internal">circleIncrement</a><span class="ACME-comment-syntax">)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} multiply Y coordinate by two to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} compensate</span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Square delta Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP13" class="function-link"><span class="ACME-function-syntax">square12_into4567</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">square height in .gxrTemp12 into</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.gxrTemp4567</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleRadiusSquaredLow += .gxrTemp4567</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e. .circleRadiusSquaredLow = (deltaX^2) + (deltaY^2)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.sqrtNumber0 = .circleRadiusSquaredLow</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$FC</span><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">loop counter ($FC,$FD,$FE,$FF)</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FC</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">.circleRadiusSquared += .gxrTemp4567</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtNumber0</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FC</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FC</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtNumber0</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$FC</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">.sqrtNumber0123 = .circleRadiusSquared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">increment loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">if (not done) then branch (loop back)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP5" class="paragraph-anchor"></a><b>&#167;5. Initialise circle plotting variables. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Gets the initial point on the circle (along the positive X-axis, quadrant 0), and initialises</span>
<span class="ACME-plain-syntax"> other variables to help in moving from point to point around the circle.</span>

<span class="ACME-plain-syntax"> Given the square of the radius 'square_r', we take the integer square root to get an integer</span>
<span class="ACME-plain-syntax"> value for the radius: floor_r = floor(sqrtf(square_r)).</span>

<span class="ACME-plain-syntax"> Because the square root function rounds down using the floor function, we ideally want to get</span>
<span class="ACME-plain-syntax"> closer to a proper rounded value: round(sqrtf(square_r)).</span>

<span class="ACME-plain-syntax">   i.e. we want something closer to:</span>

<span class="ACME-plain-syntax">       float float_r = sqrtf(square_r)</span>
<span class="ACME-plain-syntax">       float f = float_r+0.5</span>
<span class="ACME-plain-syntax">       int ideal_radius = floor(f)</span>

<span class="ACME-plain-syntax"> We first calculate the regular integer square root to get floor_r = floor(sqrtf(square_r)), but</span>
<span class="ACME-plain-syntax"> then want to get closer to f.</span>

<span class="ACME-plain-syntax"> Note that f = (float_r+0.5) and:</span>

<span class="ACME-plain-syntax">   f^2 = (float_r+0.5)^2 = float_r^2 + float_r + 0.25</span>

<span class="ACME-plain-syntax"> We already know square_r = float_r^2. We approximate floor_r ~= (float_r + 0.25)</span>
<span class="ACME-plain-syntax"> So we calculate 'square_r + floor_r' and then take the integer square root, to get</span>
<span class="ACME-plain-syntax"> a closer approximation to the ideal_radius = floor(f).</span>

<span class="ACME-plain-syntax"> One of the other variables is the decision variable (.circleDecision). This tracks how</span>
<span class="ACME-plain-syntax"> close we are to the ideal circle radius by tracking the difference between our desired</span>
<span class="ACME-plain-syntax"> radius squared and the current radius squared.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .circleRadiusSquared:  radius squared [4 bytes]</span>
<span class="ACME-plain-syntax">   .sqrtNumber0123:       radius squared [4 bytes]</span>
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .circlePointX: radius   } initial point on circle along X axis = (radius,0)</span>
<span class="ACME-plain-syntax">   .circlePointY: 0        }</span>
<span class="ACME-plain-syntax">   .circleDiameterCountdown: diameter-1    (counts down in steps of 2)</span>
<span class="ACME-plain-syntax">   .circleCountOddNumbers: 1               (counts up in steps of 2)</span>
<span class="ACME-plain-syntax">   .circlePixelShapeCurrentOffset: 3       (accounting for pixel shape)</span>
<span class="ACME-plain-syntax">   .circleDecision: desired radius squared - current radius squared</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleInitialisation</span><button class="popup" onclick="togglePopup('usagePopup4')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup4">Usage of <span class="code-font"><span class="ACME-function-syntax">circleInitialisation</span></span>:<br/><a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $914e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">radius = sqrt(radius squared)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrt32</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">.gxrTemp12 = sqrt(.gxrTemp4567)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleRadiusSquared  += .gxrTemp12 (i.e. .circleRadiusSquaredLow = radius^2 + radius)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.sqrtNumber0123 = .circleRadiusSquared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtNumber0</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} .circleRadiusSquared +=.gxrTemp12</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredMid1</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredMid1</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">} .sqrtNumber0123 =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .circleRadiusSquared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtNumber1</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredMid2</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredMid2</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtNumber2</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredHigh</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredHigh</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtNumber3</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.sqrtResult01 = sqrt(.sqrtNumber0123) i.e. sqrt(radius^2 + radius)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrt32</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">.gxrTemp12 = sqrt(.gxrTemp4567)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePointX = .sqrtResult01</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleDiameterCountdown = 2*.circlePointX - 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtResult0</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">} .circlePointX = .sqrtResult0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">} .circleDiameterCountdown = twice X</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">sqrtResult1</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">} .circleDiameterCountdown--</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Now we have our actual radius we are going to draw, we square it to get the actual</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP13" class="function-link"><span class="ACME-function-syntax">square12_into4567</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">.gxrTemp4567 = .sqrtResult01 *</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.sqrtResult01</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleDecision = .circleRadiusSquared - .gxrTemp45 = (radius^2 + radius) - (actual</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">radius)^2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp4</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionLow</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">} .circleDecision =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .circleRadiusSquared - .gxrTemp45</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredMid1</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp5</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionHigh</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePointY = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleCountOddNumbers = 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersHigh</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersLow</span></a><span class="ACME-plain-syntax">                       </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePixelShapeCurrentOffset = 3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #3                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Scale X based on pixel shape</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeForCurrentMODE</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get pixel shape based on MODE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not double width) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">divide width by two</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP6" class="paragraph-anchor"></a><b>&#167;6. Moves coordinates onto the next pixel around the circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Update the point 'circlePoint' to be the next pixel around the circle anticlockwise from the</span>
<span class="ACME-plain-syntax"> positive x-axis (in quadrant 0). Uses something akin to Bresenham's Circle Algorithm.</span>

<span class="ACME-plain-syntax"> circlePixelShapeCurrentOffset = pixel shape for current MODE</span>
<span class="ACME-plain-syntax"> repeat:</span>
<span class="ACME-plain-syntax">     if circleDecision &lt; circleCountOddNumbers:</span>
<span class="ACME-plain-syntax">         circleDecision += circleDiameterCountdown</span>
<span class="ACME-plain-syntax">         circleDiameterCountdown -= 2</span>
<span class="ACME-plain-syntax">         circlePixelShapeCurrentOffset = circlePixelShapeCurrentOffset EOR 1</span>
<span class="ACME-plain-syntax">         if (circlePixelShapeCurrentOffset AND 1) { circlePointX-- }</span>
<span class="ACME-plain-syntax">         if (circleDecision &lt; circleCountOddNumbers) then goto "circle_continues"</span>

<span class="ACME-plain-syntax">     circleDecision -= circleCountOddNumbers</span>
<span class="ACME-plain-syntax">     circleCountOddNumbers += 2</span>
<span class="ACME-plain-syntax">     circlePixelShapeCurrentOffset = circlePixelShapeCurrentOffset EOR 2</span>
<span class="ACME-plain-syntax">     if circlePixelShapeCurrentOffset AND 2:</span>
<span class="ACME-plain-syntax">         circleFillRowFlag = 1               (start of new row)</span>
<span class="ACME-plain-syntax">         circlePointY++</span>
<span class="ACME-plain-syntax">     "circle_continues"</span>
<span class="ACME-plain-syntax"> until (circlePixelShapeCurrentOffset != 0)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleIncrement</span><button class="popup" onclick="togglePopup('usagePopup5')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup5">Usage of <span class="code-font"><span class="ACME-function-syntax">circleIncrement</span></span>:<br/><a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP4">&#167;4</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $91db</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">The shape of pixels can be double width or half width (compared to MODE 1)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">} .circlePixelShapeCurrentOffset &amp;=</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeForCurrentMODE</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">} pixel shape based on MODE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleIncrementInternal</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $91e4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionLow</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersLow</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">} X = .circleDecision -</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}     .circleCountOddNumbersLow</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionHigh</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersHigh</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">incrementY</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">if (.circleDecision &gt;=</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.circleCountOddNumbers) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionLow</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionLow</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">} .circleDecision +=</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionHigh</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}      .circleDiameterCountdown</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionHigh</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">} .circleDiameterCountdown -= 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDiameterCountdownHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Account for double width pixel shape</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">In double width pixel modes (MODE 2, 5) we skip decrementing X every other time to</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">account for the fact we doubled the deltaX coordinate in the setup routine (see</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.</span><a href="S-s16.html#SP4" class="internal">getCircleRadiusSquared</a><span class="ACME-comment-syntax">)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">} .circlePixelShapeCurrentOffset ^= 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">skipMoveLeft</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">} .circlePointX--</span>
<span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipMoveLeft</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $922c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionLow</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersLow</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">} X = .circleDecisionLow -</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}      .circleCountOddNumbersLow</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionHigh</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersHigh</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleContinues</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">} if (.circleDecision &lt;</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .circleCountOddNumbers) then branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">incrementY</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $923c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionHigh</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">} Finish subtraction started earlier:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleDecisionLow</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">} .circleDecision -=</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .circleCountOddNumbers</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersLow</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">} .circleCountOddNumbers += 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersLow</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCountOddNumbersHigh</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Account for half width pixel shape</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">In half width pixel MODEs (MODE 0) we skip incrementing Y every other time to</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">account for the fact we doubled the deltaY coordinate in the setup routine (see</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.</span><a href="S-s16.html#SP4" class="internal">getCircleRadiusSquared</a><span class="ACME-comment-syntax">)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">} .circlePixelShapeCurrentOffset ^= 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleContinues</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (bit 2 clear) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">set the circle fill flag (moving to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">a new row)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleContinues</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">} .circlePointY++</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleContinues</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9267</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If the pixel shape for the current mode requires we do a second loop then loop back,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">otherwise finish</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePixelShapeCurrentOffset</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">return10</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (done) then branch (return)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrementInternal</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">loop back</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return10</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $926f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP7" class="paragraph-anchor"></a><b>&#167;7. Plot an arc of a circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">                                        KEY: # = chord</span>
<span class="ACME-plain-syntax">                             circle          * = arc</span>
<span class="ACME-plain-syntax"> point defining                |             / = start line</span>
<span class="ACME-plain-syntax"> end of arc ----&gt;\            \|/            \ = end line</span>
<span class="ACME-plain-syntax"> (PLOT parameter) \         ******</span>
<span class="ACME-plain-syntax">                   \    ****      ****</span>
<span class="ACME-plain-syntax">  leftmost end of-&gt; \#######          ***</span>
<span class="ACME-plain-syntax">            chord    \      ########     **</span>
<span class="ACME-plain-syntax">                      \             ######## &lt;---- start of arc (current graphics cursor pos)</span>
<span class="ACME-plain-syntax">                       \                 _/        = rightmost end of chord</span>
<span class="ACME-plain-syntax">                        \               /</span>
<span class="ACME-plain-syntax">                         \            _/</span>
<span class="ACME-plain-syntax">                 end line \          / start line</span>
<span class="ACME-plain-syntax">                           \       _/</span>
<span class="ACME-plain-syntax">                            \     /</span>
<span class="ACME-plain-syntax">                             \  _/</span>
<span class="ACME-plain-syntax">                              \/ &lt;---- centre of circle (old graphics cursor pos)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleArc</span><button class="popup" onclick="togglePopup('usagePopup6')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup6">Usage of <span class="code-font"><span class="ACME-function-syntax">plotCircleArc</span></span>:<br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9270</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">} no chord line to track for an arc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">circleDoLineAndQuadrantInitialisation</span></a><span class="ACME-plain-syntax">          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">circle centre</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">start point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Initialise circle variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP5" class="function-link"><span class="ACME-function-syntax">circleInitialisation</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleArcLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9282</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Each time around this loop is the next pixel around the circle.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We start with the point on the circle to the right on the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">and work up anticlockwise, plotting until we reach the top of the quadrant. We reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">as we go to generate the same points in the remaining quadrants.</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the centre point to get the right hand side point on the circle, then reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">about the centre Y axis to get the left side point on the circle.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointRight = (centreX + pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointLeft  = (centreX - pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP10" class="function-link"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">Set X coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP11" class="function-link"><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">Set Y coordinates</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant zero (top right quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP19" class="function-link"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant one (top left quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Are we the correct side of the chord line?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">chord) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot right side point (quadrant 0)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot point .circlePointRight</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">if (on the centre column) then branch (we can't reflect left of the centre, skip forward)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (X coordinate is zero) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Are we the correct side of the chord line?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">chord) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot left side point (quadrant 1)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot point .circlePointLeft</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">if (on the centre row) then branch (we can't reflect below the line, skip forward)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP7" class="function-link"><span class="ACME-function-syntax">nextCirclePoint</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (Y coordinate is zero) then branch</span>

<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Draw below the centre row</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP12" class="function-link"><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">reflect points .circlePointLeft,</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.circlePointRight vertically below</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the centre row</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant three (bottom right quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP19" class="function-link"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant two (bottom left quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Are we the correct side of the chord line?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not the correct side of chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">line) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot right point (quadrant 2)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot right point</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">if (on centre column) then branch (we can't reflect left of the line, skip forward)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP7" class="function-link"><span class="ACME-function-syntax">nextCirclePoint</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (X coordinate on centre column)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Are we the correct side of the chord line?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP7" class="function-link"><span class="ACME-function-syntax">nextCirclePoint</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">chord) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot left point (quadrant 3)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP6" class="function-link"><span class="ACME-function-syntax">plotPointXInternal</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot left point</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nextCirclePoint</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $92df</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrement</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">move to next point</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP7" class="function-link"><span class="ACME-function-syntax">plotCircleArcLoop</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">loop back if not done</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">finally move graphics cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP8" class="paragraph-anchor"></a><b>&#167;8. Plot a sector of a circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">                                        KEY: * = sector</span>
<span class="ACME-plain-syntax">                                             / = start line</span>
<span class="ACME-plain-syntax">                                             \ = end line</span>
<span class="ACME-plain-syntax"> end of arc ----&gt; \         ******</span>
<span class="ACME-plain-syntax"> (PLOT parameter)  \    **************</span>
<span class="ACME-plain-syntax">                    \********************</span>
<span class="ACME-plain-syntax">                     \*********************</span>
<span class="ACME-plain-syntax">                      \********************* &lt;---- start of arc (graphics cursor)</span>
<span class="ACME-plain-syntax">                       \******************/</span>
<span class="ACME-plain-syntax">                        \***************/</span>
<span class="ACME-plain-syntax">                         \*************/</span>
<span class="ACME-plain-syntax">                 end line \**********/ start line</span>
<span class="ACME-plain-syntax">                           \********/</span>
<span class="ACME-plain-syntax">                            \*****/</span>
<span class="ACME-plain-syntax">                             \***/</span>
<span class="ACME-plain-syntax">                              \/ &lt;---- centre of circle (old graphics cursor)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleSector</span><button class="popup" onclick="togglePopup('usagePopup7')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup7">Usage of <span class="code-font"><span class="ACME-function-syntax">plotCircleSector</span></span>:<br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $92ea</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">no chord line to track</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">set flag to indicate we have</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">just incremented our circle</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">point to a new row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">circleDoLineAndQuadrantInitialisation</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Initialise circle variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP5" class="function-link"><span class="ACME-function-syntax">circleInitialisation</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleSectorLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9301</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Each time around this loop is the next pixel around the circle. This may or may</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">not be on a new row. The flag '.circleFillRowFlag' is set when we should draw the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">next row.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We start with the point on the circle to the right on the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">and work up anticlockwise, plotting rows until we reach the top of the quadrant.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We reflect about the centre point to generate the same rows moving downwards from</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the centre line too.</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the centre point to get the right hand side point on the circle, then reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">about the centre Y axis to get the left side point on the circle.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointRight = (centreX + pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointLeft  = (centreX - pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP10" class="function-link"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">Set X coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP11" class="function-link"><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">Set Y coordinates</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant zero (top right quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP19" class="function-link"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant one (top left quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If not plotting this time around the loop (just updating), then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">plotRowInLowerHalf</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check if on centre row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">notOnCentreRow</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">if (not on centre row) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We are on the centre row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check if we have something to plot in this quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">somethingInQuadrant</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">if (something to plot in this</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">quadrant) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Nothing to plot in quadrant</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Push the appropriate values for use in the lower half</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} push second line;</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} push leftmost chord point;</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">plotRowInLowerHalf</span></a><span class="ACME-plain-syntax">                             </span>


<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">somethingInQuadrant</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $932e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Push the appropriate values for use in the lower half</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push rightmost chord point;</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">pushAAndReflectBelowCentre</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">} if (leftmost chord point == 0)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} then push radial line; else push</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} leftmost chord point;</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">pushAAndReflectBelowCentre</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9337</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">plotRowInLowerHalf</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notOnCentreRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $933b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">nothingToPlot</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">if (nothing to plot in this</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">quadrant) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">nothingToPlot2</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">fill row</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nothingToPlot</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9348</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nothingToPlot2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $934b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">plotRowInLowerHalf</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span>


<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotRowInLowerHalf</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9353</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Now draw the bottom half (i.e. the bottom two quadrants)</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP12" class="function-link"><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">reflect points vertically about the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">centre row</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant 3 (bottom right quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP19" class="function-link"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant 2 (bottom left quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">nextCircleSectorPoint</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (not plotting this time around</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the loop, just updating) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check if on Y=0 centre row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">notOnCentreRow2</span></a><span class="ACME-plain-syntax">                                </span>

<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">On centre row. Adjust values for centre row</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">lNotZero</span></a><span class="ACME-plain-syntax">                                       </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">branch1</span></a><span class="ACME-plain-syntax">                                        </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">lNotZero</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $937e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">branch1</span></a><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">[NOTE: Could do BNE .testY instead]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">branch1</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9387</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">testY</span></a><span class="ACME-plain-syntax">                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">pullValuesAndTest</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">testY</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $938f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">sortValues</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">if (Y != 0) then branch (sort values)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">pullValuesAndTest</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">sortValues</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9399</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s15.html#SP12" class="function-link"><span class="ACME-function-syntax">gxrSortPointsXY</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">pullValuesAndTest</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $939f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} X = pull</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Y = pull</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">testX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">if (Y != 0) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">setLineAndPlot</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">testX</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93aa</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">setLineAndPlot</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">if (X == 0) then branch (don't sort</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertices)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s15.html#SP12" class="function-link"><span class="ACME-function-syntax">gxrSortPointsXY</span></a><span class="ACME-plain-syntax">                                </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">setLineAndPlot</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93b1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">plotRow</span></a><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">plot row</span>


<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notOnCentreRow2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93b7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">nothingToPlot3</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">if (nothing to plot in this</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">quadrant) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">nothingToPlot4</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot row</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nothingToPlot3</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93c4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nothingToPlot4</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93c7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">nextCircleSectorPoint</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (nothing to plot) then branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93cc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">plot row</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nextCircleSectorPoint</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93cf</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">clear flag, no longer on a new row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrement</span></a><span class="ACME-plain-syntax">                                </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (X coordinate is negative) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch (finished drawing)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP8" class="function-link"><span class="ACME-function-syntax">plotCircleSectorLoop</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">jump back to continue drawing</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></a><span class="ACME-plain-syntax">         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP9" class="paragraph-anchor"></a><b>&#167;9. Plot a segment of a circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">                                        KEY: # = chord</span>
<span class="ACME-plain-syntax">                             circle          * = segment ('#' is also part of segment)</span>
<span class="ACME-plain-syntax"> point defining                |             / = start line</span>
<span class="ACME-plain-syntax"> end of arc ----&gt;\            \|/            \ = end line</span>
<span class="ACME-plain-syntax"> (PLOT parameter) \         ******</span>
<span class="ACME-plain-syntax">                   \    **************</span>
<span class="ACME-plain-syntax">  leftmost end of-&gt; \#######*************</span>
<span class="ACME-plain-syntax">            chord    \      ########*******</span>
<span class="ACME-plain-syntax">                      \             ######## &lt;---- start of arc (current graphics cursor pos)</span>
<span class="ACME-plain-syntax">                       \                 _/        = rightmost end of chord</span>
<span class="ACME-plain-syntax">                        \               /</span>
<span class="ACME-plain-syntax">                         \            _/</span>
<span class="ACME-plain-syntax">                 end line \          / start line</span>
<span class="ACME-plain-syntax">                           \       _/</span>
<span class="ACME-plain-syntax">                            \     /</span>
<span class="ACME-plain-syntax">                             \  _/</span>
<span class="ACME-plain-syntax">                              \/ &lt;---- centre of circle (old graphics cursor pos)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotCircleSegment</span><button class="popup" onclick="togglePopup('usagePopup8')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup8">Usage of <span class="code-font"><span class="ACME-function-syntax">plotCircleSegment</span></span>:<br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP8">&#167;8</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93e2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">no chord line to track, yet</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">} set, as if we have just incremented</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">} our circle point to a new row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">circleDoLineAndQuadrantInitialisation</span></a><span class="ACME-plain-syntax">          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Initialise circle variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP5" class="function-link"><span class="ACME-function-syntax">circleInitialisation</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP14" class="function-link"><span class="ACME-function-syntax">segmentInitialisation</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotUpperHalfOfCircleSegmentLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $93fc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Each time around this loop is the next pixel around the circle. This may or may</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">not be on a new row. The flag 'circleFillRowFlag' is set when we should draw the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">next row.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We start with the point on the circle to the right on the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">and work up anticlockwise, plotting rows until we reach the top of the quadrant.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We reflect about the centre point to generate the same rows moving downwards from</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the centre line too.</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the centre point to get the right hand side point on the circle, then reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">about the centre Y axis to get the left side point on the circle.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointRight = (centreX + pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointLeft  = (centreX - pointX, centreY + pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP10" class="function-link"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">Set X coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP11" class="function-link"><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">Set Y coordinates</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant zero (top right quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP19" class="function-link"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant one (top left quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">notTrackingChord1</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">rightmost end of the chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">notTrackingChord2</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">leftmost end of the chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We are vertically in between the two ends of the chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP25" class="function-link"><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">move along the chord line</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">chord line to track</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notTrackingChord2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9422</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (not plotting this time around</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the loop, just updating) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">fill row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notTrackingChord1</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $942d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">leftmost end of the chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move along the chord line horizontally</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP25" class="function-link"><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">chord line to track</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (not plotting this time around</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the loop, just updating) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">fill row</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveToNextCirclePoint</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9444</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">zero flag</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrement</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">move to next pixel around the circle</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">plotUpperHalfOfCircleSegmentLoop</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">if (X coordinate is still positive)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch (loop back)</span>

<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Now draw the bottom half (i.e. the bottom two quadrants)</span>
<span class="ACME-plain-syntax">    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">centre of circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">start arc point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Initialise circle variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP5" class="function-link"><span class="ACME-function-syntax">circleInitialisation</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">} no chord line to track, yet</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP15" class="function-link"><span class="ACME-function-syntax">segmentInitialisationIfStraddlingTheCentreRow</span></a><span class="ACME-plain-syntax">  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If (on centre row already) then zero the fill flag</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">plotLowerHalfOfCircleSegmentLoop</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">if (not on Y=0 centre row) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">zero flag</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotLowerHalfOfCircleSegmentLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $946e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the centre point to get the right hand side point on the circle, then reflect</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">about the centre Y axis to get the left side point on the circle.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Reflect below the centre row.</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointRight = (centreX + pointX, centreY - pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  .circlePointLeft  = (centreX - pointX, centreY - pointY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP10" class="function-link"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">Set X coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP12" class="function-link"><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span></a><span class="ACME-plain-syntax">        </span><span class="ACME-comment-syntax">reflect points vertically about the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">centre</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant three</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP19" class="function-link"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Prepare data for quadrant two</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span>


<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We check to see if we are currently between the top and bottom of the chord line.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If so then we are tracking the chord line.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">notTrackingChord3</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">rightmost end of the chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">notTrackingChord4</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">leftmost end of the chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move along the chord line horizontally</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP25" class="function-link"><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">chord line to track</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notTrackingChord4</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9494</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint2</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if (not on new row) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint2</span></a><span class="ACME-plain-syntax">                         </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notTrackingChord3</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $949f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint2</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if (not the correct side of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">leftmost end of the chord</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">vertically) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move along the chord line horizontally</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP25" class="function-link"><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">chord line to track</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">moveToNextCirclePoint2</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if (not plotting this time around</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the loop, just updating) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s11.html#SP5" class="function-link"><span class="ACME-function-syntax">setMasksAndFillRow</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveToNextCirclePoint2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $94b6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFillRowFlag</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">zero flag, no longer on a new row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP6" class="function-link"><span class="ACME-function-syntax">circleIncrement</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">move to next point on circle</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP9" class="function-link"><span class="ACME-function-syntax">plotLowerHalfOfCircleSegmentLoop</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">if (X &gt;= 0) then loop back (more to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">do)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s12.html#SP4" class="function-link"><span class="ACME-function-syntax">setGraphicsCursorPositionAndFinishPLOT</span></a><span class="ACME-plain-syntax">         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP10" class="paragraph-anchor"></a><b>&#167;10. reflectCirclePointXAboutCircleCentre. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span><button class="popup" onclick="togglePopup('usagePopup9')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup9">Usage of <span class="code-font"><span class="ACME-function-syntax">reflectCirclePointXAboutCircleCentre</span></span>:<br/><a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $94c6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePointRightX = centre X + .circlePointX</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXHigh</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXHigh</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePointLeftX = centre X - .circlePointX</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXHigh</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointXHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXHigh</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP11" class="paragraph-anchor"></a><b>&#167;11. addCirclePointYToCircleCentre. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span><button class="popup" onclick="togglePopup('usagePopup10')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup10">Usage of <span class="code-font"><span class="ACME-function-syntax">addCirclePointYToCircleCentre</span></span>:<br/><a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $94ed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePointLeftY  = .circlePointRightY = centre Y + .circlePointY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsYLow</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightYLow</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftYLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsYHigh</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightYHigh</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftYHigh</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP12" class="paragraph-anchor"></a><b>&#167;12. Set left and right points Y coordinate to be reflected below the centre row of the circle. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       .vduOldGraphicsCursorPixelsY: centre of circle (Y coordinate)</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       .circlePointRightY: centre row Y - .circlePointYLow/High</span>
<span class="ACME-plain-syntax">       .circlePointLeftY : .circlePointRightY</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span><button class="popup" onclick="togglePopup('usagePopup11')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup11">Usage of <span class="code-font"><span class="ACME-function-syntax">reflectPointVerticallyAboutCircleCentre</span></span>:<br/><a href="S-s16.html#SP2">&#167;2</a>, <a href="S-s16.html#SP3">&#167;3</a>, <a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9507</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circlePointLeftY  = .circlePointRightY = centre Y - .circlePointY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsYLow</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">circle centre Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYLow</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightYLow</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftYLow</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsYHigh</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">circle centre Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circlePointYHigh</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightYHigh</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftYHigh</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP13" class="paragraph-anchor"></a><b>&#167;13. Square a 16 bit number. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">square12_into4567</span><button class="popup" onclick="togglePopup('usagePopup12')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup12">Usage of <span class="code-font"><span class="ACME-function-syntax">square12_into4567</span></span>:<br/><a href="S-s16.html#SP4">&#167;4</a>, <a href="S-s16.html#SP5">&#167;5</a><br/>Chapter 23: Ellipse - <a href="S-s23.html#SP5">&#167;5</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9521</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">negate values (abs)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} .gxrTemp1 = -.gxrTemp1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} .gxrTemp2 = -.gxrTemp2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">copy first parameter into second parameter (to multiply the number by itself)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp1</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp4</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp2</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} .gxrTemp45 = .gxrTemp12</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">gxrTemp5</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP4" class="function-link"><span class="ACME-function-syntax">multiply16x16</span></a><span class="ACME-plain-syntax">                                  </span>
</pre>
<p class="commentary firstcommentary"><a id="SP14" class="paragraph-anchor"></a><b>&#167;14. Initialise variables for drawing a segment. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .circleRadiusSquared:</span>
<span class="ACME-plain-syntax">   .line1StartPoint: original end point</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">segmentInitialisation</span><button class="popup" onclick="togglePopup('usagePopup13')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup13">Usage of <span class="code-font"><span class="ACME-function-syntax">segmentInitialisation</span></span>:<br/><a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9546</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.ellipseTempABXY = .circleRadiusSquared (remember radius squared)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">ellipseTempA</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not done yet) then branch (loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">back)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">calculateEndPointOnCircle</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9551</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy line 3 point to line 1 point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line1StartPointX</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">} .line1StartPoint = .line3StartPoint</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">At this point we know the radius (squared) of the circle we want. We walk along the end</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">line from</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the centre until we reach the desired radius (squared).</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">line 3 = end line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP4" class="function-link"><span class="ACME-function-syntax">lineMoveToNextPixel</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">move to next point on end line</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get radius squared</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">current point along end line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">centre of the circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP4" class="function-link"><span class="ACME-function-syntax">getCircleRadiusSquared</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">.circleRadiusSquaredLow is radius^2</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Is (radius based on start point)^2 &gt;= (radius based on end point)^2?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleLargerLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $956d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">ellipseTempA</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadiusSquaredLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">calculate .ellipseTempABXY -</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.circleRadiusSquaredLow</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">to see which is larger</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP14" class="function-link"><span class="ACME-function-syntax">circleLargerLoop</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP14" class="function-link"><span class="ACME-function-syntax">calculateEndPointOnCircle</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">if (.circleOPQR &gt;= (new radius)^2)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then loop back</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Now .circleRadiusSquared is the end point on the circle</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">centre of circle (start of</span>
<span class="ACME-plain-syntax">                                                              </span><span class="ACME-comment-syntax">line)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">       </span><span class="ACME-comment-syntax">PLOT parameter = end point (end of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">line)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">The line initialisation sets up line 3 variables:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3StartPointX: initial and current point X [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3StartPointY: initial and current point Y [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3AbsDeltaX  : abs(deltaX)                 [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3AbsDeltaY  : abs(deltaY)                 [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3ErrorTerm  : Bresenham error term        [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3Signs      : signs of deltaY (top bit) and deltaX (bit 6) [1 byte]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine3Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">if (start and end lines are in the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">same hemisphere,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP14" class="function-link"><span class="ACME-function-syntax">return29</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">i.e. either both above or both below</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the centre row) then branch (return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Start and end lines are in different hemispheres</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                     </span><span class="ACME-comment-syntax">carry = start line is below the</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">  </span><span class="ACME-comment-syntax">beginning of line (start point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line1StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">end of line       (new end point</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">on the circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                                   </span><span class="ACME-comment-syntax">if (start line is below the</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">centre line) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line1StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">beginning of line (new end point</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">on the circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">  </span><span class="ACME-comment-syntax">end of line       (start point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">index of line for chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordDestinationPoint</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">index of end point of chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">initialise line 2 or 3 to be the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">chord line</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFlag</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">which side of line to plot</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return29</span><button class="popup" onclick="togglePopup('usagePopup14')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup14">Usage of <span class="code-font"><span class="ACME-function-syntax">return29</span></span>:<br/><a href="S-s16.html#SP15">&#167;15</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $95b3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP15" class="paragraph-anchor"></a><b>&#167;15. Initialise segment when chord crosses centre row. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> When drawing a circle segment, we initialise variables again when the chord crosses the centre</span>
<span class="ACME-plain-syntax"> row.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">segmentInitialisationIfStraddlingTheCentreRow</span><button class="popup" onclick="togglePopup('usagePopup15')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup15">Usage of <span class="code-font"><span class="ACME-function-syntax">segmentInitialisationIfStraddlingTheCentreRow</span></span>:<br/><a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $95b4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine3Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP14" class="function-link"><span class="ACME-function-syntax">return29</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (both lines are above the centre</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">line, or both below) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">line 2 and line 3 quadrants are either side of the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember carry: set if start line is</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">below the horizontal centre line</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">beginning of line (centre of</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">end of line (start of arc)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                                       </span><span class="ACME-comment-syntax">if (line 2 is below the</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">centre line) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">beginning of line (centre of</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">end of line (original end of</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">arc point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall carry: set if start line is</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">below the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">beginning of line (start point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line1StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">end of line       (new end point on</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (start line is below the centre</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">line) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line1StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">beginning of line (new end point on</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the circle)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">end of line       (start point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">index of line for chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordDestinationPoint</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">index of end point of chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">initialise line 2 or 3 to be the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">chord line</span>
</pre>
<p class="commentary firstcommentary"><a id="SP16" class="paragraph-anchor"></a><b>&#167;16.  </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Prepare line and quadrant data for a circle arc / sector / segment.</span>

<span class="ACME-plain-syntax"> Each circle shape is defined by a circle centre, a start point on the circle, and an end</span>
<span class="ACME-plain-syntax"> point.</span>

<span class="ACME-plain-syntax"> Circles are drawn row by row starting from the horizontal centre line upwards (and at</span>
<span class="ACME-plain-syntax"> the same time reflected to get the rows downward).</span>

<span class="ACME-plain-syntax"> To explain what's going on:</span>
<span class="ACME-plain-syntax">   The *start line* is from the centre to the start point of the arc / sector / segment.</span>
<span class="ACME-plain-syntax">   The *end line* is from the centre to the end point of the arc / sector / segment.</span>
<span class="ACME-plain-syntax">   The *chord line* is from the start point to the end point.</span>

<span class="ACME-plain-syntax"> The code tracks the start and end lines until it reaches the chord, where it replaces</span>
<span class="ACME-plain-syntax"> the line that just finished with the chord line.</span>

<span class="ACME-plain-syntax"> In the code the two lines being tracked are the .line2* and .line3* variables.</span>

<span class="ACME-plain-syntax"> Data used in the circle algorithms</span>
<span class="ACME-plain-syntax"> ----------------------------------</span>

<span class="ACME-plain-syntax"> Quadrants</span>
<span class="ACME-plain-syntax"> ---------</span>

<span class="ACME-plain-syntax"> We divide the screen into four quadrants, with the origin at the centre of the circle:</span>

<span class="ACME-plain-syntax">                             deltaY</span>
<span class="ACME-plain-syntax">                               /|\</span>
<span class="ACME-plain-syntax">                                |</span>
<span class="ACME-plain-syntax">                      quadrant  |  quadrant</span>
<span class="ACME-plain-syntax">                         1      |      0</span>
<span class="ACME-plain-syntax">                                |               \</span>
<span class="ACME-plain-syntax">                 ---------------+----------------   deltaX</span>
<span class="ACME-plain-syntax">                                |               /</span>
<span class="ACME-plain-syntax">                      quadrant  |  quadrant</span>
<span class="ACME-plain-syntax">                         2      |      3</span>
<span class="ACME-plain-syntax">                                |</span>

<span class="ACME-plain-syntax"> Circle quadrant data</span>
<span class="ACME-plain-syntax"> --------------------</span>

<span class="ACME-plain-syntax"> At the start of a circle routine, this function calculates a single data byte for each quadrant.</span>
<span class="ACME-plain-syntax"> The byte value depends on which quadrants the start and end lines are in, and (if both in the same</span>
<span class="ACME-plain-syntax"> quadrant) the anticlockwise order the lines appear in.</span>

<span class="ACME-plain-syntax"> See below for more details of what the bytes mean, but here are the byte values calculated for each</span>
<span class="ACME-plain-syntax"> category:</span>
</pre>
<p class="center-p"><img src="sectors.png" alt="sectors.png"></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">

<span class="ACME-plain-syntax"> +-------+--------+-------+------++-----------------------------------------------------------+</span>
<span class="ACME-plain-syntax"> | start | end    | start | end  ||                  circle quadrant data                     |</span>
<span class="ACME-plain-syntax"> | angle | angle  | quad  | quad ||  quadrant 0  |  quadrant 1  |  quadrant 2  |  quadrant 3  |</span>
<span class="ACME-plain-syntax"> +-------+--------+-------+------++--------------+--------------+--------------+--------------+</span>
<span class="ACME-plain-syntax"> |  30°  |   60°  |   0   |   0  || 3A=0011 1010 |       0      |       0      |       0      |</span>
<span class="ACME-plain-syntax"> |  60°  |   30°  |   0   |   0  || 57=0101 0111 |       1      |       1      |       1      |</span>
<span class="ACME-plain-syntax"> |  30°  |  120°  |   0   |   1  || 0A=0000 1010 | 0E=0000 1110 |       0      |       0      |</span>
<span class="ACME-plain-syntax"> |  30°  |  210°  |   0   |   2  || 0A=0000 1010 |       1      | 07=0000 0111 |       0      |</span>
<span class="ACME-plain-syntax"> |  30°  |  300°  |   0   |   3  || 0A=0000 1010 |       1      |       1      | 0E=0000 1110 |</span>

<span class="ACME-plain-syntax"> | 120°  |   30°  |   1   |   0  || 07=0000 0111 | 03=0000 0011 |       1      |       1      |</span>
<span class="ACME-plain-syntax"> | 120°  |  150°  |   1   |   1  ||       0      | 1E=0001 1110 |       0      |       0      |</span>
<span class="ACME-plain-syntax"> | 150°  |  120°  |   1   |   1  ||       1      | 73=0111 0011 |       1      |       1      |</span>
<span class="ACME-plain-syntax"> | 120°  |  210°  |   1   |   2  ||       0      | 03=0000 0011 | 07=0000 0111 |       0      |</span>
<span class="ACME-plain-syntax"> | 120°  |  300°  |   1   |   3  ||       0      | 03=0000 0011 |       1      | 0E=0000 1110 |</span>

<span class="ACME-plain-syntax"> | 210°  |   30°  |   2   |   0  || 07=0000 0111 |       0      | 0A=0000 1010 |       1      |</span>
<span class="ACME-plain-syntax"> | 210°  |  120°  |   2   |   1  ||       1      | 0E=0000 1110 | 0A=0000 1010 |       1      |</span>
<span class="ACME-plain-syntax"> | 210°  |  240°  |   2   |   2  ||       0      |       0      | 3A=0011 1010 |       0      |</span>
<span class="ACME-plain-syntax"> | 240°  |  210°  |   2   |   2  ||       1      |       1      | 57=0101 0111 |       1      |</span>
<span class="ACME-plain-syntax"> | 210°  |  300°  |   2   |   3  ||       0      |       0      | 0A=0000 1010 | 0E=0000 1110 |</span>

<span class="ACME-plain-syntax"> | 300°  |   30°  |   3   |   0  || 07=0000 0111 |       0      |       0      | 03=0000 0011 |</span>
<span class="ACME-plain-syntax"> | 300°  |  120°  |   3   |   1  ||       1      | 0E=0000 1110 |       0      | 03=0000 0011 |</span>
<span class="ACME-plain-syntax"> | 300°  |  210°  |   3   |   2  ||       1      |       1      | 07=0000 0111 | 03=0000 0011 |</span>
<span class="ACME-plain-syntax"> | 300°  |  330°  |   3   |   3  ||       0      |       0      |       0      | 1E=0001 1110 |</span>
<span class="ACME-plain-syntax"> | 330°  |  300°  |   3   |   3  ||       1      |       1      |       1      | 73=0111 0011 |</span>
<span class="ACME-plain-syntax"> +-------+--------+-------+------++--------------+--------------+--------------+--------------+</span>

<span class="ACME-plain-syntax"> One byte for each quadrant:</span>

<span class="ACME-plain-syntax">    0 means nothing to plot in the quadrant</span>
<span class="ACME-plain-syntax">    1 means plot in the entire quadrant</span>

<span class="ACME-plain-syntax"> else: (the start line and/or end line is in the quadrant)</span>

<span class="ACME-plain-syntax">     bit 0 = for an even quadrant, set if the end line is in the quadrant</span>
<span class="ACME-plain-syntax">             for an odd quadrant, set if the start line is in the quadrant</span>
<span class="ACME-plain-syntax">     bit 1 = set if either the start or end line is in the quadrant (always set)</span>
<span class="ACME-plain-syntax">     bit 2 = set if the end point is in quadrant</span>
<span class="ACME-plain-syntax">     bit 3 = bit 0 inverted:</span>
<span class="ACME-plain-syntax">             for an even quadrant, set if the start line is in the quadrant</span>
<span class="ACME-plain-syntax">             for an odd quadrant, set if the end line is in the quadrant</span>
<span class="ACME-plain-syntax">     bit 4 = set if start and end lines are in the same quadrant</span>
<span class="ACME-plain-syntax">     bit 5 = set if start and end lines are in the same quadrant, and start point is closer to the</span>
<span class="ACME-plain-syntax">             horizontal centre line</span>
<span class="ACME-plain-syntax">     bit 6 = set if start and end lines are in the same quadrant, and start angle is larger</span>
<span class="ACME-plain-syntax">     bit 7 = 0</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">

<span class="ACME-comment-syntax">On Exit:</span>
<span class="ACME-comment-syntax">  .line2*: variables for centre to start point</span>
<span class="ACME-comment-syntax">  .line3*: variables for centre to end point</span>
<span class="ACME-comment-syntax">  .circleQuadrants: four single byte values, one per quadrant (see above)</span>

</pre>
<p class="commentary firstcommentary"><a id="SP17" class="paragraph-anchor"></a><b>&#167;17. circleDoLineAndQuadrantInitialisation. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circleDoLineAndQuadrantInitialisation</span><button class="popup" onclick="togglePopup('usagePopup16')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup16">Usage of <span class="code-font"><span class="ACME-function-syntax">circleDoLineAndQuadrantInitialisation</span></span>:<br/><a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a><br/>Chapter 3: Memory locations - <a href="S-s3.html#SP6">&#167;6</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $95ed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Zero quadrant information, (one byte per quadrant, four bytes in total)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Line 2 is from the centre of the circle to the start point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">beginning of line (circle</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">centre)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">end of line       (arc start</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">The line initialisation sets up variables for line 2:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line2StartPointX: initial and current point X [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line2StartPointY: initial and current point Y [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line2AbsDeltaX  : abs(deltaX)                 [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line2AbsDeltaY  : abs(deltaY)                 [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line2ErrorTerm  : Bresenham error term        [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line2Signs      : signs of deltaY (top bit) and deltaX (bit 6) [1 byte]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Calculate and store quadrant for line 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP18" class="function-link"><span class="ACME-function-syntax">getQuadrant</span></a><span class="ACME-plain-syntax">                                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Line 3 is from the centre of the circle to the end point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduOldGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">   </span><span class="ACME-comment-syntax">beginning of line (circle</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">centre)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vdu25ParameterXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">end of line       (arc end</span>
<span class="ACME-plain-syntax">                                                                </span><span class="ACME-comment-syntax">point)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">The line initialisation sets up variables for line 3:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3StartPointX: initial and current point X [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3StartPointY: initial and current point Y [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3AbsDeltaX  : abs(deltaX)                 [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3AbsDeltaY  : abs(deltaY)                 [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3ErrorTerm  : Bresenham error term        [2 bytes]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   .line3Signs      : signs of deltaY (top bit) and deltaX (bit 6) [1 byte]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Calculate and store quadrant for line 3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP18" class="function-link"><span class="ACME-function-syntax">getQuadrant</span></a><span class="ACME-plain-syntax">                                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine3Quadrant</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Is the line 3 quadrant the same as line 2 quadrant?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">sameQuadrant</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">lines 2 and 3 are in different quadrants</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">line 3 (centre to end point) quadrant has a value associated and stored in</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">circleQuadrants array:</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">quadrant | value  binary</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       0 |  7     %0111</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       1 | 14     %1110</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       2 |  7     %0111</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       3 | 14     %1110</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 0 = odd quadrant (which side of the start line to plot in)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 1 = either start or end line in quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 2 = end point in quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 3 = even quadrant (which side of the end line to plot in)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = line 3 quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">set carry if quadrant is odd</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #7                                              </span><span class="ACME-comment-syntax">A=7 if line 3 quadrant is 0 or 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (quadrant is 0 or 2) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #9                                              </span><span class="ACME-comment-syntax">A=14 (quadrant is 1 or 3)  [NOTE:</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">could do LDA #14]</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">store in offset for the relevant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">quadrant</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">line 2 (centre to start point) quadrant has a value associated and stored in</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">circleQuadrants array:</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">quadrant | value  binary</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       0 | 10     %1010</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       1 |  3     %0011</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       2 | 10     %1010</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">       3 |  3     %0011</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 0 = even quadrant (which side of the start line to fill in)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 1 = either start or end line in quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 2 = end point in quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">bit 3 = odd quadrant (which side of the end line to fill in)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = line 2 quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">set carry if quadrant is odd</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #10                                             </span><span class="ACME-comment-syntax">A=10 if line 2 quadrant is 0 or 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">fillQuadrantDataLoop</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">if (quadrant is 0 or 2) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #9                                              </span><span class="ACME-comment-syntax">A=3 (quadrant is 1 or 3)   [NOTE:</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">could do LDA #3]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">fillQuadrantDataLoop</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">ALWAYS branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">sameQuadrant</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9636</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy line 2 abs(deltaY) and line 3 abs(deltaX) in order to multiply them.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">This is then used to test which line is further around the circle anticlockwise</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2AbsDeltaY</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">multiplicand0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3AbsDeltaX</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">multiplier0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP4" class="function-link"><span class="ACME-function-syntax">multiply16x16</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">.line2AbsDeltaY * .line3AbsDeltaX</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy 32 bit result into .circleSlopeTest</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #3                                              </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">product0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleSlopeTestLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy line 2 abs(deltaX) and line 3 abs(deltaY) in order to multiply them</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">This is then used to test which line is further around the circle anticlockwise</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3AbsDeltaY</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">multiplicand0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2AbsDeltaX</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">multiplier0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s24.html#SP4" class="function-link"><span class="ACME-function-syntax">multiply16x16</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">.line3AbsDeltaY * .line2AbsDeltaX</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">index</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">checkWhichIsLargerLoop2</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (line 2 quadrant is 1 or 3) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Which is larger: .circleSlopeTest or .product0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e. (.line2AbsDeltaY * .line3AbsDeltaX) or (.line3AbsDeltaY * .line2AbsDeltaX)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e. (.line2AbsDeltaY / .line2AbsDeltaX) or (.line3AbsDeltaY / .line3AbsDeltaX)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e. testing which line has the larger slope (rearranged to avoid expensive</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">     divisions and division by zero issues).</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">checkWhichIsLargerLoop1</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9674</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">product0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleSlopeTestLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">checkWhichIsLargerLoop1</span></a><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">doneChecking</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">ALWAYS branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Which is larger, .product0 or .circleSlopeTest</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">checkWhichIsLargerLoop2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9680</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleSlopeTestLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">product0</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">checkWhichIsLargerLoop2</span></a><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">doneChecking</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $968a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Carry holds which slope is bigger (i.e. which line is sloped further away from the X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">axis)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Adjust values as needed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%00111010</span><span class="ACME-plain-syntax">                                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%01101101</span><span class="ACME-plain-syntax">                                      </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">%00100100</span><span class="ACME-plain-syntax">                                      </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine2Quadrant</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">store value in quadrant data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">return21</span></a><span class="ACME-plain-syntax">                                       </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">fillQuadrantDataLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96a2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Fill each quadrant between the start line quadrant to the end line quadrant going</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">anticlockwise. Fill with the value 1 (all of quadrant can be plotted). The remaining</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">quadrants store zero as initialised at the top of the routine.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">store value in quadrant data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} move to next quadrant anticlockwise</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleLine3Quadrant</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">have we reached the end quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">return21</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (same quadrant as line 3) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch (return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">new quadrant back into Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">new value to store</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP17" class="function-link"><span class="ACME-function-syntax">fillQuadrantDataLoop</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return21</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96b4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP18" class="paragraph-anchor"></a><b>&#167;18. Get the quadrant of the line's direction. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">                             deltaY</span>
<span class="ACME-plain-syntax">                               /|\</span>
<span class="ACME-plain-syntax">                                |</span>
<span class="ACME-plain-syntax">                      quadrant  |  quadrant</span>
<span class="ACME-plain-syntax">                         1      |      0</span>
<span class="ACME-plain-syntax">                                |               \</span>
<span class="ACME-plain-syntax">                 ---------------+----------------   deltaX</span>
<span class="ACME-plain-syntax">                                |               /</span>
<span class="ACME-plain-syntax">                      quadrant  |  quadrant</span>
<span class="ACME-plain-syntax">                         2      |      3</span>
<span class="ACME-plain-syntax">                                |</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: index of line to check</span>
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   A: quadrant of line</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">getQuadrant</span><button class="popup" onclick="togglePopup('usagePopup17')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup17">Usage of <span class="code-font"><span class="ACME-function-syntax">getQuadrant</span></span>:<br/><a href="S-s16.html#SP17">&#167;17</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96b5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">10</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">look at the line signs</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$C0</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">just the top two bits</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP18" class="function-link"><span class="ACME-function-syntax">negativeDeltaY</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">if (deltaY &lt; 0) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = 0, carry = sgn(deltaX)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = 0 if deltaX&gt;=0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">A = 1 if deltaX&lt;0</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">negativeDeltaY</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96c0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry = sgn(deltaX), A=1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">(A = 2 if deltaX&gt;=0)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(A = 3 if deltaX&lt;0)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">A = 2 if deltaX&lt;0</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">A = 3 if deltaX&gt;=0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP19" class="paragraph-anchor"></a><b>&#167;19. Circle arc / sector / segment quadrant preparation. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   Y is quadrant to use</span>
<span class="ACME-plain-syntax">   .circlePointRight: point on circle to the right</span>
<span class="ACME-plain-syntax">   .circlePointLeft:  point on circle to the left</span>
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .circleTrackingLeftmostChordPoint:</span>
<span class="ACME-plain-syntax">   .circleTrackingSecondLineInQuadrant:</span>
<span class="ACME-plain-syntax">   .circleRadialLine:</span>
<span class="ACME-plain-syntax">   .circleTrackingRightmostChordPoint:</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span><button class="popup" onclick="togglePopup('usagePopup18')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup18">Usage of <span class="code-font"><span class="ACME-function-syntax">circlePrepareForRightSideQuadrant</span></span>:<br/><a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96c5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointRightXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">leftmost point = right point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">radial line = 0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">prepare for left side, then swap</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">results</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy left result into right side</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingRightmostChordPoint</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">} swap second line and radial line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">.circleTrackingLeftmostChordPoint =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">left point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP20" class="paragraph-anchor"></a><b>&#167;20. Circle arc / sector / segment quadrant preparation. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Updates line tracking for the given quadrant. Used for the left hand quadrants 1,2 but also</span>
<span class="ACME-plain-syntax"> called by the right hand quadrant code (.circlePrepareForRightSideQuadrant above) with quadrant</span>
<span class="ACME-plain-syntax"> values 0, 3.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   Y: quadrant to prepare (0-3)</span>
<span class="ACME-plain-syntax">   .circlePointLeft: point on circle to the right</span>
<span class="ACME-plain-syntax">   .circlePointRight: point on circle to the left</span>
<span class="ACME-plain-syntax">   .circleQuadrants: line information about each quadrant</span>
<span class="ACME-plain-syntax">   .circleTrackingLeftmostChordPoint : index of point on circle</span>
<span class="ACME-plain-syntax">   .circleTrackingSecondLineInQuadrant:</span>
<span class="ACME-plain-syntax">   .circleRadialLine:</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .circleTrackingLeftmostChordPoint : which line to check against when deciding whether</span>
<span class="ACME-plain-syntax">                                       to plot; zero means nothing to plot in this quadrant</span>
<span class="ACME-plain-syntax">   .circleTrackingSecondLineInQuadrant:</span>
<span class="ACME-plain-syntax">   .circleRadialLine:</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span><button class="popup" onclick="togglePopup('usagePopup19')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup19">Usage of <span class="code-font"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></span>:<br/><a href="S-s16.html#SP7">&#167;7</a>, <a href="S-s16.html#SP8">&#167;8</a>, <a href="S-s16.html#SP9">&#167;9</a>, <a href="S-s16.html#SP19">&#167;19</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96ef</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrantDataShifter</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">how many times to shift the quadrant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">data when starting to track the chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.circleQuadrants stores one byte for each quadrant:</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   0 means nothing to plot in the quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">   1 means plot in the entire quadrant</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">else: (the start line and/or end line is in the quadrant)</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 0 = for an even quadrant, set if the end line is in the quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">            for an odd quadrant, set if the start line is in the quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">            This determines if plotting is wanted to the left of the line in the left</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">side quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 1 = set if either the start or end line is in the quadrant (always set)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 2 = set if the end point is in quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 3 = bit 0 inverted:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">            for an even quadrant, set if the start line is in the quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">            for an odd quadrant, set if the end line is in the quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 4 = set if start and end lines are in the same quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 5 = set if start and end lines are in the same quadrant, and start point is</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">closer to the horizontal centre line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 6 = set if start and end lines are in the same quadrant, and start angle is</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">larger</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">    bit 7 = 0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">lineFoundInQuadrant</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">if (a line is in the quadrant) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">No line in quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">return22</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (plot in the entire quadrant)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch (return)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">if (nothing in this quadrant to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">plot) then (return with</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.circleTrackingLeftmostChordPoint =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">0)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return22</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $96ff</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">lineFoundInQuadrant</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9700</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">At least one of the two lines is within the quadrant.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push carry flag (was bit 0)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry = set if end line is in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">quadrant Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCurrentQuadrant</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">remember Y (current quadrant)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We have a start line (line 2) and an end line (line 3).</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We make sure X is set to the index of the line that is within the quadrant, and Y is the</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">other line.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">} X is the line we are tracking (the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} start line), Y is the other line</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} (the end line)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">} (used when the end line is not in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} the quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (end line not in quadrant) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">End line in quadrant, use X=end line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">} X is the line we are tracking (the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} end line), Y is the other line</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} (the start line)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">} used when the end line is in the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} quadrant</span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleSecondaryLine</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">remember the second line (we might</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">need to track it, if it's also in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the same quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">index of point on circle at left end</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall carry flag (from bit 0: which</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">side of line in quadrant to plot)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">canPlotLeftOfLineInQuadrant</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">if (side of line to plot is one way)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Can plot to the right of the line in the quadrant.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Update this line until we reach a new row.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">updateLineAndMoveToNextRow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">stillTrackingLineA</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (we are still tracking the line)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Start tracking along the chord instead of the start or end line that has just finished</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP22" class="function-link"><span class="ACME-function-syntax">startTrackingChord</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCurrentQuadrant</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">recall current quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">loop back</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">stillTrackingLineA</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9727</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingLeftmostChordPoint</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCurrentQuadrant</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">recall current quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$F0</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">startTrackingChordLocal1</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">if (no second line in quadrant) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Tracking two lines in the quadrant, update the second line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleSecondaryLine</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">recall the secondary line we are</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">tracking</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">updateLineToEndOfRow</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (line has not yet reached the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">circle point) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Second line has reached circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrantDataShifter</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">how many times to shift the quadrant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">data when starting to track the chord</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">remember line we are tracking (the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">second line in the quadrant)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">startTrackingChordLocal1</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9746</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP21" class="function-link"><span class="ACME-function-syntax">startTrackingChordWithCorrectQuadrantData</span></a><span class="ACME-plain-syntax">      </span>


<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Similar to above code</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">canPlotLeftOfLineInQuadrant</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9749</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Can plot to the left of the line in the quadrant.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Update this line until we reach a new row.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">updateLineToEndOfRow</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">stillTrackingLineB</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (we are still tracking the line)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Start tracking along the chord instead of the start or end line that has just finished</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP22" class="function-link"><span class="ACME-function-syntax">startTrackingChord</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCurrentQuadrant</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">recall current quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">circlePrepareForLeftSideQuadrant</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">loop back</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">stillTrackingLineB</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9757</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleTrackingSecondLineInQuadrant</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">remember line we are tracking (the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">second line in the quadrant)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCurrentQuadrant</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">recall current quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$F0</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">check if we are tracking two lines</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">in the quadrant</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">startTrackingChordLocal2</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">if (no second line in quadrant) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Tracking two lines in the quadrant, update the second line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleSecondaryLine</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">recall the secondary line we are</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">tracking</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">updateLineAndMoveToNextRow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP20" class="function-link"><span class="ACME-function-syntax">secondLineNotReachedCircleYet</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">if (not yet reached circle) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Second line has reached circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrantDataShifter</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">how many times to shift the quadrant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">data when starting to track the chord</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">secondLineNotReachedCircleYet</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9771</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleRadialLine</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">remember second line we are tracking</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">startTrackingChordLocal2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9774</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP21" class="function-link"><span class="ACME-function-syntax">startTrackingChordWithCorrectQuadrantData</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">[NOTE: Redundant, could just fall</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">through]</span>
</pre>
<p class="commentary firstcommentary"><a id="SP21" class="paragraph-anchor"></a><b>&#167;21. startTrackingChordWithCorrectQuadrantData. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">startTrackingChordWithCorrectQuadrantData</span><button class="popup" onclick="togglePopup('usagePopup20')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup20">Usage of <span class="code-font"><span class="ACME-function-syntax">startTrackingChordWithCorrectQuadrantData</span></span>:<br/><a href="S-s16.html#SP20">&#167;20</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9777</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrantDataShifter</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">how many times to shift the quadrant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">data when starting to track the chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP21" class="function-link"><span class="ACME-function-syntax">return24</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (done) then return</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP22" class="function-link"><span class="ACME-function-syntax">startTrackingChord</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift quadrant data bits down and start tracking the chord line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP21" class="function-link"><span class="ACME-function-syntax">startTrackingChordWithCorrectQuadrantData</span></a><span class="ACME-plain-syntax">      </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return24</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9782</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP22" class="paragraph-anchor"></a><b>&#167;22. We have reached the start of the chord. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> We track the chord line by reusing line 2 or line 3, i.e. reusing the start or end line</span>
<span class="ACME-plain-syntax"> that we have just finished tracking.</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   X, .circleChordLine:            index of the current chord line</span>
<span class="ACME-plain-syntax">   .circleChordDestinationPoint:   index of the end of the chord point</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">startTrackingChord</span><button class="popup" onclick="togglePopup('usagePopup21')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup21">Usage of <span class="code-font"><span class="ACME-function-syntax">startTrackingChord</span></span>:<br/><a href="S-s16.html#SP20">&#167;20</a>, <a href="S-s16.html#SP21">&#167;21</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9783</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleCurrentQuadrant</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift quadrant data down three bits</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} shift right quadrant data by three</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} bits</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} carry = which side of line to plot</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} (for end line)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrants</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFlag</span></a><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">which side of line to plot</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">} clear chord line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} [NOTE: Redundant, .circleChordLine</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} is set below]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">line from: current point along</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">start line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line1StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">line to:   point on circle at</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">end line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line2StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                                   </span><span class="ACME-comment-syntax">if (which side of line to plot)</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">line from: current point on end</span>
<span class="ACME-plain-syntax">                                                            </span><span class="ACME-comment-syntax">line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduGraphicsCursorPixelsXLow</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">  </span><span class="ACME-comment-syntax">line to: initial arc start point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #.</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">line3StartPointX</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">             </span><span class="ACME-comment-syntax">where to put results</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">index of chord line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordDestinationPoint</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">index of end of chord point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP1" class="function-link"><span class="ACME-function-syntax">lineInitialisation</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">start tracking the chord line</span>
</pre>
<p class="commentary firstcommentary"><a id="SP23" class="paragraph-anchor"></a><b>&#167;23. Updates tracking the position along the current line. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> ... until we either:</span>
<span class="ACME-plain-syntax">       (a) move incrementally to a new row (the common case),</span>
<span class="ACME-plain-syntax">       (b) hit the given point on the circle (marking the end of the line tracking), or</span>
<span class="ACME-plain-syntax">       (c) reach the same X as the point on the circle but not the same Y</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: index of line</span>
<span class="ACME-plain-syntax">   Y: index of circle point</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   Zero flag: non-zero if the line has reached the circle. We don't need to continue tracking</span>
<span class="ACME-plain-syntax">      the line any further.</span>
<span class="ACME-plain-syntax">   Negative flag: set if the Y coordinates don't match but the X coordinates do.</span>

<span class="ACME-plain-syntax">   Preserves X,Y</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">updateLineToEndOfRow</span><button class="popup" onclick="togglePopup('usagePopup22')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup22">Usage of <span class="code-font"><span class="ACME-function-syntax">updateLineToEndOfRow</span></span>:<br/><a href="S-s16.html#SP20">&#167;20</a>, <a href="S-s16.html#SP24">&#167;24</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $97b5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We first compare the current point along the line (indexed by the X register)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">against the current point on the circle (indexed by the Y register)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If Y coordinate doesn't match, then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">2,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">2,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">yCoordinatesDontMatch</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">3,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">3,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">yCoordinatesDontMatch</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Y coordinates match. If X coordinates don't match, then return 0 else return 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">xCoordinatesDontMatch</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">xCoordinatesDontMatch</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Both the X and Y coordinates match the circle position.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrantDataShifter</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">how many times to shift the quadrant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">data when starting to track the chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">finished tracking line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">xCoordinatesDontMatch</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $97db</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">not finished tracking line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">yCoordinatesDontMatch</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $97de</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check X if coordinates match</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">moveAlongRow</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">rorAndReturn</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">if (X coordinates match) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(note that carry is set in this case)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveAlongRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $97ee</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move one pixel along the line (preserving X and Y registers) and loop back to try again</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} remember X,Y</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP4" class="function-link"><span class="ACME-function-syntax">lineMoveToNextPixel</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">move to next point on line X</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} recall X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">updateLineToEndOfRow</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">rorAndReturn</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $97fc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry (always set in practice)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">is shifted into top bit of A,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">setting the Negative flag.</span>
</pre>
<p class="commentary firstcommentary"><a id="SP24" class="paragraph-anchor"></a><b>&#167;24. Update the line until we reach a new row, then move to that new row. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: index of the line we are updating</span>
<span class="ACME-plain-syntax">   Y: index of point on the circle</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   Zero flag: non-zero if the line has reached the circle. We don't need to continue tracking</span>
<span class="ACME-plain-syntax">      the line any further.</span>
<span class="ACME-plain-syntax">   Negative flag: set if the X coordinates match but the Y coordinates don't.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">updateLineAndMoveToNextRow</span><button class="popup" onclick="togglePopup('usagePopup23')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup23">Usage of <span class="code-font"><span class="ACME-function-syntax">updateLineAndMoveToNextRow</span></span>:<br/><a href="S-s16.html#SP20">&#167;20</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $97fe</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP23" class="function-link"><span class="ACME-function-syntax">updateLineToEndOfRow</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">moveToNextRow</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">if (not yet reached the point on the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">circle) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">[NOTE: Could use BNE .return20]</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveToNextRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9804</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">} check line X coordinates to see if</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} they match</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">} if not, then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">xCoordsDontMatch</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">xCoordsDontMatch</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">X coordinates match, we have reached the end of the row. Move to the next row and stop.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">negative flag = bit 6 of high byte</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of X coordinate [NOTE: why?]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleQuadrantDataShifter</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">how many times to shift the quadrant</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">data when starting to track the chord</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">xCoordsDontMatch</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9819</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">9,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">} get sign of the error term (top</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} bit)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry = sign of error term, A=0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">return20</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (error term &lt; 0) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move one pixel along the line (preserving X and Y registers) then loop back to try again</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} remember X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP4" class="function-link"><span class="ACME-function-syntax">lineMoveToNextPixel</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">move to next point on line X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} recall X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP24" class="function-link"><span class="ACME-function-syntax">moveToNextRow</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return20</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9830</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">[NOTE: this can be removed and the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">previous RTS instruction used</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">instead]</span>
</pre>
<p class="commentary firstcommentary"><a id="SP25" class="paragraph-anchor"></a><b>&#167;25. When drawing a circle segment, update the position along the chord. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Moves the position along the chord on the current row until we reach the point of moving</span>
<span class="ACME-plain-syntax"> to the next row.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .circleChordLine: index of chord point</span>
<span class="ACME-plain-syntax">   .circleChordDestinationPoint: index of destination point for chord</span>
<span class="ACME-plain-syntax">   .circleFlag: set if on a new row</span>
<span class="ACME-plain-syntax">   .circlePointLeftY: Y coordinate of point on circle</span>

<span class="ACME-plain-syntax"> Line drawing/tracking variables</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span><button class="popup" onclick="togglePopup('usagePopup24')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup24">Usage of <span class="code-font"><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span></span>:<br/><a href="S-s16.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9831</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">First test that we are on the same Y coordinate as the current point on the circle.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If not then we loop until we are. Then we start tracking horizontally.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">2,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">get Y position along chord, compare</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">it to current Y position on circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftYLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">current Y coordinate on circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP25" class="function-link"><span class="ACME-function-syntax">trackingChordLineVertically</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">if (current point Y != .point on</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">circle Y) then branch (update error</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">term and try again)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">3,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">circlePointLeftYHigh</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">current Y coordinate on circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP26" class="function-link"><span class="ACME-function-syntax">trackingChordLineHorizontally</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">trackingChordLineVertically</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9844</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP4" class="function-link"><span class="ACME-function-syntax">lineMoveToNextPixel</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">move to next point on line X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP25" class="function-link"><span class="ACME-function-syntax">advanceAlongChordLineUntilNewRow</span></a><span class="ACME-plain-syntax">               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP26" class="paragraph-anchor"></a><b>&#167;26. trackingChordLineHorizontally. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">trackingChordLineHorizontally</span><button class="popup" onclick="togglePopup('usagePopup25')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup25">Usage of <span class="code-font"><span class="ACME-function-syntax">trackingChordLineHorizontally</span></span>:<br/><a href="S-s16.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $984a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleFlag</span></a><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP26" class="function-link"><span class="ACME-function-syntax">return23</span></a><span class="ACME-plain-syntax">                                       </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveAlongChordHorizontallyLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $984f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check if the current chord X position equals the current circle X position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordDestinationPoint</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">check if chord line's current X</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">equals the chord destination point.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP26" class="function-link"><span class="ACME-function-syntax">return23</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if equal then return</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">X coordinates don't match.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">If ready for a new row, then return</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP3" class="function-link"><span class="ACME-function-syntax">vduVariablesStart</span></a><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">9,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">get error term</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP26" class="function-link"><span class="ACME-function-syntax">return23</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">} if (error term &lt; 0) then return</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} [NOTE: could use BMI .return23</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} without the ROL?]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move to next pixel along chord line</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s17.html#SP4" class="function-link"><span class="ACME-function-syntax">lineMoveToNextPixel</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">move to next point on line X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP6" class="function-link"><span class="ACME-function-syntax">circleChordLine</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s16.html#SP26" class="function-link"><span class="ACME-function-syntax">moveAlongChordHorizontallyLoop</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return23</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $9871</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="S-s15.html">&#10094;</a></li><li class="progresssection"><a href="S-s1.html">1</a></li><li class="progresssection"><a href="S-s2.html">2</a></li><li class="progresssection"><a href="S-s3.html">3</a></li><li class="progresssection"><a href="S-s4.html">4</a></li><li class="progresssection"><a href="S-s5.html">5</a></li><li class="progresssection"><a href="S-s6.html">6</a></li><li class="progresssection"><a href="S-s7.html">7</a></li><li class="progresssection"><a href="S-s8.html">8</a></li><li class="progresssection"><a href="S-s9.html">9</a></li><li class="progresssection"><a href="S-s10.html">10</a></li><li class="progresssection"><a href="S-s11.html">11</a></li><li class="progresssection"><a href="S-s12.html">12</a></li><li class="progresssection"><a href="S-s13.html">13</a></li><li class="progresssection"><a href="S-s14.html">14</a></li><li class="progresssection"><a href="S-s15.html">15</a></li><li class="progresscurrent">16</li><li class="progresssection"><a href="S-s17.html">17</a></li><li class="progresssection"><a href="S-s18.html">18</a></li><li class="progresssection"><a href="S-s19.html">19</a></li><li class="progresssection"><a href="S-s20.html">20</a></li><li class="progresssection"><a href="S-s21.html">21</a></li><li class="progresssection"><a href="S-s22.html">22</a></li><li class="progresssection"><a href="S-s23.html">23</a></li><li class="progresssection"><a href="S-s24.html">24</a></li><li class="progresssection"><a href="S-s25.html">25</a></li><li class="progressnext"><a href="S-s17.html">&#10095;</a></li></ul></div>
</nav><!--End of weave-->

		</main>
	</body>
</html>

