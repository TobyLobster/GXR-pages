<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Chapter 22: Sprite Editor</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Carousel.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/ACME-Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<p>BBC Computer 32K</p>
<h1>*GXR</h1>
<ul><li><a href="../index.html">&#x21A9; home</a></li><li><a href="index.html"><span class="selectedlink">contents</span></a></li>
<li><a href="S-s1.html">introduction</a></li>
<li><a href="S-s2.html">constants</a></li>
<li><a href="S-s3.html">memory addresses</a></li>
<li><a href="S-s4.html"><b>$8000</b>: chapter 4</a></li>
<li><a href="S-s5.html"><b>$8167</b>: chapter 5</a></li>
<li><a href="S-s6.html"><b>$82a9</b>: chapter 6</a></li>
<li><a href="S-s7.html"><b>$8349</b>: chapter 7</a></li>
<li><a href="S-s8.html"><b>$88f9</b>: chapter 8</a></li>
<li><a href="S-s9.html"><b>$8955</b>: chapter 9</a></li>
<li><a href="S-s10.html"><b>$899d</b>: chapter 10</a></li>
<li><a href="S-s11.html"><b>$8a8a</b>: chapter 11</a></li>
<li><a href="S-s12.html"><b>$8bb4</b>: chapter 12</a></li>
<li><a href="S-s13.html"><b>$8d83</b>: chapter 13</a></li>
<li><a href="S-s14.html"><b>$8dd2</b>: chapter 14</a></li>
<li><a href="S-s15.html"><b>$8e5b</b>: chapter 15</a></li>
<li><a href="S-s16.html"><b>$9044</b>: chapter 16</a></li>
<li><a href="S-s17.html"><b>$9872</b>: chapter 17</a></li>
<li><a href="S-s18.html"><b>$9ced</b>: chapter 18</a></li>
<li><a href="S-s19.html"><b>$9f7c</b>: chapter 19</a></li>
<li><a href="S-s20.html"><b>$a258</b>: chapter 20</a></li>
<li><a href="S-s21.html"><b>$a40e</b>: chapter 21</a></li>
<li><span class="unlink"><b>$a808</b>: chapter 22</span></li>
<li><a href="S-s23.html"><b>$b9ea</b>: chapter 23</a></li>
<li><a href="S-s24.html"><b>$bdd0</b>: chapter 24</a></li>
<li><a href="S-s25.html"><b>$bfdb</b>: chapter 25</a></li>

</ul>
		</nav>
		<main role="main">
		<!--Weave of 'Chapter 22: Sprite Editor' generated by Inweb-->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">GXR</a></li><li><b>Chapter 22: Sprite Editor</b></li></ul></div>
<p class="purpose">Full screen sprite editor - 4578 bytes (27.9%)</p>

<ul class="toc"><li><a href="S-s22.html#SP1">&#167;1. Sprite Editor</a></li><li><a href="S-s22.html#SP2">&#167;2. drawRectangleAroundSpriteInBlack</a></li><li><a href="S-s22.html#SP3">&#167;3. Draw rectangle around large sprite in the sprite editor</a></li><li><a href="S-s22.html#SP4">&#167;4. Get screen coordinates for the visible area of the current sprite</a></li><li><a href="S-s22.html#SP5">&#167;5. seditDrawLargeSpriteRow</a></li><li><a href="S-s22.html#SP6">&#167;6. seditDrawLargeSpriteColumn</a></li><li><a href="S-s22.html#SP7">&#167;7. seditDrawLargeSprite</a></li><li><a href="S-s22.html#SP8">&#167;8. Unplot the cursor, redraw regular and large sprites, then redraw the cursor</a></li><li><a href="S-s22.html#SP9">&#167;9. Draw (or undraw) the circular cursor in the sprite editor</a></li><li><a href="S-s22.html#SP10">&#167;10. seditDrawLargePixelRectangle</a></li><li><a href="S-s22.html#SP11">&#167;11. seditFinishMoveAndDrawLargePixelRectangle</a></li><li><a href="S-s22.html#SP12">&#167;12. Calculate address within sprite given (X, Y) pixel coordinates</a></li><li><a href="S-s22.html#SP13">&#167;13. seditXCoordinatePowerOf2</a></li><li><a href="S-s22.html#SP14">&#167;14. Get screen coordinates from sprite coordinates (.seditCurrentX, .seditCurrentY)</a></li><li><a href="S-s22.html#SP15">&#167;15. seditMoveToNextSpriteToDelete</a></li><li><a href="S-s22.html#SP16">&#167;16. *SDELETE</a></li><li><a href="S-s22.html#SP17">&#167;17. Delete a sprite</a></li><li><a href="S-s22.html#SP18">&#167;18. Add sprite</a></li><li><a href="S-s22.html#SP19">&#167;19. Redraw regular sized sprite</a></li><li><a href="S-s22.html#SP20">&#167;20. Sprite data for new sprite</a></li><li><a href="S-s22.html#SP21">&#167;21. *SEDIT n[,m]</a></li><li><a href="S-s22.html#SP22">&#167;22. Main sprite editor routine</a></li><li><a href="S-s22.html#SP23">&#167;23. Exit the sprite editor</a></li><li><a href="S-s22.html#SP24">&#167;24. Call the specific editing function</a></li><li><a href="S-s22.html#SP25">&#167;25. Sprite editor commands (function keys, COPY key, and cursor keys)</a></li><li><a href="S-s22.html#SP26">&#167;26. Delete a square shown in the large sprite</a></li><li><a href="S-s22.html#SP27">&#167;27. Copy key: set pixel to white</a></li><li><a href="S-s22.html#SP28">&#167;28. Check for pen down then set pixel</a></li><li><a href="S-s22.html#SP29">&#167;29. Write pixel into sprite</a></li><li><a href="S-s22.html#SP30">&#167;30. Copy visible area rectangle left or right</a></li><li><a href="S-s22.html#SP31">&#167;31. Copy visible area rectangle up or down</a></li><li><a href="S-s22.html#SP32">&#167;32. moveXMinus1YMinus1</a></li><li><a href="S-s22.html#SP33">&#167;33. MOVE vdu[X],vdu[Y]</a></li><li><a href="S-s22.html#SP34">&#167;34. PLOT X,vdu[.seditCurrentVisibleX],vdu[Y]</a></li><li><a href="S-s22.html#SP35">&#167;35. Copy a rectangle in the large sprite area</a></li><li><a href="S-s22.html#SP36">&#167;36. Move sprite cursor left</a></li><li><a href="S-s22.html#SP37">&#167;37. Move sprite cursor right</a></li><li><a href="S-s22.html#SP38">&#167;38. Move sprite cursor down</a></li><li><a href="S-s22.html#SP39">&#167;39. Move sprite cursor up</a></li><li><a href="S-s22.html#SP40">&#167;40. Move sprite cursor fully left</a></li><li><a href="S-s22.html#SP41">&#167;41. Shift sprite cursor left</a></li><li><a href="S-s22.html#SP42">&#167;42. Move sprite cursor fully right</a></li><li><a href="S-s22.html#SP43">&#167;43. Shift sprite cursor right</a></li><li><a href="S-s22.html#SP44">&#167;44. Move sprite cursor fully down</a></li><li><a href="S-s22.html#SP45">&#167;45. Shift sprite cursor down</a></li><li><a href="S-s22.html#SP46">&#167;46. Move sprite cursor fully up</a></li><li><a href="S-s22.html#SP47">&#167;47. Shift sprite cursor up</a></li><li><a href="S-s22.html#SP48">&#167;48. Deselect current sprite</a></li><li><a href="S-s22.html#SP49">&#167;49. Record the current sprite details in the private workspace</a></li><li><a href="S-s22.html#SP50">&#167;50. Extend the sprite to insert a new row</a></li><li><a href="S-s22.html#SP51">&#167;51. Rectangle fill in large sprite area</a></li><li><a href="S-s22.html#SP52">&#167;52. Extend the sprite to insert a new column</a></li><li><a href="S-s22.html#SP53">&#167;53. Remove a row from the sprite</a></li><li><a href="S-s22.html#SP54">&#167;54. Remove a column from the sprite</a></li><li><a href="S-s22.html#SP55">&#167;55. Extend a sprite</a></li><li><a href="S-s22.html#SP56">&#167;56. noRoomToExtendSprite</a></li><li><a href="S-s22.html#SP57">&#167;57. Reduce a sprite</a></li><li><a href="S-s22.html#SP58">&#167;58. Toggle pen up / down</a></li><li><a href="S-s22.html#SP59">&#167;59. Flood one column of sprite</a></li><li><a href="S-s22.html#SP60">&#167;60. Flood one row of sprite</a></li><li><a href="S-s22.html#SP61">&#167;61. Get the current pixel colour from a sprite returned as a solid colour byte</a></li><li><a href="S-s22.html#SP62">&#167;62. writeSpritePixelIfItsBackgroundColour</a></li><li><a href="S-s22.html#SP63">&#167;63. Insert row</a></li><li><a href="S-s22.html#SP64">&#167;64. Delete row</a></li><li><a href="S-s22.html#SP65">&#167;65. Print the following message</a></li><li><a href="S-s22.html#SP66">&#167;66. Insert column</a></li><li><a href="S-s22.html#SP67">&#167;67. Delete column</a></li><li><a href="S-s22.html#SP68">&#167;68. createMaskByteForPixelsToTheRight</a></li><li><a href="S-s22.html#SP69">&#167;69. Reverse the pixels in the byte</a></li><li><a href="S-s22.html#SP70">&#167;70. Mirror sprite vertically</a></li><li><a href="S-s22.html#SP71">&#167;71. Mirror sprite horizontally</a></li><li><a href="S-s22.html#SP72">&#167;72. incTempStoreDADB</a></li><li><a href="S-s22.html#SP73">&#167;73. incTempStoreDCDD</a></li><li><a href="S-s22.html#SP74">&#167;74. decTempStoreDADB</a></li><li><a href="S-s22.html#SP75">&#167;75. decTempStoreDCDD</a></li><li><a href="S-s22.html#SP76">&#167;76. Find the address of the given sprite</a></li><li><a href="S-s22.html#SP77">&#167;77. Move address to the start of the next sprite</a></li><li><a href="S-s22.html#SP78">&#167;78. Get the amount of free space remaining in the sprite data</a></li><li><a href="S-s22.html#SP79">&#167;79. Skips past any spaces on the command line</a></li><li><a href="S-s22.html#SP80">&#167;80. Read 8 bit number from user input string into A</a></li><li><a href="S-s22.html#SP81">&#167;81. badNumberError</a></li><li><a href="S-s22.html#SP82">&#167;82. PLOT X,</a></li><li><a href="S-s22.html#SP83">&#167;83. VDU plotPointX;</a></li><li><a href="S-s22.html#SP84">&#167;84. VDU plotPointY;</a></li><li><a href="S-s22.html#SP85">&#167;85. GCOL X,Y</a></li><li><a href="S-s22.html#SP86">&#167;86. 8 bit unsigned multiply, 16 bit result</a></li><li><a href="S-s22.html#SP87">&#167;87. Print sprite details (in editor)</a></li><li><a href="S-s22.html#SP88">&#167;88. Print the 8 bit number in A</a></li><li><a href="S-s22.html#SP89">&#167;89. Print the 16 bit number in XA</a></li><li><a href="S-s22.html#SP90">&#167;90. powersOfTenTable</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1. Sprite Editor. </b></p>

<p class="center-p"><img src="editor.png" alt="editor.png"></p>

<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2. drawRectangleAroundSpriteInBlack. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">drawRectangleAroundSpriteInBlack</span><button class="popup" onclick="togglePopup('usagePopup1')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup1">Usage of <span class="code-font"><span class="ACME-function-syntax">drawRectangleAroundSpriteInBlack</span></span>:<br/><a href="S-s22.html#SP50">&#167;50</a>, <a href="S-s22.html#SP52">&#167;52</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a808</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP3" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSprite</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">ALWAYS branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">drawRectangleAroundSpriteInWhite</span><button class="popup" onclick="togglePopup('usagePopup2')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup2">Usage of <span class="code-font"><span class="ACME-function-syntax">drawRectangleAroundSpriteInWhite</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a>, <a href="S-s22.html#SP50">&#167;50</a>, <a href="S-s22.html#SP51">&#167;51</a>, <a href="S-s22.html#SP52">&#167;52</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a80c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #7                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP3" class="paragraph-anchor"></a><b>&#167;3. Draw rectangle around large sprite in the sprite editor. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   Y = logical colour to draw in</span>
<span class="ACME-plain-syntax">   .seditCurrentSpriteVisibleWidth:  visible width of current sprite</span>
<span class="ACME-plain-syntax">   .seditCurrentSpriteVisibleHeight: visible height of current sprite</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">drawRectangleAroundSprite</span><button class="popup" onclick="togglePopup('usagePopup3')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup3">Usage of <span class="code-font"><span class="ACME-function-syntax">drawRectangleAroundSprite</span></span>:<br/><a href="S-s22.html#SP2">&#167;2</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a80e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP85" class="function-link"><span class="ACME-function-syntax">gcolXY</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">GCOL 0,Y where Y=0 (black) or 7</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(white)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP4" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinatesForCurrentSprite</span></a><span class="ACME-plain-syntax">      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">8</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,4                                          </span><span class="ACME-comment-syntax">PLOT 4 (MOVE)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">15</span><span class="ACME-plain-syntax">,7                                          </span><span class="ACME-comment-syntax">PLOT 4,15,7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,5                                          </span><span class="ACME-comment-syntax">PLOT 5,</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP83" class="function-link"><span class="ACME-function-syntax">seditOutputXCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">       X,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">         7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,5                                          </span><span class="ACME-comment-syntax">PLOT 5,</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP83" class="function-link"><span class="ACME-function-syntax">seditOutputXCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">       X,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP84" class="function-link"><span class="ACME-function-syntax">seditOutputYCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">         Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,5                                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">15</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">} PLOT 5,15,</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP84" class="function-link"><span class="ACME-function-syntax">seditOutputYCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">            Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">6</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,5                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">15</span><span class="ACME-plain-syntax">,7                                          </span><span class="ACME-comment-syntax">PLOT 5,15,7</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP4" class="paragraph-anchor"></a><b>&#167;4. Get screen coordinates for the visible area of the current sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Calculates the screen coordinates of the large sprite rectangular area in the editor.</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .seditCurrentSpriteVisibleWidth:  visible width of current sprite</span>
<span class="ACME-plain-syntax">   .seditCurrentSpriteVisibleHeight: visible height of current sprite</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .plotPointXLow/High: X screen coordinate</span>
<span class="ACME-plain-syntax">   .plotPointYLow/High: Y screen coordinate</span>
<span class="ACME-plain-syntax">   (Preserves current sprite position)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditGetScreenCoordinatesForCurrentSprite</span><button class="popup" onclick="togglePopup('usagePopup4')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup4">Usage of <span class="code-font"><span class="ACME-function-syntax">seditGetScreenCoordinatesForCurrentSprite</span></span>:<br/><a href="S-s22.html#SP3">&#167;3</a>, <a href="S-s22.html#SP51">&#167;51</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a849</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Remember current position in sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} currentY = sprite visible height+1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} currentX = sprite visible width+1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP14" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} Recall current position in sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP5" class="paragraph-anchor"></a><b>&#167;5. seditDrawLargeSpriteRow. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargeSpriteRow</span><button class="popup" onclick="togglePopup('usagePopup5')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup5">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargeSpriteRow</span></span>:<br/><a href="S-s22.html#SP7">&#167;7</a>, <a href="S-s22.html#SP31">&#167;31</a>, <a href="S-s22.html#SP60">&#167;60</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a86f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Set GCOL 0 mode</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGCOLMode</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Column zero</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get screen coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP14" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP12" class="function-link"><span class="ACME-function-syntax">calculateCurrentSpriteByte</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Column zero</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditLoopBytesInRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a882</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">store current byte mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">load byte from sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceI</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">store current sprite byte</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditLoopPixelsInByte</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a88f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceI</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Create byte of solid foreground colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot rectangle for the pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #4                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">PLOT 4 (MOVE)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP83" class="function-link"><span class="ACME-function-syntax">seditOutputXCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP11" class="function-link"><span class="ACME-function-syntax">seditFinishMoveAndDrawLargePixelRectangle</span></a><span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">draw rectangle around</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Increment X coordinate, based on current mode</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift to move to next pixel and update byte mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceI</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">shift byte to next pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">move mask to next pixel within byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP5" class="function-link"><span class="ACME-function-syntax">seditLoopPixelsInByte</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move to next sprite byte (decrement sprite byte address)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move to next column</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check if done all of row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP5" class="function-link"><span class="ACME-function-syntax">seditLoopBytesInRow</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP6" class="paragraph-anchor"></a><b>&#167;6. seditDrawLargeSpriteColumn. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargeSpriteColumn</span><button class="popup" onclick="togglePopup('usagePopup6')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup6">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargeSpriteColumn</span></span>:<br/><a href="S-s22.html#SP30">&#167;30</a>, <a href="S-s22.html#SP59">&#167;59</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a8e0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Set GCOL 0 mode</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGCOLMode</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Row zero</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get screen coordinates</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP14" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP12" class="function-link"><span class="ACME-function-syntax">calculateCurrentSpriteByte</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditLoopRows</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a8ee</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP61" class="function-link"><span class="ACME-function-syntax">getColourByteFromPixelOfSprite</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP10" class="function-link"><span class="ACME-function-syntax">seditDrawLargePixelRectangle</span></a><span class="ACME-plain-syntax">                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add increment to Y coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditYCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Current sprite byte -= width in bytes</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Increment visible Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">compare current visible Y with</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">visible height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP6" class="function-link"><span class="ACME-function-syntax">seditLoopRows</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">if (not done yet) the branch (loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">back)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP7" class="paragraph-anchor"></a><b>&#167;7. seditDrawLargeSprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargeSprite</span><button class="popup" onclick="togglePopup('usagePopup7')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup7">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargeSprite</span></span>:<br/><a href="S-s22.html#SP8">&#167;8</a>, <a href="S-s22.html#SP40">&#167;40</a>, <a href="S-s22.html#SP41">&#167;41</a>, <a href="S-s22.html#SP42">&#167;42</a>, <a href="S-s22.html#SP43">&#167;43</a>, <a href="S-s22.html#SP44">&#167;44</a>, <a href="S-s22.html#SP45">&#167;45</a>, <a href="S-s22.html#SP46">&#167;46</a>, <a href="S-s22.html#SP47">&#167;47</a>, <a href="S-s22.html#SP53">&#167;53</a>, <a href="S-s22.html#SP54">&#167;54</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a922</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Remember values VUW on stack</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop through all visible rows of sprite, drawing each row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">loopThroughRowsOfSprite</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a933</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP5" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteRow</span></a><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">loopThroughRowsOfSprite</span></a><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Restore values VUW from stack</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP8" class="paragraph-anchor"></a><b>&#167;8. Unplot the cursor, redraw regular and large sprites, then redraw the cursor. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span><button class="popup" onclick="togglePopup('usagePopup8')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup8">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></span>:<br/><a href="S-s22.html#SP63">&#167;63</a>, <a href="S-s22.html#SP64">&#167;64</a>, <a href="S-s22.html#SP66">&#167;66</a>, <a href="S-s22.html#SP67">&#167;67</a>, <a href="S-s22.html#SP70">&#167;70</a>, <a href="S-s22.html#SP71">&#167;71</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a94e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndCursor</span><button class="popup" onclick="togglePopup('usagePopup9')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup9">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndCursor</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a951</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP19" class="function-link"><span class="ACME-function-syntax">seditPlotRegularSizeSprite</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargeSpriteAndCursor</span><button class="popup" onclick="togglePopup('usagePopup10')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup10">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargeSpriteAndCursor</span></span>:<br/><a href="S-s22.html#SP41">&#167;41</a>, <a href="S-s22.html#SP43">&#167;43</a>, <a href="S-s22.html#SP45">&#167;45</a>, <a href="S-s22.html#SP47">&#167;47</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a954</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP9" class="paragraph-anchor"></a><b>&#167;9. Draw (or undraw) the circular cursor in the sprite editor. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">drawCircleCursor</span><button class="popup" onclick="togglePopup('usagePopup11')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup11">Usage of <span class="code-font"><span class="ACME-function-syntax">drawCircleCursor</span></span>:<br/><a href="S-s22.html#SP8">&#167;8</a>, <a href="S-s22.html#SP28">&#167;28</a>, <a href="S-s22.html#SP31">&#167;31</a>, <a href="S-s22.html#SP36">&#167;36</a>, <a href="S-s22.html#SP37">&#167;37</a>, <a href="S-s22.html#SP38">&#167;38</a>, <a href="S-s22.html#SP39">&#167;39</a>, <a href="S-s22.html#SP40">&#167;40</a>, <a href="S-s22.html#SP41">&#167;41</a>, <a href="S-s22.html#SP42">&#167;42</a>, <a href="S-s22.html#SP43">&#167;43</a>, <a href="S-s22.html#SP44">&#167;44</a>, <a href="S-s22.html#SP45">&#167;45</a>, <a href="S-s22.html#SP46">&#167;46</a>, <a href="S-s22.html#SP47">&#167;47</a>, <a href="S-s22.html#SP53">&#167;53</a>, <a href="S-s22.html#SP54">&#167;54</a>, <a href="S-s22.html#SP59">&#167;59</a>, <a href="S-s22.html#SP60">&#167;60</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a957</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #4                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">PLOT 4 (MOVE)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP14" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get X coordinate of centre of circle to draw</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">} get size of the square for</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} displaying the current pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} halve it to get the centre point</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">AY += screen X coordinate offset within the current sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">increment the high byte if needed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">AY += plotPointXLow</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Send X coordinate (low byte) for MOVE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Send X coordinate (high byte) for MOVE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get Y coordinate of centre of circle to draw</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditYCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">} get size of the square for</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} displaying the current pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} halve it to get the centre point</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Send Y coordinate (low and high) for MOVE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Draw circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">9</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">18</span><span class="ACME-plain-syntax">,3,7                                        </span><span class="ACME-comment-syntax">GCOL 3,7 (EOR, white)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,145                                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">} PLOT 145,0,7 (Circle outline)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP12" class="function-link"><span class="ACME-function-syntax">calculateCurrentSpriteByte</span></a><span class="ACME-plain-syntax">                     </span>
</pre>
<p class="commentary firstcommentary"><a id="SP10" class="paragraph-anchor"></a><b>&#167;10. seditDrawLargePixelRectangle. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawLargePixelRectangle</span><button class="popup" onclick="togglePopup('usagePopup12')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup12">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawLargePixelRectangle</span></span>:<br/><a href="S-s22.html#SP6">&#167;6</a>, <a href="S-s22.html#SP28">&#167;28</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a9a3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #4                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">PLOT 4,</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span><span class="ACME-comment-syntax">} X is the low byte of the X</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} Y is the high byte of the X</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} output X coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP11" class="paragraph-anchor"></a><b>&#167;11. seditFinishMoveAndDrawLargePixelRectangle. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditFinishMoveAndDrawLargePixelRectangle</span><button class="popup" onclick="togglePopup('usagePopup13')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup13">Usage of <span class="code-font"><span class="ACME-function-syntax">seditFinishMoveAndDrawLargePixelRectangle</span></span>:<br/><a href="S-s22.html#SP5">&#167;5</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a9be</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP84" class="function-link"><span class="ACME-function-syntax">seditOutputYCoordinate</span></a><span class="ACME-plain-syntax">                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$61</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">PLOT $61 (Rectangle, relative)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">} one X increment amount for the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditYCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} one Y increment amount for the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP12" class="paragraph-anchor"></a><b>&#167;12. Calculate address within sprite given (X, Y) pixel coordinates. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .seditCurrentVisibleX: X pixel within visible area of sprite in editor</span>
<span class="ACME-plain-syntax">   .seditCurrentVisibleY: Y pixel within visible area of sprite in editor</span>
<span class="ACME-plain-syntax">   .seditCurrentX: pixel coordinate of the left edge of visible area of sprite in editor</span>
<span class="ACME-plain-syntax">   .seditCurrentY: pixel coordinate of the bottom edge of visible area of sprite in editor</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .seditCurrentSpriteByteLow/High: address of current sprite byte</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">calculateCurrentSpriteByte</span><button class="popup" onclick="togglePopup('usagePopup14')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup14">Usage of <span class="code-font"><span class="ACME-function-syntax">calculateCurrentSpriteByte</span></span>:<br/><a href="S-s22.html#SP5">&#167;5</a>, <a href="S-s22.html#SP6">&#167;6</a>, <a href="S-s22.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $a9df</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = width</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Y value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y is cursor Y position</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We calculate the offset from the *end* of the sprite data backwards to the current byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">in the sprite</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP86" class="function-link"><span class="ACME-function-syntax">multiply8x8</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">result = X * Y</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">       = width * Y</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">       = offset from end of sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">backwards to current row of sprite</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">result += X offset within the visible region</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">add the offset within the visible</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">region</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">result += current sprite pixel X within visible area</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">left pixel coordinate of large sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">[NOTE: instead of the above two additions, calculate .seditCurrentVisibleX +</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.seditCurrentX then add to DE/DF, i.e.:</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  LDA .seditCurrentVisibleX</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  CLC</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  ADC .seditCurrentX</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  ADC .vduTempStoreDE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  STA .vduTempStoreDE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  BCC +</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  INC .vduTempStoreDF</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  +</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  ... to save eight bytes</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">AX = start address of next sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSizeInBytesLow</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">add current sprite address (low)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.spriteHeaderOffsetSizeInBytesHigh</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">add current sprite address (high)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add 5 to sprite address to account for the six byte header of the current sprite,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">minus one because we want to start from the last byte of the current sprite data, not</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the first byte of the next sprite.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #5                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.seditCurrentSpriteByteLow/High = next sprite address - result</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">(note that result = vduDE/F = the offset backwards from end of current sprite data to</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the current sprite byte)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">store current sprite byte address</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(low byte)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">store current sprite byte address</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(high byte)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP13" class="paragraph-anchor"></a><b>&#167;13. seditXCoordinatePowerOf2. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditXCoordinatePowerOf2</span><button class="popup" onclick="togglePopup('usagePopup15')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup15">Usage of <span class="code-font"><span class="ACME-function-syntax">seditXCoordinatePowerOf2</span></span>:<br/><a href="S-s22.html#SP14">&#167;14</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa26</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE  0,   1,   2,   3,   4,   5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax">   </span><span class="ACME-constant-syntax">8</span><span class="ACME-plain-syntax">,   </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">,   </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">,   </span><span class="ACME-constant-syntax">8</span><span class="ACME-plain-syntax">,   </span><span class="ACME-constant-syntax">8</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">indexed by screen MODE (0-5)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditMaximumVisibleHeight</span><button class="popup" onclick="togglePopup('usagePopup16')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup16">Usage of <span class="code-font"><span class="ACME-function-syntax">seditMaximumVisibleHeight</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a>, <a href="S-s22.html#SP50">&#167;50</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa2c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE  0,   1,   2,   3,   4,   5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$0B</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$17</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$17</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$17</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$17</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">indexed by screen MODE (0-5)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditMaximumVisibleWidth</span><button class="popup" onclick="togglePopup('usagePopup17')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup17">Usage of <span class="code-font"><span class="ACME-function-syntax">seditMaximumVisibleWidth</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a>, <a href="S-s22.html#SP52">&#167;52</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa32</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE  0,   1,   2,   3,   4,   5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$02</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$05</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$05</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$02</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$02</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">indexed by screen MODE (0-5)</span>

<span class="ACME-comment-syntax">This is how much we move in Y from one large square in the sprite editor to the next</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditYCoordinateIncrement</span><button class="popup" onclick="togglePopup('usagePopup18')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup18">Usage of <span class="code-font"><span class="ACME-function-syntax">seditYCoordinateIncrement</span></span>:<br/><a href="S-s22.html#SP6">&#167;6</a>, <a href="S-s22.html#SP9">&#167;9</a>, <a href="S-s22.html#SP11">&#167;11</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa38</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE  0,   1,   2,   3,   4,   5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$3F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$1F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$1F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">indexed by screen MODE (0-5)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">Overlaps 2 bytes into the next table</span>

<span class="ACME-comment-syntax">This is how much we move in X (minus one) from one large square in the sprite editor to the</span>
<span class="ACME-comment-syntax">next</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditXCoordinateIncrement</span><button class="popup" onclick="togglePopup('usagePopup19')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup19">Usage of <span class="code-font"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></span>:<br/><a href="S-s22.html#SP5">&#167;5</a>, <a href="S-s22.html#SP9">&#167;9</a>, <a href="S-s22.html#SP11">&#167;11</a>, <a href="S-s22.html#SP30">&#167;30</a>, <a href="S-s22.html#SP36">&#167;36</a>, <a href="S-s22.html#SP37">&#167;37</a><br/>Chapter 3: Memory locations - <a href="S-s3.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa3c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE  0,   1,   2,   3,   4,   5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$1F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$1F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$3F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$1F</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$3F</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">indexed by screen MODE (0-5)</span>

<span class="ACME-comment-syntax">This is the initial OS coordinate offset in X for the first large square in any byte</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditXCoordinateOffsetForRightmostPixelInByte</span><button class="popup" onclick="togglePopup('usagePopup20')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup20">Usage of <span class="code-font"><span class="ACME-function-syntax">seditXCoordinateOffsetForRightmostPixelInByte</span></span>:<br/><a href="S-s22.html#SP36">&#167;36</a>, <a href="S-s22.html#SP43">&#167;43</a>, <a href="S-s22.html#SP54">&#167;54</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa42</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE  0,   1,   2,   3,   4,   5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$E0</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$60</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$40</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$E0</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$C0</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">indexed by screen MODE (0-5)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP14" class="paragraph-anchor"></a><b>&#167;14. Get screen coordinates from sprite coordinates (.seditCurrentX, .seditCurrentY). </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">     .plotPointXLow/High = (.seditCurrentX * 256) + 16    for MODE 0,4,5 OR</span>
<span class="ACME-plain-syntax">                         = (.seditCurrentX * 128) + 16    for MODE 1,2</span>

<span class="ACME-plain-syntax">     .plotPointYLow/High = (.seditCurrentY * 64) + 8      for MODE 0 OR</span>
<span class="ACME-plain-syntax">                         = (.seditCurrentY * 32) + 8      for MODE 1,2,4,5</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditGetScreenCoordinates</span><button class="popup" onclick="togglePopup('usagePopup21')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup21">Usage of <span class="code-font"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></span>:<br/><a href="S-s22.html#SP4">&#167;4</a>, <a href="S-s22.html#SP5">&#167;5</a>, <a href="S-s22.html#SP6">&#167;6</a>, <a href="S-s22.html#SP9">&#167;9</a>, <a href="S-s22.html#SP32">&#167;32</a>, <a href="S-s22.html#SP34">&#167;34</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa48</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">high bytes start at zero</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop to multiply by a power of two</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinatePowerOf2</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">coordinate low byte</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">double low byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">double high byte (with carry)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">loop back</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add 16</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #16                                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">} if (MODE 0) then X = 6 else X = 5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #6                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Loop to multiply Y coordinate (A, .plotPointY) by a power of two</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e. Y coordinate &lt;&lt; X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">X is the loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} Multiply A (from</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .seditCurrentVisibleY)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} and .plotPointYHigh by 32</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} (non-mode 0)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">} or 64 (mode 0)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add 8 to Y coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #8                                              </span><span class="ACME-comment-syntax">} add 8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">} and store in plotPointYLow/High</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">[NOTE: Could be this for a 3 byte saving</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  BCC +</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  INC .plotPointYHigh</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  +</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  RTS</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">]</span>
</pre>
<p class="commentary firstcommentary"><a id="SP15" class="paragraph-anchor"></a><b>&#167;15. seditMoveToNextSpriteToDelete. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditMoveToNextSpriteToDelete</span><button class="popup" onclick="togglePopup('usagePopup22')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup22">Usage of <span class="code-font"><span class="ACME-function-syntax">seditMoveToNextSpriteToDelete</span></span>:<br/><a href="S-s22.html#SP16">&#167;16</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa8f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">move past the COMMA</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} remcall user input</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} address into XY</span>
<span class="ACME-plain-syntax">      </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP16" class="paragraph-anchor"></a><b>&#167;16. *SDELETE. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">starSDelete</span><button class="popup" onclick="togglePopup('usagePopup23')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup23">Usage of <span class="code-font"><span class="ACME-function-syntax">starSDelete</span></span>:<br/>Chapter 5: Parsing star commands - <a href="S-s5.html#SP7">&#167;7</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aa96</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP80" class="function-link"><span class="ACME-function-syntax">read8BitNumberIntoA</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} push address to rest of string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP17" class="function-link"><span class="ACME-function-syntax">deleteSpriteInternal</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall address of rest of string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP79" class="function-link"><span class="ACME-function-syntax">skipLeadingSpaces</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">','</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP15" class="function-link"><span class="ACME-function-syntax">seditMoveToNextSpriteToDelete</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">if (comma found) then branch (move</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to next sprite to delete)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP17" class="paragraph-anchor"></a><b>&#167;17. Delete a sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   A: sprite number</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">deleteSpriteInternal</span><button class="popup" onclick="togglePopup('usagePopup24')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup24">Usage of <span class="code-font"><span class="ACME-function-syntax">deleteSpriteInternal</span></span>:<br/><a href="S-s22.html#SP16">&#167;16</a>, <a href="S-s22.html#SP18">&#167;18</a>, <a href="S-s22.html#SP21">&#167;21</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP4">&#167;4</a>, <a href="S-s21.html#SP17">&#167;17</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aab6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP76" class="function-link"><span class="ACME-function-syntax">findSpriteA</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">get sprite address</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">[NOTE: redundant]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP17" class="function-link"><span class="ACME-function-syntax">return7</span></a><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">if sprite not found, branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s10.html#SP7" class="function-link"><span class="ACME-function-syntax">resetCurrentSpriteAddress</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">reset address</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Reduce number of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetNumberOfSprites</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">} get number of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">reduce by one</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">store number of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP17" class="function-link"><span class="ACME-function-syntax">return7</span></a><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">if (no sprites left) then return</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP77" class="function-link"><span class="ACME-function-syntax">moveToNextSprite</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">tempStoreDC/DD moves on to next</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">sprite</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy all remaining sprites down to fill the gap</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get size of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSizeInBytesLow</span></a><span class="ACME-plain-syntax">              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #6                                              </span><span class="ACME-comment-syntax">} 6 is size of sprite header</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} tempStoreDE/F = byte size of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} sprite data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Y =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .spriteHeaderOffsetSizeInBytesHigh</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s13.html#SP1" class="function-link"><span class="ACME-function-syntax">blockCopyMemoryIncrementing</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">copy sprite data down in memory to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">fill gap</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return7</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aae9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP18" class="paragraph-anchor"></a><b>&#167;18. Add sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Used in *SGET and *SMERGE</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .vduTempStoreDC/DD: address of sprite data to add</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">addSprite</span><button class="popup" onclick="togglePopup('usagePopup25')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup25">Usage of <span class="code-font"><span class="ACME-function-syntax">addSprite</span></span>:<br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP4">&#167;4</a>, <a href="S-s21.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aaea</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} remember sprite address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Delete existing sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSpriteNumber</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">} get sprite number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP17" class="function-link"><span class="ACME-function-syntax">deleteSpriteInternal</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall sprite address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get size of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSizeInBytesLow</span></a><span class="ACME-plain-syntax">              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #6                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} DE/DF = size in bytes of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s13.html#SP1" class="function-link"><span class="ACME-function-syntax">blockCopyMemoryIncrementing</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">copy sprite data</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetNumberOfSprites</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">} increment number of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP19" class="paragraph-anchor"></a><b>&#167;19. Redraw regular sized sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Used as part of reduce vertically and reduce horizontally</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditClearAndReplotRegularSizeSprite</span><button class="popup" onclick="togglePopup('usagePopup26')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup26">Usage of <span class="code-font"><span class="ACME-function-syntax">seditClearAndReplotRegularSizeSprite</span></span>:<br/><a href="S-s22.html#SP53">&#167;53</a>, <a href="S-s22.html#SP54">&#167;54</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ab1d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">12</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,4                                          </span><span class="ACME-comment-syntax">} MOVE 920,200</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">920</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">200</span><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,</span><span class="ACME-constant-syntax">$67</span><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">rectangle fill in background colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1220</span><span class="ACME-plain-syntax">,800                                      </span><span class="ACME-comment-syntax">920,200 -&gt; 1220,800</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditPlotRegularSizeSprite</span><button class="popup" onclick="togglePopup('usagePopup27')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup27">Usage of <span class="code-font"><span class="ACME-function-syntax">seditPlotRegularSizeSprite</span></span>:<br/><a href="S-s22.html#SP8">&#167;8</a>, <a href="S-s22.html#SP28">&#167;28</a>, <a href="S-s22.html#SP59">&#167;59</a>, <a href="S-s22.html#SP60">&#167;60</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ab2d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetCurrentSpriteAddressLow</span></a><span class="ACME-plain-syntax">        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Plot sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">19</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">24</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">set graphics window</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">936</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">200</span><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">left, bottom</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1200</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">800</span><span class="ACME-plain-syntax">                                     </span><span class="ACME-comment-syntax">right, top</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">18</span><span class="ACME-plain-syntax">,0,7                                        </span><span class="ACME-comment-syntax">white graphics foreground colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">$ed</span><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">plot sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">936</span><span class="ACME-plain-syntax">, </span><span class="ACME-constant-syntax">200</span><span class="ACME-plain-syntax">                                      </span><span class="ACME-comment-syntax">at x, y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">26</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">clear text and graphics windows</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP20" class="paragraph-anchor"></a><b>&#167;20. Sprite data for new sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> A (1 byte x 1 pixel) MODE 2 sprite with one byte of logical colour zero.</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">newSpriteData</span><button class="popup" onclick="togglePopup('usagePopup28')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup28">Usage of <span class="code-font"><span class="ACME-function-syntax">newSpriteData</span></span>:<br/><a href="S-s22.html#SP21">&#167;21</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ab53</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Six byte sprite header</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$00</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$00</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">height-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$01</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">} size in bytes</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$00</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$02</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">MODE number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$00</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">sprite number</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">One byte of sprite data for a new sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$00</span><span class="ACME-plain-syntax">                                           </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notEnoughRoomError2</span><button class="popup" onclick="togglePopup('usagePopup29')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup29">Usage of <span class="code-font"><span class="ACME-function-syntax">notEnoughRoomError2</span></span>:<br/><a href="S-s22.html#SP21">&#167;21</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ab5a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s21.html#SP12" class="function-link"><span class="ACME-function-syntax">notEnoughRoomError</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">[NOTE: redundant, caller should just</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">JMP .notEnoughRoomError]</span>
</pre>
<p class="commentary firstcommentary"><a id="SP21" class="paragraph-anchor"></a><b>&#167;21. *SEDIT n[,m]. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Edit sprite n, save as sprite m</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   XY: address of the rest of the command line</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">starSEdit</span><button class="popup" onclick="togglePopup('usagePopup30')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup30">Usage of <span class="code-font"><span class="ACME-function-syntax">starSEdit</span></span>:<br/>Chapter 5: Parsing star commands - <a href="S-s5.html#SP7">&#167;7</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ab5d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP80" class="function-link"><span class="ACME-function-syntax">read8BitNumberIntoA</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">read sprite number to edit</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceB</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">'edit' sprite number (n)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceC</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">'save' sprite number (m)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP79" class="function-link"><span class="ACME-function-syntax">skipLeadingSpaces</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">','</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP21" class="function-link"><span class="ACME-function-syntax">skipSecondNumber</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">if no comma, skip ahead</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">move past the COMMA</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} read the second number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP80" class="function-link"><span class="ACME-function-syntax">read8BitNumberIntoA</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceC</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">second number, the 'save' sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">number (m)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipSecondNumber</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ab82</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceC</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">'save' sprite number (m)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceB</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">'edit' sprite number (n)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP17" class="function-link"><span class="ACME-function-syntax">deleteSpriteInternal</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">delete 'save' sprite, ready to be</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">overwritten</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP78" class="function-link"><span class="ACME-function-syntax">getFreeSpace</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">DC/DD = end of used sprite memory</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">address</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.vduTempStoreDA/B = .vduTempStoreDC/D (remember end of used sprite memory address)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check we can find the sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceB</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">sprite number to find</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP76" class="function-link"><span class="ACME-function-syntax">findSpriteA</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">get address of sprite (into</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.vduTempStoreDC/DD)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP21" class="function-link"><span class="ACME-function-syntax">couldNotFindSpriteToEdit</span></a><span class="ACME-plain-syntax">                       </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceB</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">'edit' sprite number (n)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceC</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">'save' sprite number (m)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP21" class="function-link"><span class="ACME-function-syntax">editSpriteDifferentFromSaveSprite</span></a><span class="ACME-plain-syntax">              </span><span class="ACME-comment-syntax">if (different) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Store sprite *index*</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceD</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetNumberOfSprites</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">} number of sprites -= sprite index</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceD</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">} i.e. number of sprites starting at</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} the one being edited</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.vduTempStoreDE/DF = .vduTempStoreDA/DB - .vduTempStoreDC/DD</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">                   = end of used sprite memory address - address of current sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">                   = amount of memory from the end of the current sprite to end of all</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">sprite data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Edit sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">seditInternal</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">couldNotFindSpriteToEdit</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $abc8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #&lt;.</span><a href="S-s22.html#SP20" class="function-link"><span class="ACME-function-syntax">newSpriteData</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #&gt;.</span><a href="S-s22.html#SP20" class="function-link"><span class="ACME-function-syntax">newSpriteData</span></a><span class="ACME-plain-syntax">                                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">editSpriteDifferentFromSaveSprite</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $abd0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get size of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSizeInBytesLow</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #6                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Compare sizes of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP21" class="function-link"><span class="ACME-function-syntax">enoughRoom</span></a><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP20" class="function-link"><span class="ACME-function-syntax">notEnoughRoomError2</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">enoughRoom</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $abf1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceD</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP22" class="paragraph-anchor"></a><b>&#167;22. Main sprite editor routine. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Called once the parsing of the *SEDIT command is done and verification passes</span>

<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   .vduWorkspaceC: sprite number</span>
<span class="ACME-plain-syntax">   .vduWorkspaceD: sprite index</span>
<span class="ACME-plain-syntax">   .vduTempStoreDC/DD: address of current sprite</span>
<span class="ACME-plain-syntax">   .vduTempStoreDE/DF: length of sprite data</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditInternal</span><button class="popup" onclick="togglePopup('usagePopup31')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup31">Usage of <span class="code-font"><span class="ACME-function-syntax">seditInternal</span></span>:<br/><a href="S-s22.html#SP21">&#167;21</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $abf6</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">We copy the existing sprites to the end of sprite memory, leaving the maximum amount</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">for the sprite we are about to edit.</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Find how far we can copy the sprite data in memory...</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.vduTempStoreDA/DB = currentSpriteDefinitionLow/High = end of allocated sprite memory -</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">length of sprite data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetSpriteEndPage</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy sprite data to the end of allocated sprite memory, so give the maximum amount</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">of memory for editing the current sprite.</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s13.html#SP2" class="function-link"><span class="ACME-function-syntax">blockCopyMemoryDecrementing</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">copy .vduTempStoreDE/DF bytes from</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">tempStoreDC/DD to tempStoreDA/DB</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Store the sprite number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceC</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">sprite number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSpriteNumber</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">store</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP49" class="function-link"><span class="ACME-function-syntax">rememberCurrentSpriteInWorkspace</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Store MODE in which the sprite was defined</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetModeNumber</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetOptions</span></a><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$FE</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">clear bit 0 of options (pen up)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Set sprite cursor position to bottom left of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Set white pen</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #7                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Find the sprite width that is visible on-screen while editing (depends on the current</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE).</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditMaximumVisibleWidth</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditMaximumVisibleWidth</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Find the sprite height that is visible on-screen while editing (depends on the current</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">MODE).</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">sprite height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditMaximumVisibleHeight</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditMaximumVisibleHeight</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">15</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">VDU 4 (write text at the text cursor)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">26</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">VDU 26 (reset text and graphics</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">windows)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">17</span><span class="ACME-plain-syntax">,128                                        </span><span class="ACME-comment-syntax">VDU 17,128 (select black as</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">background colour)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">12</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">VDU 12 (clear screen)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">23</span><span class="ACME-plain-syntax">,1,0,0,0,0,0,0,0,0                          </span><span class="ACME-comment-syntax">VDU 23,1,0,0,0,0,0,0,0,0 (turn off</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">cursor)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #4                                              </span><span class="ACME-comment-syntax">} *FX 4,2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">} disable cursor editing (edit keys</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} act as soft keys)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$E1</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$90</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">} *FX 225,$90,0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} expand function keys as $90 upwards</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$E2</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">} *FX 226,$80,0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} expand SHIFT+function keys as $80</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} upwards</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$E3</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$A0</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">} *FX 227,$A0,0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">} expand CTRL+function keys as $A0</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} upwards</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP87" class="function-link"><span class="ACME-function-syntax">seditPrintModeMessage</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">print "Mode "</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP2" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSpriteInWhite</span></a><span class="ACME-plain-syntax">               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndCursor</span></a><span class="ACME-plain-syntax">        </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">editingLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aca2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP87" class="function-link"><span class="ACME-function-syntax">seditPrintModeMessage</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">update current status</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$0F</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Flush keyboard buffer</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSRDCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">wait for key press</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP23" class="function-link"><span class="ACME-function-syntax">exitEditing</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">carry set on ESCAPE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$0D</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not RETURN key) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Handle RETURN key</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP28" class="function-link"><span class="ACME-function-syntax">seditSetSquareColourA</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Check for DELETE key</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$7F</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not DELETE key) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Handle DELETE key</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP26" class="function-link"><span class="ACME-function-syntax">seditDeleteSquare</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'0'</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (A &lt; '0') then branch (loop back)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'9'</span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editHandleDigit</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (A &lt;= '9') then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'A'</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (A &lt; 'A') then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'F'</span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editHandleHexDigit</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (A &lt;= 'F') then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'a'</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (A &lt; 'a') then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'f'</span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">1                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editContinueKeyChecks</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">if (A &gt;= 'f'+1) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$1F</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">convert a-f to A-F (upper case)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">editHandleHexDigit</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $acde</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #7                                              </span><span class="ACME-comment-syntax">adjust value of hex digit A-F</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">editHandleDigit</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ace1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'0'</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">convert hex digit to value 0-15</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">set background colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">editContinueKeyChecks</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $acea</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (A &lt; $80) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$B0</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (A &gt;= $B0) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Handle function key press</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP24" class="function-link"><span class="ACME-function-syntax">seditCallEditingFunction</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP22" class="function-link"><span class="ACME-function-syntax">editingLoop</span></a><span class="ACME-plain-syntax">                                    </span>
</pre>
<p class="commentary firstcommentary"><a id="SP23" class="paragraph-anchor"></a><b>&#167;23. Exit the sprite editor. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">exitEditing</span><button class="popup" onclick="togglePopup('usagePopup32')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup32">Usage of <span class="code-font"><span class="ACME-function-syntax">exitEditing</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $acfa</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSpriteNumber</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember workspace[sprite number]</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP48" class="function-link"><span class="ACME-function-syntax">deselectCurrentSprite</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceD</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">number of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s21.html#SP9" class="function-link"><span class="ACME-function-syntax">addSpriteLoop</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall sprite number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s21.html#SP16" class="function-link"><span class="ACME-function-syntax">starSChooseInternal</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$7C</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">*FX 124 (Reset ESCAPE flag)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$E1</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">*FX 225,1,0 (Function keys)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$E2</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">*FX 226,128,0 (SHIFT function keys)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$E3</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$90</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">*FX 227,144,0 (CTRL function keys)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #4                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">VDU 4</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #4                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">*FX 4,0,0 (cursor key editing)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP24" class="paragraph-anchor"></a><b>&#167;24. Call the specific editing function. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X is offset within table of function address</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCallEditingFunction</span><button class="popup" onclick="togglePopup('usagePopup33')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup33">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCallEditingFunction</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ad42</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">lookup routine address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP25" class="function-link"><span class="ACME-function-syntax">seditRoutineTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP25" class="function-link"><span class="ACME-function-syntax">seditRoutineTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">jump to routine</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">)                               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP25" class="paragraph-anchor"></a><b>&#167;25. Sprite editor commands (function keys, COPY key, and cursor keys). </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditRoutineTable</span><button class="popup" onclick="togglePopup('usagePopup34')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup34">Usage of <span class="code-font"><span class="ACME-function-syntax">seditRoutineTable</span></span>:<br/><a href="S-s22.html#SP24">&#167;24</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ad4f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">128 = SHIFT + f0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">129 = SHIFT + f1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">130 = SHIFT + f2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">seditReduceVertically</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">131 = SHIFT + f3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditReduceHorizontally</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">132 = SHIFT + f4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP64" class="function-link"><span class="ACME-function-syntax">seditDeleteRow</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">133 = SHIFT + f5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP67" class="function-link"><span class="ACME-function-syntax">seditDeleteColumn</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">134 = SHIFT + f6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">135 = SHIFT + f7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">136 = SHIFT + f8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">137 = SHIFT + f9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">138 =</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">139 = SHIFT + COPY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">seditShiftCursorLeft</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">140 = SHIFT + cursor LEFT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP43" class="function-link"><span class="ACME-function-syntax">seditShiftCursorRight</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">141 = SHIFT + cursor RIGHT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP45" class="function-link"><span class="ACME-function-syntax">seditShiftCursorDown</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">142 = SHIFT + cursor DOWN</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP47" class="function-link"><span class="ACME-function-syntax">seditShiftCursorUp</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">143 = SHIFT + cursor UP</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP58" class="function-link"><span class="ACME-function-syntax">seditPenUpDown</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">144 = f0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">seditFloodRow</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">145 = f1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP59" class="function-link"><span class="ACME-function-syntax">seditFloodColumn</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">146 = f2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP50" class="function-link"><span class="ACME-function-syntax">seditExtendVertically</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">147 = f3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP52" class="function-link"><span class="ACME-function-syntax">seditExtendHorizontally</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">148 = f4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP63" class="function-link"><span class="ACME-function-syntax">seditInsertRow</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">149 = f5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP66" class="function-link"><span class="ACME-function-syntax">seditInsertColumn</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">150 = f6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP70" class="function-link"><span class="ACME-function-syntax">seditMirrorVertically</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">151 = f7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP71" class="function-link"><span class="ACME-function-syntax">seditMirrorHorizontally</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">152 = f8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">153 = f9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">154 =</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP27" class="function-link"><span class="ACME-function-syntax">seditCopy</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">155 = COPY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP36" class="function-link"><span class="ACME-function-syntax">seditCursorLeft</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">156 = cursor LEFT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP37" class="function-link"><span class="ACME-function-syntax">seditCursorRight</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">157 = cursor RIGHT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP38" class="function-link"><span class="ACME-function-syntax">seditCursorDown</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">158 = cursor DOWN</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP39" class="function-link"><span class="ACME-function-syntax">seditCursorUp</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">159 = cursor UP</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">160 = CTRL + f0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">161 = CTRL + f1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">162 = CTRL + f2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">163 = CTRL + f3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">164 = CTRL + f4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">165 = CTRL + f5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">166 = CTRL + f6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">167 = CTRL + f7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">168 = CTRL + f8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">169 = CTRL + f9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">170 =</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">return</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">171 = CTRL + COPY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP40" class="function-link"><span class="ACME-function-syntax">seditCtrlCursorLeft</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">172 = CTRL + cursor LEFT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP42" class="function-link"><span class="ACME-function-syntax">seditCtrlCursorRight</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">173 = CTRL + cursor RIGHT</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP44" class="function-link"><span class="ACME-function-syntax">seditCtrlCursorDown</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">174 = CTRL + cursor DOWN</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP46" class="function-link"><span class="ACME-function-syntax">seditCtrlCursorUp</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">175 = CTRL + cursor UP</span>
</pre>
<p class="commentary firstcommentary"><a id="SP26" class="paragraph-anchor"></a><b>&#167;26. Delete a square shown in the large sprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDeleteSquare</span><button class="popup" onclick="togglePopup('usagePopup35')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup35">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDeleteSquare</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adaf</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push old background colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">background colour black</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP27" class="function-link"><span class="ACME-function-syntax">seditCopyInternal</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">ALWAYS branch</span>
</pre>
<p class="commentary firstcommentary"><a id="SP27" class="paragraph-anchor"></a><b>&#167;27. Copy key: set pixel to white. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCopy</span><button class="popup" onclick="togglePopup('usagePopup36')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup36">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCopy</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adb7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push old background colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #7                                              </span><span class="ACME-comment-syntax">background colour white</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCopyInternal</span><button class="popup" onclick="togglePopup('usagePopup37')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup37">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCopyInternal</span></span>:<br/><a href="S-s22.html#SP26">&#167;26</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adbd</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP28" class="function-link"><span class="ACME-function-syntax">seditSetSquareColourA</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return6</span><button class="popup" onclick="togglePopup('usagePopup38')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup38">Usage of <span class="code-font"><span class="ACME-function-syntax">return6</span></span>:<br/><a href="S-s22.html#SP28">&#167;28</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adc7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP28" class="paragraph-anchor"></a><b>&#167;28. Check for pen down then set pixel. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditSetPixelIfPenDown</span><button class="popup" onclick="togglePopup('usagePopup39')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup39">Usage of <span class="code-font"><span class="ACME-function-syntax">seditSetPixelIfPenDown</span></span>:<br/><a href="S-s22.html#SP36">&#167;36</a>, <a href="S-s22.html#SP37">&#167;37</a>, <a href="S-s22.html#SP38">&#167;38</a>, <a href="S-s22.html#SP39">&#167;39</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adc8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetOptions</span></a><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP27" class="function-link"><span class="ACME-function-syntax">return6</span></a><span class="ACME-plain-syntax">                                        </span><span class="ACME-comment-syntax">if pen up, return</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditSetSquareColourA</span><button class="popup" onclick="togglePopup('usagePopup40')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup40">Usage of <span class="code-font"><span class="ACME-function-syntax">seditSetSquareColourA</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a>, <a href="S-s22.html#SP27">&#167;27</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adcf</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">writeSpritePixel</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP10" class="function-link"><span class="ACME-function-syntax">seditDrawLargePixelRectangle</span></a><span class="ACME-plain-syntax">                   </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP19" class="function-link"><span class="ACME-function-syntax">seditPlotRegularSizeSprite</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP29" class="paragraph-anchor"></a><b>&#167;29. Write pixel into sprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">writeSpritePixel</span><button class="popup" onclick="togglePopup('usagePopup41')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup41">Usage of <span class="code-font"><span class="ACME-function-syntax">writeSpritePixel</span></span>:<br/><a href="S-s22.html#SP28">&#167;28</a>, <a href="S-s22.html#SP59">&#167;59</a>, <a href="S-s22.html#SP60">&#167;60</a>, <a href="S-s22.html#SP62">&#167;62</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adde</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP85" class="function-link"><span class="ACME-function-syntax">gcolXY</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">set background colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduForegroundGraphicsColour</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">foreground colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">apply mask for current pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store pixel colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Update pixel in sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">clear bits from byte mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">set bits for pixel colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return</span><button class="popup" onclick="togglePopup('usagePopup42')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup42">Usage of <span class="code-font"><span class="ACME-function-syntax">return</span></span>:<br/><a href="S-s22.html#SP17">&#167;17</a>, <a href="S-s22.html#SP25">&#167;25</a>, <a href="S-s22.html#SP28">&#167;28</a>, <a href="S-s22.html#SP36">&#167;36</a>, <a href="S-s22.html#SP50">&#167;50</a>, <a href="S-s22.html#SP54">&#167;54</a>, <a href="S-s22.html#SP62">&#167;62</a>, <a href="S-s22.html#SP63">&#167;63</a>, <a href="S-s22.html#SP64">&#167;64</a>, <a href="S-s22.html#SP65">&#167;65</a><br/>Chapter 5: Parsing star commands - <a href="S-s5.html#SP3">&#167;3</a>, <a href="S-s5.html#SP4">&#167;4</a><br/>Chapter 6: Parsing OSBYTE (*FX) commands - <a href="S-s6.html#SP5">&#167;5</a><br/>Chapter 7: Parsing *HELP Commands - <a href="S-s7.html#SP5">&#167;5</a><br/>Chapter 10: Star commands affecting memory - <a href="S-s10.html#SP4">&#167;4</a>, <a href="S-s10.html#SP5">&#167;5</a>, <a href="S-s10.html#SP8">&#167;8</a><br/>Chapter 11: Shared PLOT subroutines and tables - <a href="S-s11.html#SP6">&#167;6</a>, <a href="S-s11.html#SP7">&#167;7</a><br/>Chapter 15: Parallelogram and Triangle - <a href="S-s15.html#SP11">&#167;11</a>, <a href="S-s15.html#SP12">&#167;12</a><br/>Chapter 16: Circle - <a href="S-s16.html#SP6">&#167;6</a>, <a href="S-s16.html#SP14">&#167;14</a>, <a href="S-s16.html#SP15">&#167;15</a>, <a href="S-s16.html#SP17">&#167;17</a>, <a href="S-s16.html#SP20">&#167;20</a>, <a href="S-s16.html#SP21">&#167;21</a>, <a href="S-s16.html#SP23">&#167;23</a>, <a href="S-s16.html#SP24">&#167;24</a>, <a href="S-s16.html#SP26">&#167;26</a><br/>Chapter 17: Lines - <a href="S-s17.html#SP9">&#167;9</a>, <a href="S-s17.html#SP12">&#167;12</a><br/>Chapter 18: Flood fill and horizontal fill - <a href="S-s18.html#SP4">&#167;4</a>, <a href="S-s18.html#SP8">&#167;8</a>, <a href="S-s18.html#SP11">&#167;11</a>, <a href="S-s18.html#SP12">&#167;12</a><br/>Chapter 19: Rectangle copy and move - <a href="S-s19.html#SP5">&#167;5</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP13">&#167;13</a><br/>Chapter 23: Ellipse - <a href="S-s23.html#SP5">&#167;5</a><br/>Chapter 24: Maths routines - <a href="S-s24.html#SP2">&#167;2</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adfc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP30" class="paragraph-anchor"></a><b>&#167;30. Copy visible area rectangle left or right. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: 0=move left</span>
<span class="ACME-plain-syntax">      1=move right</span>
<span class="ACME-plain-syntax">   Y: X coordinate to move from</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveVisibleAreaLeftOrRight</span><button class="popup" onclick="togglePopup('usagePopup43')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup43">Usage of <span class="code-font"><span class="ACME-function-syntax">moveVisibleAreaLeftOrRight</span></span>:<br/><a href="S-s22.html#SP36">&#167;36</a>, <a href="S-s22.html#SP37">&#167;37</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $adfd</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} remember current position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP33" class="function-link"><span class="ACME-function-syntax">moveXY</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">source rectangle one corner</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} X=original Y value (0=move left or</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} 1=move right)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = sprite height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP32" class="function-link"><span class="ACME-function-syntax">moveXMinus1YMinus1</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">source rectangle other corner</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} A=original X value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X ^= 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">destination point (X,Y)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP35" class="function-link"><span class="ACME-function-syntax">seditCopyRectangleAbsolute</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} X=original X value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP6" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteColumn</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP31" class="function-link"><span class="ACME-function-syntax">restoreUVWAndDrawCursor</span></a><span class="ACME-plain-syntax">                        </span>
</pre>
<p class="commentary firstcommentary"><a id="SP31" class="paragraph-anchor"></a><b>&#167;31. Copy visible area rectangle up or down. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: 0=move down</span>
<span class="ACME-plain-syntax">      1=move up</span>
<span class="ACME-plain-syntax">   Y: Y coordinate to move down from</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveVisibleAreaUpOrDown</span><button class="popup" onclick="togglePopup('usagePopup44')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup44">Usage of <span class="code-font"><span class="ACME-function-syntax">moveVisibleAreaUpOrDown</span></span>:<br/><a href="S-s22.html#SP38">&#167;38</a>, <a href="S-s22.html#SP39">&#167;39</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ae5a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} remember current position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP32" class="function-link"><span class="ACME-function-syntax">moveXMinus1YMinus1</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">source rectangle (top right)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = original X (0=move down or</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">1=move up)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP33" class="function-link"><span class="ACME-function-syntax">moveXY</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">source rectangle (bottom left)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall X (0=move down or 1=move up)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = X^1 (reversed: 1=move down or</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">0=move up)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">destination point (X,Y)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP35" class="function-link"><span class="ACME-function-syntax">seditCopyRectangleAbsolute</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall X (0=move down or 1=move up)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if move down, then cursor Y = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">              else cursor Y =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">visible height</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP5" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteRow</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">draw last row that was left behind</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">by the move</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">restoreUVWAndDrawCursor</span><button class="popup" onclick="togglePopup('usagePopup45')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup45">Usage of <span class="code-font"><span class="ACME-function-syntax">restoreUVWAndDrawCursor</span></span>:<br/><a href="S-s22.html#SP30">&#167;30</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ae8e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall current position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP32" class="paragraph-anchor"></a><b>&#167;32. moveXMinus1YMinus1. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveXMinus1YMinus1</span><button class="popup" onclick="togglePopup('usagePopup46')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup46">Usage of <span class="code-font"><span class="ACME-function-syntax">moveXMinus1YMinus1</span></span>:<br/><a href="S-s22.html#SP30">&#167;30</a>, <a href="S-s22.html#SP31">&#167;31</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $ae9d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #4                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">MOVE (X-1,Y-1)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP14" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Decrement plotPointX</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Decrement plotPointY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP34" class="function-link"><span class="ACME-function-syntax">outputXYCoordinates</span></a><span class="ACME-plain-syntax">                            </span>
</pre>
<p class="commentary firstcommentary"><a id="SP33" class="paragraph-anchor"></a><b>&#167;33. MOVE vdu[X],vdu[Y]. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveXY</span><button class="popup" onclick="togglePopup('usagePopup47')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup47">Usage of <span class="code-font"><span class="ACME-function-syntax">moveXY</span></span>:<br/><a href="S-s22.html#SP30">&#167;30</a>, <a href="S-s22.html#SP31">&#167;31</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aec4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #4                                              </span><span class="ACME-comment-syntax">MOVE plot type</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP34" class="paragraph-anchor"></a><b>&#167;34. PLOT X,vdu[.seditCurrentVisibleX],vdu[Y]. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotXY</span><button class="popup" onclick="togglePopup('usagePopup48')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup48">Usage of <span class="code-font"><span class="ACME-function-syntax">plotXY</span></span>:<br/><a href="S-s22.html#SP35">&#167;35</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aec9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP14" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinates</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">outputXYCoordinates</span><button class="popup" onclick="togglePopup('usagePopup49')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup49">Usage of <span class="code-font"><span class="ACME-function-syntax">outputXYCoordinates</span></span>:<br/><a href="S-s22.html#SP32">&#167;32</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aed2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP83" class="function-link"><span class="ACME-function-syntax">seditOutputXCoordinate</span></a><span class="ACME-plain-syntax">                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP84" class="function-link"><span class="ACME-function-syntax">seditOutputYCoordinate</span></a><span class="ACME-plain-syntax">                         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP35" class="paragraph-anchor"></a><b>&#167;35. Copy a rectangle in the large sprite area. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X,Y: new visible cursor position</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCopyRectangleAbsolute</span><button class="popup" onclick="togglePopup('usagePopup50')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup50">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCopyRectangleAbsolute</span></span>:<br/><a href="S-s22.html#SP30">&#167;30</a>, <a href="S-s22.html#SP31">&#167;31</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aed8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Remember current sprite editor position on the stack (6 bytes)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$BE</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">copy rectangle absolute</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP34" class="function-link"><span class="ACME-function-syntax">plotXY</span></a><span class="ACME-plain-syntax">                                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Recall current sprite editor position from the stack (6 bytes)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP36" class="paragraph-anchor"></a><b>&#167;36. Move sprite cursor left. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCursorLeft</span><button class="popup" onclick="togglePopup('usagePopup51')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup51">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCursorLeft</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aef6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP28" class="function-link"><span class="ACME-function-syntax">seditSetPixelIfPenDown</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if pen down, then draw a pixel in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the current foreground colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">get pixel mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift mask for next pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP36" class="function-link"><span class="ACME-function-syntax">needToMoveToNewByteLeft</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">if (need to move to new byte) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Moving within the current byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move X coordinate of cursor graphic one square left</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">subtract</span>
<span class="ACME-plain-syntax">                                                        </span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.seditXCoordinateIncrement[currentMODE]</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">needToMoveToNewByteLeft</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $af15</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP36" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaLeft</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">if (cursor is on left edge of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">visible area) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move cursor within existing visible area</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">move visible cursor left</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">} store the rightmost mask value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateOffsetForRightmostPixelInByte</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">set initial X offset for circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveVisibleAreaLeft</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $af32</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not already on left edge of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">sprite) branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Already on left edge of sprite, so return</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">} store rightmost mask value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateOffsetForRightmostPixelInByte</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">set initial X offset for circle</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP30" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaLeftOrRight</span></a><span class="ACME-plain-syntax">                     </span>
</pre>
<p class="commentary firstcommentary"><a id="SP37" class="paragraph-anchor"></a><b>&#167;37. Move sprite cursor right. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCursorRight</span><button class="popup" onclick="togglePopup('usagePopup52')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup52">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCursorRight</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $af55</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP28" class="function-link"><span class="ACME-function-syntax">seditSetPixelIfPenDown</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if pen down, then draw a pixel in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the current foreground colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">get pixel mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift to next pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP37" class="function-link"><span class="ACME-function-syntax">needToMoveToNewByteRight</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">if (need to move to new byte) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move X coordinate of cursor graphic right</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateIncrement</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">needToMoveToNewByteRight</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $af74</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP37" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaRight</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">if (cursor is on right edge of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">visible area) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move cursor within existing visible area</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">move visible cursor right</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">} store leftmost mask value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span><span class="ACME-comment-syntax">zero offset of graphics cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveVisibleAreaRight</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $af90</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">compare with sprite width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP37" class="function-link"><span class="ACME-function-syntax">notOnRightEdge</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">notOnRightEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $af9b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">set mask to leftmost pixel mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP30" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaLeftOrRight</span></a><span class="ACME-plain-syntax">                     </span>
</pre>
<p class="commentary firstcommentary"><a id="SP38" class="paragraph-anchor"></a><b>&#167;38. Move sprite cursor down. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCursorDown</span><button class="popup" onclick="togglePopup('usagePopup53')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup53">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCursorDown</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $afb5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP28" class="function-link"><span class="ACME-function-syntax">seditSetPixelIfPenDown</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if pen down, then draw a pixel in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the current foreground colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP38" class="function-link"><span class="ACME-function-syntax">cursorIsAtBottomOfVisibleArea</span></a><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">if (cursor is at bottom of visible</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">area) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">move down</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">cursorIsAtBottomOfVisibleArea</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $afc6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP38" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaDown</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">if (visible area is not already at</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the bottom of the sprite) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveVisibleAreaDown</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $afcc</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">move visible area down one row</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">move down</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP31" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaUpOrDown</span></a><span class="ACME-plain-syntax">                        </span>
</pre>
<p class="commentary firstcommentary"><a id="SP39" class="paragraph-anchor"></a><b>&#167;39. Move sprite cursor up. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCursorUp</span><button class="popup" onclick="togglePopup('usagePopup54')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup54">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCursorUp</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $afda</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP28" class="function-link"><span class="ACME-function-syntax">seditSetPixelIfPenDown</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">if pen down, then draw a pixel in</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the current foreground colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP39" class="function-link"><span class="ACME-function-syntax">cursorIsAtTopOfVisibleArea</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">if (cursor is at top of visible</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">area) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">move up</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">cursorIsAtTopOfVisibleArea</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $afee</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP39" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaUp</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (visible area is not already at</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">the top of the sprite) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveVisibleAreaUp</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $aff9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">move visible area up one row</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">move up</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP31" class="function-link"><span class="ACME-function-syntax">moveVisibleAreaUpOrDown</span></a><span class="ACME-plain-syntax">                        </span>
</pre>
<p class="commentary firstcommentary"><a id="SP40" class="paragraph-anchor"></a><b>&#167;40. Move sprite cursor fully left. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCtrlCursorLeft</span><button class="popup" onclick="togglePopup('usagePopup55')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup55">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCtrlCursorLeft</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b008</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">seditSetVisibleCursorToLeftEdge</span></a><span class="ACME-plain-syntax">                </span>
</pre>
<p class="commentary firstcommentary"><a id="SP41" class="paragraph-anchor"></a><b>&#167;41. Shift sprite cursor left. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditShiftCursorLeft</span><button class="popup" onclick="togglePopup('usagePopup56')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup56">Usage of <span class="code-font"><span class="ACME-function-syntax">seditShiftCursorLeft</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b016</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">alreadyOnLeftEdge</span></a><span class="ACME-plain-syntax">                              </span><span class="ACME-comment-syntax">if (X already on left edge) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">closeToLeftEdge</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (X close to left edge) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">.seditCurrentX -= 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteAndCursor</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">closeToLeftEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b02c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember new X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">set .seditCurrentX = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall new X</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">alreadyOnLeftEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b036</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">seditDrawCursor</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (non-negative) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(visible cursor X is in range)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditSetVisibleCursorToLeftEdge</span><button class="popup" onclick="togglePopup('usagePopup57')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup57">Usage of <span class="code-font"><span class="ACME-function-syntax">seditSetVisibleCursorToLeftEdge</span></span>:<br/><a href="S-s22.html#SP40">&#167;40</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b03f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditStoreByteMaskAndContinue</span><button class="popup" onclick="togglePopup('usagePopup58')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup58">Usage of <span class="code-font"><span class="ACME-function-syntax">seditStoreByteMaskAndContinue</span></span>:<br/><a href="S-s22.html#SP43">&#167;43</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b04a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawCursor</span><button class="popup" onclick="togglePopup('usagePopup59')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup59">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDrawCursor</span></span>:<br/><a href="S-s22.html#SP43">&#167;43</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b04d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP42" class="paragraph-anchor"></a><b>&#167;42. Move sprite cursor fully right. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCtrlCursorRight</span><button class="popup" onclick="togglePopup('usagePopup60')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup60">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCtrlCursorRight</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b050</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP43" class="function-link"><span class="ACME-function-syntax">finishCursorRight</span></a><span class="ACME-plain-syntax">                              </span>
</pre>
<p class="commentary firstcommentary"><a id="SP43" class="paragraph-anchor"></a><b>&#167;43. Shift sprite cursor right. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditShiftCursorRight</span><button class="popup" onclick="togglePopup('usagePopup61')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup61">Usage of <span class="code-font"><span class="ACME-function-syntax">seditShiftCursorRight</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b064</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">} X = sprite width - visible width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">} add 2 to current X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP43" class="function-link"><span class="ACME-function-syntax">alreadyOnRightEdge</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP43" class="function-link"><span class="ACME-function-syntax">closeToRightEdge</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteAndCursor</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">closeToRightEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b089</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember new X coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall new X coordinate</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">alreadyOnRightEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b08e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">seditDrawCursor</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">} if (visible X &lt;= sprite width)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} then branch (visible cursor X is</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} in range)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">seditDrawCursor</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">finishCursorRight</span><button class="popup" onclick="togglePopup('usagePopup62')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup62">Usage of <span class="code-font"><span class="ACME-function-syntax">finishCursorRight</span></span>:<br/><a href="S-s22.html#SP42">&#167;42</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0a0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateOffsetForRightmostPixelInByte</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax"> </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP41" class="function-link"><span class="ACME-function-syntax">seditStoreByteMaskAndContinue</span></a><span class="ACME-plain-syntax">                  </span>
</pre>
<p class="commentary firstcommentary"><a id="SP44" class="paragraph-anchor"></a><b>&#167;44. Move sprite cursor fully down. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCtrlCursorDown</span><button class="popup" onclick="togglePopup('usagePopup63')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup63">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCtrlCursorDown</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0b4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP45" class="function-link"><span class="ACME-function-syntax">setVisibleYToZeroAndContinue</span></a><span class="ACME-plain-syntax">                   </span>
</pre>
<p class="commentary firstcommentary"><a id="SP45" class="paragraph-anchor"></a><b>&#167;45. Shift sprite cursor down. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditShiftCursorDown</span><button class="popup" onclick="togglePopup('usagePopup64')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup64">Usage of <span class="code-font"><span class="ACME-function-syntax">seditShiftCursorDown</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0c2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #8                                              </span><span class="ACME-comment-syntax">} currentY -= 8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP45" class="function-link"><span class="ACME-function-syntax">alreadyOnBottomEdge</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP45" class="function-link"><span class="ACME-function-syntax">closeToBottomEdge</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteAndCursor</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">closeToBottomEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0d8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">set to bottom edge</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">alreadyOnBottomEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0e2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP45" class="function-link"><span class="ACME-function-syntax">finishCursorDown</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">setVisibleYToZeroAndContinue</span><button class="popup" onclick="togglePopup('usagePopup65')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup65">Usage of <span class="code-font"><span class="ACME-function-syntax">setVisibleYToZeroAndContinue</span></span>:<br/><a href="S-s22.html#SP44">&#167;44</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0eb</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">visible Y = bottom edge</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">finishCursorDown</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0f0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP46" class="paragraph-anchor"></a><b>&#167;46. Move sprite cursor fully up. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCtrlCursorUp</span><button class="popup" onclick="togglePopup('usagePopup66')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup66">Usage of <span class="code-font"><span class="ACME-function-syntax">seditCtrlCursorUp</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b0f3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP47" class="function-link"><span class="ACME-function-syntax">setVisibleYToVisibleHeightAndContinue</span></a><span class="ACME-plain-syntax">          </span>
</pre>
<p class="commentary firstcommentary"><a id="SP47" class="paragraph-anchor"></a><b>&#167;47. Shift sprite cursor up. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditShiftCursorUp</span><button class="popup" onclick="togglePopup('usagePopup67')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup67">Usage of <span class="code-font"><span class="ACME-function-syntax">seditShiftCursorUp</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b107</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=sprite height - visible height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #7                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP47" class="function-link"><span class="ACME-function-syntax">alreadyOnTopEdge</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP47" class="function-link"><span class="ACME-function-syntax">closeToTopEdge</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteAndCursor</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">closeToTopEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b12b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember new Y coordinate</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall new Y coordinate</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">alreadyOnTopEdge</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b130</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">set new visible Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP47" class="function-link"><span class="ACME-function-syntax">finishCursorUp</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP47" class="function-link"><span class="ACME-function-syntax">finishCursorUp</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">setVisibleYToVisibleHeightAndContinue</span><button class="popup" onclick="togglePopup('usagePopup68')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup68">Usage of <span class="code-font"><span class="ACME-function-syntax">setVisibleYToVisibleHeightAndContinue</span></span>:<br/><a href="S-s22.html#SP46">&#167;46</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b142</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">finishCursorUp</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b148</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP48" class="paragraph-anchor"></a><b>&#167;48. Deselect current sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   Preserves Y</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">deselectCurrentSprite</span><button class="popup" onclick="togglePopup('usagePopup69')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup69">Usage of <span class="code-font"><span class="ACME-function-syntax">deselectCurrentSprite</span></span>:<br/><a href="S-s22.html#SP23">&#167;23</a>, <a href="S-s22.html#SP55">&#167;55</a>, <a href="S-s22.html#SP57">&#167;57</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b14b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember Y</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetChosenSpriteIndex</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceD</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">store previously selected sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">index</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">zero means no sprite selected</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP49" class="paragraph-anchor"></a><b>&#167;49. Record the current sprite details in the private workspace. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">rememberCurrentSpriteInWorkspace</span><button class="popup" onclick="togglePopup('usagePopup70')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup70">Usage of <span class="code-font"><span class="ACME-function-syntax">rememberCurrentSpriteInWorkspace</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a>, <a href="S-s22.html#SP55">&#167;55</a>, <a href="S-s22.html#SP56">&#167;56</a>, <a href="S-s22.html#SP57">&#167;57</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b15b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Remember address in workspace</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetChosenSpriteAddressLow</span></a><span class="ACME-plain-syntax">         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">} workspace[chosen sprite address] =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .currentSpriteDefinition</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Remember chosen sprite index in workspace</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=#.workspaceOffsetChosenSpriteIndex</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceD</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">workspace[chosen sprite index] =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.vduWorkspaceD</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP50" class="paragraph-anchor"></a><b>&#167;50. Extend the sprite to insert a new row. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditExtendVertically</span><button class="popup" onclick="togglePopup('usagePopup71')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup71">Usage of <span class="code-font"><span class="ACME-function-syntax">seditExtendVertically</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a>, <a href="S-s22.html#SP63">&#167;63</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b16d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite height-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #254                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP50" class="function-link"><span class="ACME-function-syntax">return25</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (height&gt;=255) then branch (return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP55" class="function-link"><span class="ACME-function-syntax">seditExtendSpriteInDirectionY</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP50" class="function-link"><span class="ACME-function-syntax">return25</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (cant extend)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=sprite width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=0</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditNewRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b182</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} store zero bytes in the new row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP50" class="function-link"><span class="ACME-function-syntax">seditNewRowLoop</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditMaximumVisibleHeight</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP50" class="function-link"><span class="ACME-function-syntax">seditVisibleHeightIsAsBigAsItCanBe</span></a><span class="ACME-plain-syntax">             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP2" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSpriteInBlack</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">remove current border (draw in black)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">increment visible height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP2" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSpriteInWhite</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">draw new border (draw in white)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditVisibleHeightIsAsBigAsItCanBe</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b19c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return25</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b19d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP51" class="paragraph-anchor"></a><b>&#167;51. Rectangle fill in large sprite area. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditRectangleFillToCurrentXY</span><button class="popup" onclick="togglePopup('usagePopup72')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup72">Usage of <span class="code-font"><span class="ACME-function-syntax">seditRectangleFillToCurrentXY</span></span>:<br/><a href="S-s22.html#SP53">&#167;53</a>, <a href="S-s22.html#SP54">&#167;54</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b19e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP4" class="function-link"><span class="ACME-function-syntax">seditGetScreenCoordinatesForCurrentSprite</span></a><span class="ACME-plain-syntax">      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$67</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP82" class="function-link"><span class="ACME-function-syntax">plotX</span></a><span class="ACME-plain-syntax">                                          </span><span class="ACME-comment-syntax">} PLOT $67,X,Y (rectangle fill)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP83" class="function-link"><span class="ACME-function-syntax">seditOutputXCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP84" class="function-link"><span class="ACME-function-syntax">seditOutputYCoordinate</span></a><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP2" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSpriteInWhite</span></a><span class="ACME-plain-syntax">               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP52" class="paragraph-anchor"></a><b>&#167;52. Extend the sprite to insert a new column. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditExtendHorizontally</span><button class="popup" onclick="togglePopup('usagePopup73')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup73">Usage of <span class="code-font"><span class="ACME-function-syntax">seditExtendHorizontally</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b1af</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$FE</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP52" class="function-link"><span class="ACME-function-syntax">return14</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (width &gt;=255) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=#.spriteHeaderOffsetHeight</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP55" class="function-link"><span class="ACME-function-syntax">seditExtendSpriteInDirectionY</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP52" class="function-link"><span class="ACME-function-syntax">return14</span></a><span class="ACME-plain-syntax">                                       </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy sprite bytes across each row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=height (loop counter)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = 0</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">copyOuterLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b1c4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">push loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy X bytes from .vduTempStoreDC/D to .vduTempStoreDA/B</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">copyLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b1cf</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP73" class="function-link"><span class="ACME-function-syntax">incTempStoreDCDD</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP52" class="function-link"><span class="ACME-function-syntax">copyLoop</span></a><span class="ACME-plain-syntax">                                       </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">get loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP52" class="function-link"><span class="ACME-function-syntax">copyOuterLoop</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">loop back until height bytes are</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">copied</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Finish up</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditMaximumVisibleWidth</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP52" class="function-link"><span class="ACME-function-syntax">seditVisibleWidthIsAsBigAsItCanBe</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP2" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSpriteInBlack</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">remove current border (draw in black)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">increment visible width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP2" class="function-link"><span class="ACME-function-syntax">drawRectangleAroundSpriteInWhite</span></a><span class="ACME-plain-syntax">               </span><span class="ACME-comment-syntax">draw new border (draw in white)</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditVisibleWidthIsAsBigAsItCanBe</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b1f5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return14</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b1f6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP53" class="paragraph-anchor"></a><b>&#167;53. Remove a row from the sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   Carry flag: set if full large and small sprite redraw needed</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditReduceVertically</span><button class="popup" onclick="togglePopup('usagePopup74')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup74">Usage of <span class="code-font"><span class="ACME-function-syntax">seditReduceVertically</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a>, <a href="S-s22.html#SP64">&#167;64</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b1f7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite height - 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">return26</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (sprite height == 1) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=0 (remove a row)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP57" class="function-link"><span class="ACME-function-syntax">seditReduceInDirectionY</span></a><span class="ACME-plain-syntax">                        </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP19" class="function-link"><span class="ACME-function-syntax">seditClearAndReplotRegularSizeSprite</span></a><span class="ACME-plain-syntax">           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">seditDontReduceCurrentVisibleY</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">reduce visibleY by one</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDontReduceCurrentVisibleY</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b218</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">seditDrawCursorAndPreserveCarry</span></a><span class="ACME-plain-syntax">                </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">reduceCurrentY</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleHeight</span></a><span class="ACME-plain-syntax">                </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Clear rectangular area</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">6</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,4                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">0</span><span class="ACME-plain-syntax">,800                                         </span><span class="ACME-comment-syntax">PLOT 4,0,800</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP51" class="function-link"><span class="ACME-function-syntax">seditRectangleFillToCurrentXY</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">seditDrawCursorAndPreserveCarry</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">ALWAYS branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">reduceCurrentY</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b235</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDrawCursorAndPreserveCarry</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b23f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember carry</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw cursor</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLP</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall carry</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return26</span><button class="popup" onclick="togglePopup('usagePopup75')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup75">Usage of <span class="code-font"><span class="ACME-function-syntax">return26</span></span>:<br/><a href="S-s22.html#SP54">&#167;54</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b244</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP54" class="paragraph-anchor"></a><b>&#167;54. Remove a column from the sprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditReduceHorizontally</span><button class="popup" onclick="togglePopup('usagePopup76')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup76">Usage of <span class="code-font"><span class="ACME-function-syntax">seditReduceHorizontally</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b245</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">return26</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (sprite width == 1) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDC/DD = the current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} sprite definition address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP77" class="function-link"><span class="ACME-function-syntax">moveToNextSprite</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">.vduTempStoreDC/DD = next sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">address minus one</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP75" class="function-link"><span class="ACME-function-syntax">decTempStoreDCDD</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">                   = address of last</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">byte of current sprite</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDA/DB = address of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} last byte of current sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy sprite data to the end of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">the source and destination addresses start out the same, but at the end of each row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">we reduce the source pointer by one byte, removing a column of bytes from the data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite height-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=sprite height (loop counter)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">[NOTE: Redundant]</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditReduceLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b269</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember sprite height remaining</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">Y=0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = sprite width-1 (inner loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">counter)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCopyRowOfSpriteLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b270</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP75" class="function-link"><span class="ACME-function-syntax">decTempStoreDCDD</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP74" class="function-link"><span class="ACME-function-syntax">decTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditCopyRowOfSpriteLoop</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">if more to do then loop back</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP75" class="function-link"><span class="ACME-function-syntax">decTempStoreDCDD</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">remove one byte from each row</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall sprite height remaining and</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} decrement</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditReduceLoop</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">loop back if more to do</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">Y=1 (remove a column)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP57" class="function-link"><span class="ACME-function-syntax">seditReduceInDirectionY</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">actually remove the column</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">remove cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP19" class="function-link"><span class="ACME-function-syntax">seditClearAndReplotRegularSizeSprite</span></a><span class="ACME-plain-syntax">           </span><span class="ACME-comment-syntax">redraw small sprite</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">take off the current X position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember how many columns are to the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">right of the current X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditSkipDecrementingVisibleX</span></a><span class="ACME-plain-syntax">                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Update the visible X and other associated variables</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP13" class="function-link"><span class="ACME-function-syntax">seditXCoordinateOffsetForRightmostPixelInByte</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax"> </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditScreenXOffsetWithinCurrentByte</span></a><span class="ACME-plain-syntax">            </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditSkipDecrementingVisibleX</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b2b0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall how many columns are to the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">right of the current X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditFinishUp</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditSkipDecrementingVisibleWidth</span></a><span class="ACME-plain-syntax">              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteVisibleWidth</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Blank out old column</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">6</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">25</span><span class="ACME-plain-syntax">,4                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">900</span><span class="ACME-plain-syntax">,0                                         </span><span class="ACME-comment-syntax">PLOT 4,900,0</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP51" class="function-link"><span class="ACME-function-syntax">seditRectangleFillToCurrentXY</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP54" class="function-link"><span class="ACME-function-syntax">seditFinishUp</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditSkipDecrementingVisibleWidth</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b2ce</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP7" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSprite</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditFinishUp</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b2d7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP55" class="paragraph-anchor"></a><b>&#167;55. Extend a sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   Y: 0 means extend by a column; 1 means extend by a row</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditExtendSpriteInDirectionY</span><button class="popup" onclick="togglePopup('usagePopup77')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup77">Usage of <span class="code-font"><span class="ACME-function-syntax">seditExtendSpriteInDirectionY</span></span>:<br/><a href="S-s22.html#SP50">&#167;50</a>, <a href="S-s22.html#SP52">&#167;52</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b2da</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP48" class="function-link"><span class="ACME-function-syntax">deselectCurrentSprite</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">} NOTE: These calls all preserve Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP78" class="function-link"><span class="ACME-function-syntax">getFreeSpace</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember Y in X</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDA/DB = current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} sprite address - sprite width or</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} if (end of sprite memory &lt;</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} tempStoreDA/DB) then branch (no</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} room to extend sprite)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP56" class="function-link"><span class="ACME-function-syntax">noRoomToExtendSprite</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">} get sprite width or height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetSizeInBytesLow</span></a><span class="ACME-plain-syntax">              </span><span class="ACME-comment-syntax">} add size of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">} to give our new size</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} Y=#.spriteHeaderOffsetSizeInBytesHigh</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall original Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">flip to opposite direction: 1 to 0</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">and 0 to 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">} also add the length in the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} opposite direction (ie. the sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} height or width)?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shuffle addresses around:</span>
<span class="ACME-plain-syntax">    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  tempStoreDC/DD = current sprite address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">  current sprite address = tempStoreDA/DB</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditShuffleAddressesLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b319</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                   </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                   </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP55" class="function-link"><span class="ACME-function-syntax">seditShuffleAddressesLoop</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy six bytes of memory from .vduTempStoreDC/DD to .vduTempStoreDA/DB</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">i.e. this copies the sprite header</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #6                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s13.html#SP1" class="function-link"><span class="ACME-function-syntax">blockCopyMemoryIncrementing</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">copy from .vduTempStoreDC/DD to</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">.vduTempStoreDA/DB</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP49" class="function-link"><span class="ACME-function-syntax">rememberCurrentSpriteInWorkspace</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP56" class="paragraph-anchor"></a><b>&#167;56. noRoomToExtendSprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">noRoomToExtendSprite</span><button class="popup" onclick="togglePopup('usagePopup78')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup78">Usage of <span class="code-font"><span class="ACME-function-syntax">noRoomToExtendSprite</span></span>:<br/><a href="S-s22.html#SP55">&#167;55</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b338</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP49" class="function-link"><span class="ACME-function-syntax">rememberCurrentSpriteInWorkspace</span></a><span class="ACME-plain-syntax">               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">9</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$07</span><span class="ACME-plain-syntax">,</span><span class="ACME-string-syntax">"No room"</span><span class="ACME-plain-syntax">,</span><span class="ACME-constant-syntax">$0D</span><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$0F</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">*FX 15,15 (Flush keyboard)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$81</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$96</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSBYTE</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">read key for 150ms</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">display following message</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"       "</span><span class="ACME-plain-syntax">                                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP57" class="paragraph-anchor"></a><b>&#167;57. Reduce a sprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditReduceInDirectionY</span><button class="popup" onclick="togglePopup('usagePopup79')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup79">Usage of <span class="code-font"><span class="ACME-function-syntax">seditReduceInDirectionY</span></span>:<br/><a href="S-s22.html#SP53">&#167;53</a>, <a href="S-s22.html#SP54">&#167;54</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b364</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP48" class="function-link"><span class="ACME-function-syntax">deselectCurrentSprite</span></a><span class="ACME-plain-syntax">                          </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #2                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #6                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s13.html#SP2" class="function-link"><span class="ACME-function-syntax">blockCopyMemoryDecrementing</span></a><span class="ACME-plain-syntax">                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=X^1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">decrement</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP49" class="function-link"><span class="ACME-function-syntax">rememberCurrentSpriteInWorkspace</span></a><span class="ACME-plain-syntax">               </span>
</pre>
<p class="commentary firstcommentary"><a id="SP58" class="paragraph-anchor"></a><b>&#167;58. Toggle pen up / down. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditPenUpDown</span><button class="popup" onclick="togglePopup('usagePopup80')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup80">Usage of <span class="code-font"><span class="ACME-function-syntax">seditPenUpDown</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b3ab</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetOptions</span></a><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> #1                                              </span><span class="ACME-comment-syntax">flip bit 0 of options</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP59" class="paragraph-anchor"></a><b>&#167;59. Flood one column of sprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditFloodColumn</span><button class="popup" onclick="togglePopup('usagePopup81')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup81">Usage of <span class="code-font"><span class="ACME-function-syntax">seditFloodColumn</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b3b4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw current cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember current visible Y</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">get sprite pixel Y for bottom left</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of visible area of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">add sprite pixel Y offset within the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">visible area</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">store current Y sprite pixel</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember it</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember address of current sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP61" class="function-link"><span class="ACME-function-syntax">getColourByteFromPixelOfSprite</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">writeSpritePixel</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodColumnUpLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b3d2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">check if we have reached the height</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of the sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP59" class="function-link"><span class="ACME-function-syntax">floodColumnDown</span></a><span class="ACME-plain-syntax">                                </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Subtract width from sprite data address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP62" class="function-link"><span class="ACME-function-syntax">writeSpritePixelIfItsBackgroundColour</span></a><span class="ACME-plain-syntax">          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP59" class="function-link"><span class="ACME-function-syntax">floodColumnUpLoop</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodColumnDown</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b3f0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">} recall original sprite address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} and Y sprite pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodColumnDownLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b3fa</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP59" class="function-link"><span class="ACME-function-syntax">floodColumnFinishUp</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add width to sprite data address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP62" class="function-link"><span class="ACME-function-syntax">writeSpritePixelIfItsBackgroundColour</span></a><span class="ACME-plain-syntax">          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP59" class="function-link"><span class="ACME-function-syntax">floodColumnDownLoop</span></a><span class="ACME-plain-syntax">                            </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodColumnFinishUp</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b414</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP19" class="function-link"><span class="ACME-function-syntax">seditPlotRegularSizeSprite</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">plot the regular size sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP6" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteColumn</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">draw new large sprite column</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw current cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP60" class="paragraph-anchor"></a><b>&#167;60. Flood one row of sprite. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditFloodRow</span><button class="popup" onclick="togglePopup('usagePopup82')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup82">Usage of <span class="code-font"><span class="ACME-function-syntax">seditFloodRow</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b421</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">undraw current cursor</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Remember current visible X and byte mask (twice)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">get sprite pixel X for bottom left</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of visible area of sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">add sprite pixel X offset within the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">visible area</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">store current X sprite pixel</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember it</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember address of current sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP61" class="function-link"><span class="ACME-function-syntax">getColourByteFromPixelOfSprite</span></a><span class="ACME-plain-syntax">                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">writeSpritePixel</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodRowRightLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b444</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">writePixel1</span></a><span class="ACME-plain-syntax">                                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Start next byte going</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">if (reached right edge of sprite)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">floodRowLeft</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Decrement sprite byte (sprite bytes are stored right to left)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">writePixel1</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b463</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP62" class="function-link"><span class="ACME-function-syntax">writeSpritePixelIfItsBackgroundColour</span></a><span class="ACME-plain-syntax">          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">floodRowRightLoop</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodRowLeft</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b468</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">} restore original values after</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} filling right</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodRowLeftLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b476</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">writePixel2</span></a><span class="ACME-plain-syntax">                                    </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">floodRowFinishUp</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">if (at left edge of sprite) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move left one pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add one to sprite byte address (sprites are stored right to left)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">writePixel2</span></a><span class="ACME-plain-syntax">                                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteHigh</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">writePixel2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b491</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP62" class="function-link"><span class="ACME-function-syntax">writeSpritePixelIfItsBackgroundColour</span></a><span class="ACME-plain-syntax">          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP60" class="function-link"><span class="ACME-function-syntax">floodRowLeftLoop</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">floodRowFinishUp</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b496</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP19" class="function-link"><span class="ACME-function-syntax">seditPlotRegularSizeSprite</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">plot the regular size sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP5" class="function-link"><span class="ACME-function-syntax">seditDrawLargeSpriteRow</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">draw new large sprite row</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">} restore byte mask and X position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP9" class="function-link"><span class="ACME-function-syntax">drawCircleCursor</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">draw current cursor</span>
</pre>
<p class="commentary firstcommentary"><a id="SP61" class="paragraph-anchor"></a><b>&#167;61. Get the current pixel colour from a sprite returned as a solid colour byte. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">getColourByteFromPixelOfSprite</span><button class="popup" onclick="togglePopup('usagePopup83')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup83">Usage of <span class="code-font"><span class="ACME-function-syntax">getColourByteFromPixelOfSprite</span></span>:<br/><a href="S-s22.html#SP6">&#167;6</a>, <a href="S-s22.html#SP59">&#167;59</a>, <a href="S-s22.html#SP60">&#167;60</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4a7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">mask off what isn't the current pixel</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceA</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift pixel value up to the top bits</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BMI</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">updateMaskLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4b6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceA</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift mask value up too</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP61" class="function-link"><span class="ACME-function-syntax">updateMaskLoop</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift pixel down the byte, making each pixel the same colour, so we end up with</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">a byte of solid colour based on the pixel from the sprite</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceA</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">updateSpriteByteLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4c2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceA</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP61" class="function-link"><span class="ACME-function-syntax">updateSpriteByteLoop</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceA</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP62" class="paragraph-anchor"></a><b>&#167;62. writeSpritePixelIfItsBackgroundColour. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">writeSpritePixelIfItsBackgroundColour</span><button class="popup" onclick="togglePopup('usagePopup84')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup84">Usage of <span class="code-font"><span class="ACME-function-syntax">writeSpritePixelIfItsBackgroundColour</span></span>:<br/><a href="S-s22.html#SP59">&#167;59</a>, <a href="S-s22.html#SP60">&#167;60</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4cd</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">seditCurrentSpriteByteLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                  </span><span class="ACME-comment-syntax">read sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">vduWorkspaceA</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">EOR with background colour</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">apply mask</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP62" class="function-link"><span class="ACME-function-syntax">return19</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (not background colour) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch (return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Sprite pixel is background colour, write new pixel there</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP29" class="function-link"><span class="ACME-function-syntax">writeSpritePixel</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return19</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4de</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP63" class="paragraph-anchor"></a><b>&#167;63. Insert row. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditInsertRow</span><button class="popup" onclick="togglePopup('usagePopup85')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup85">Usage of <span class="code-font"><span class="ACME-function-syntax">seditInsertRow</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4df</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP50" class="function-link"><span class="ACME-function-syntax">seditExtendVertically</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP63" class="function-link"><span class="ACME-function-syntax">return27</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (no room to extend) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} tempStoreDC/DD = current sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} address + 5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">} X = (sprite height - current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} position)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} i.e. the number of rows above the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} current row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Y = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditInsertRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b4ff</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=sprite width (loop counter)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDC/DD = source</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDA/DB = destination</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP63" class="function-link"><span class="ACME-function-syntax">seditCopyRowLoop</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditCopyRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b514</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP63" class="function-link"><span class="ACME-function-syntax">seditCopyRowLoop</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP63" class="function-link"><span class="ACME-function-syntax">seditInsertRowLoop</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Store zeroes in the newly inserted row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Y=0 here</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=sprite width</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditClearNewRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b522</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP63" class="function-link"><span class="ACME-function-syntax">seditClearNewRowLoop</span></a><span class="ACME-plain-syntax">                           </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></a><span class="ACME-plain-syntax">  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return27</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b52c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP64" class="paragraph-anchor"></a><b>&#167;64. Delete row. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDeleteRow</span><button class="popup" onclick="togglePopup('usagePopup86')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup86">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDeleteRow</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b52d</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite height-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP64" class="function-link"><span class="ACME-function-syntax">return28</span></a><span class="ACME-plain-syntax">                                       </span><span class="ACME-comment-syntax">if (sprite height == 1) then branch</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">(return)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Y = sprite height - current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP64" class="function-link"><span class="ACME-function-syntax">deleteRowAndUpdate</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (removing the top row) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Need to copy data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = number of rows to move (loop</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">counter)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = #.spriteHeaderOffsetWidth</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y=sprite width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP86" class="function-link"><span class="ACME-function-syntax">multiply8x8</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">.vduTempStoreDE/DF = (number of rows</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">to move) * (sprite width)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">tempStoreDC/DD = current sprite definition + number of bytes to move</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #5                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Copy bytes from tempStoreDC/DD to tempStroeDA/DB</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">copySpriteDataForDeleteRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b55f</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .vduTempStoreDA/DB=.vduTempStoreDC/DD</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">} .vduTempStoreDC/DD=-width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = sprite width (loop counter)</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">copy sprite data for row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP64" class="function-link"><span class="ACME-function-syntax">copySpriteDataForDeleteRow</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">deleteRowAndUpdate</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b57e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP53" class="function-link"><span class="ACME-function-syntax">seditReduceVertically</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP64" class="function-link"><span class="ACME-function-syntax">return28</span></a><span class="ACME-plain-syntax">                                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></a><span class="ACME-plain-syntax">  </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return28</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b586</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP65" class="paragraph-anchor"></a><b>&#167;65. Print the following message. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> First byte of following data is a count of the characters</span>

<span class="ACME-plain-syntax"> X and Y are preserved</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">printInlineCounted</span><button class="popup" onclick="togglePopup('usagePopup87')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup87">Usage of <span class="code-font"><span class="ACME-function-syntax">printInlineCounted</span></span>:<br/><a href="S-s22.html#SP3">&#167;3</a>, <a href="S-s22.html#SP9">&#167;9</a>, <a href="S-s22.html#SP19">&#167;19</a>, <a href="S-s22.html#SP22">&#167;22</a>, <a href="S-s22.html#SP53">&#167;53</a>, <a href="S-s22.html#SP54">&#167;54</a>, <a href="S-s22.html#SP56">&#167;56</a>, <a href="S-s22.html#SP87">&#167;87</a><br/>Chapter 7: Parsing *HELP Commands - <a href="S-s7.html#SP1">&#167;1</a>, <a href="S-s7.html#SP5">&#167;5</a><br/>Chapter 10: Star commands affecting memory - <a href="S-s10.html#SP1">&#167;1</a>, <a href="S-s10.html#SP2">&#167;2</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b587</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} get address of following data from</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} stack</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} (minus one)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Remember current XY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">increment pointer to point at data</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">itself</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">count of number of bytes</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">printCharacterLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b59c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} remember tempStoreDA/DB</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">load character</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">print character</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} restore tempStoreDA/DB</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">incTempStoreDADB</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">move to next character</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printCharacterLoop</span></a><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">if (not finished) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Restore XY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">)                               </span><span class="ACME-comment-syntax">return to following instruction</span>
</pre>
<p class="commentary firstcommentary"><a id="SP66" class="paragraph-anchor"></a><b>&#167;66. Insert column. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditInsertColumn</span><button class="popup" onclick="togglePopup('usagePopup88')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup88">Usage of <span class="code-font"><span class="ACME-function-syntax">seditInsertColumn</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b5ba</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP68" class="function-link"><span class="ACME-function-syntax">createMaskByteForPixelsToTheRight</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=sprite height</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} tempStoreDA/DB = sprite address + 5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">} .vduTempStoreDF = width - current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}                 = number of bytes</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} to the right of the current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">insertColumnLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b5e2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} remember X (the sprite height</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} remaining, the loop counter) on</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} the stack</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">get sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember it on the stack</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">OR with mask of pixels to the right</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">EOR to get the pixels to the left</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">only</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store result</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">get sprite byte again</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift byte right to move the pixels</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">add contribution from previous byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">store back in sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift A left by pixels per byte-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP66" class="function-link"><span class="ACME-function-syntax">seditInsertColumnGotoNextRow</span></a><span class="ACME-plain-syntax">                   </span><span class="ACME-comment-syntax">if (end of row) then branch</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">insertColumnLoop2</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b60e</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">read sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">store back in sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall original sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift A left by pixels per byte-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store pixel from the previous byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP66" class="function-link"><span class="ACME-function-syntax">insertColumnLoop2</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditInsertColumnGotoNextRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b62c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} add sprite width to tempStoreDA/DB</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} Recall loop counter X</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP66" class="function-link"><span class="ACME-function-syntax">insertColumnLoop</span></a><span class="ACME-plain-syntax">                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></a><span class="ACME-plain-syntax">  </span>
</pre>
<p class="commentary firstcommentary"><a id="SP67" class="paragraph-anchor"></a><b>&#167;67. Delete column. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditDeleteColumn</span><button class="popup" onclick="togglePopup('usagePopup89')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup89">Usage of <span class="code-font"><span class="ACME-function-syntax">seditDeleteColumn</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b643</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP68" class="function-link"><span class="ACME-function-syntax">createMaskByteForPixelsToTheRight</span></a><span class="ACME-plain-syntax">              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite height-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X=sprite height</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">tempStoreDA/DB = sprite address + 6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #6                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">get sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span><span class="ACME-comment-syntax">subtract current position</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">.vduTempStoreDF = sprite width -</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">current position</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">i.e. number of columns to move</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">deleteColumnLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b669</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} store loop counter (number of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} columns remaining to move)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">.vduTempStoreDE holds the pixel from</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">previous byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP67" class="function-link"><span class="ACME-function-syntax">finishUpMovingRow</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b675</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">get sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">store sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall original sprite byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskLeft</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Shift A right by pixels per byte-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store pixel from the previous byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP67" class="function-link"><span class="ACME-function-syntax">moveRowLoop</span></a><span class="ACME-plain-syntax">                                    </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">finishUpMovingRow</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b695</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move last byte of row</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">EOR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add width to current address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDA/DB += width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}  Recall loop counter (number of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} columns remaining to move)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP67" class="function-link"><span class="ACME-function-syntax">deleteColumnLoop</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">loop back if not yet done</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></a><span class="ACME-plain-syntax">  </span>
</pre>
<p class="commentary firstcommentary"><a id="SP68" class="paragraph-anchor"></a><b>&#167;68. createMaskByteForPixelsToTheRight. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">createMaskByteForPixelsToTheRight</span><button class="popup" onclick="togglePopup('usagePopup90')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup90">Usage of <span class="code-font"><span class="ACME-function-syntax">createMaskByteForPixelsToTheRight</span></span>:<br/><a href="S-s22.html#SP66">&#167;66</a>, <a href="S-s22.html#SP67">&#167;67</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b6c5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleByteMask</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store current pixel mask</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} OR in the new value</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift right</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">loop until a set pixel is found</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP69" class="paragraph-anchor"></a><b>&#167;69. Reverse the pixels in the byte. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> Used when mirroring vertically</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">reversePixelsInByteA</span><button class="popup" onclick="togglePopup('usagePopup91')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup91">Usage of <span class="code-font"><span class="ACME-function-syntax">reversePixelsInByteA</span></span>:<br/><a href="S-s22.html#SP70">&#167;70</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b6d4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduPixelsPerByteMinusOne</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">AND</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduColourMaskRight</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall A</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift A right</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BPL</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">loop back until done</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP70" class="paragraph-anchor"></a><b>&#167;70. Mirror sprite vertically. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditMirrorVertically</span><button class="popup" onclick="togglePopup('usagePopup92')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup92">Usage of <span class="code-font"><span class="ACME-function-syntax">seditMirrorVertically</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b6ed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #5                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">mirrorVerticallyLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b702</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">} A = sprite width - 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">} A = sprite width + 1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDC = (sprite width +</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} 1)/2]</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">                  = byte left of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">centre point</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">                  = destination</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">offset</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDD = (sprite width +</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} 2)/2</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">                  = byte right of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">centre point</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">                  = source offset</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">mirrorRowLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b712</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Swap two bytes, reversing the pixels in each byte also</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP69" class="function-link"><span class="ACME-function-syntax">reversePixelsInByteA</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember byte</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">read source byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP69" class="function-link"><span class="ACME-function-syntax">reversePixelsInByteA</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">reverse it</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">store in destination</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall byte</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">store in source</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP70" class="function-link"><span class="ACME-function-syntax">mirrorRowLoop</span></a><span class="ACME-plain-syntax">                                  </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add width to the current address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry set, add one more than usual</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">add sprite width-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP70" class="function-link"><span class="ACME-function-syntax">mirrorVerticallyLoop</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">loop back until done</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></a><span class="ACME-plain-syntax">  </span>
</pre>
<p class="commentary firstcommentary"><a id="SP71" class="paragraph-anchor"></a><b>&#167;71. Mirror sprite horizontally. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditMirrorHorizontally</span><button class="popup" onclick="togglePopup('usagePopup93')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup93">Usage of <span class="code-font"><span class="ACME-function-syntax">seditMirrorHorizontally</span></span>:<br/><a href="S-s22.html#SP25">&#167;25</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b743</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #5                                              </span><span class="ACME-comment-syntax">} .vduTempStoreDC/DD = sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} definition address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDA/DB = sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} definition address + 5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionHigh</span></a><span class="ACME-plain-syntax">                    </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP77" class="function-link"><span class="ACME-function-syntax">moveToNextSprite</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">move address to start of next sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP75" class="function-link"><span class="ACME-function-syntax">decTempStoreDCDD</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">move address back one to be the last</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">byte of the current sprite</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">.vduTempStoreDC/DD -= sprite width</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">carry clear, subtract one more than</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">normal</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetHeight</span></a><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span><span class="ACME-comment-syntax">A = sprite height-1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP71" class="function-link"><span class="ACME-function-syntax">skipMirrorVertically</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">if (sprite has height 1) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = sprite height / 2 (loop counter)</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">mirrorHorizontalMainLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b772</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">Y = sprite width (loop counter)</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Swap row in top half of sprite with row in bottom half of sprite</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">mirrorRowHorizontalLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b778</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember byte from top half</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">byte in top half = byte in bottom</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">half</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall original byte from top half</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">store in bottom half</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">decrement loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP71" class="function-link"><span class="ACME-function-syntax">mirrorRowHorizontalLoop</span></a><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">loop back until done</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add sprite width to top half of sprite address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP4" class="function-link"><span class="ACME-function-syntax">spriteHeaderOffsetWidth</span></a><span class="ACME-plain-syntax">                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Subtract sprite width from bottom half address</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP71" class="function-link"><span class="ACME-function-syntax">mirrorHorizontalMainLoop</span></a><span class="ACME-plain-syntax">                       </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipMirrorVertically</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7a0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP8" class="function-link"><span class="ACME-function-syntax">seditDrawLargeAndRegularSpriteAndUpdateCursor</span></a><span class="ACME-plain-syntax">  </span>
</pre>
<p class="commentary firstcommentary"><a id="SP72" class="paragraph-anchor"></a><b>&#167;72. incTempStoreDADB. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">incTempStoreDADB</span><button class="popup" onclick="togglePopup('usagePopup94')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup94">Usage of <span class="code-font"><span class="ACME-function-syntax">incTempStoreDADB</span></span>:<br/><a href="S-s22.html#SP15">&#167;15</a>, <a href="S-s22.html#SP21">&#167;21</a>, <a href="S-s22.html#SP52">&#167;52</a>, <a href="S-s22.html#SP65">&#167;65</a><br/>Chapter 7: Parsing *HELP Commands - <a href="S-s7.html#SP5">&#167;5</a><br/>Chapter 13: Sprite editor block memory copy - <a href="S-s13.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7a3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">return2</span></a><span class="ACME-plain-syntax">                                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">return2</span><button class="popup" onclick="togglePopup('usagePopup95')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup95">Usage of <span class="code-font"><span class="ACME-function-syntax">return2</span></span>:<br/><a href="S-s22.html#SP73">&#167;73</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7a9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP73" class="paragraph-anchor"></a><b>&#167;73. incTempStoreDCDD. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">incTempStoreDCDD</span><button class="popup" onclick="togglePopup('usagePopup96')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup96">Usage of <span class="code-font"><span class="ACME-function-syntax">incTempStoreDCDD</span></span>:<br/><a href="S-s22.html#SP52">&#167;52</a><br/>Chapter 13: Sprite editor block memory copy - <a href="S-s13.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7aa</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP72" class="function-link"><span class="ACME-function-syntax">return2</span></a><span class="ACME-plain-syntax">                                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP74" class="paragraph-anchor"></a><b>&#167;74. decTempStoreDADB. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">decTempStoreDADB</span><button class="popup" onclick="togglePopup('usagePopup97')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup97">Usage of <span class="code-font"><span class="ACME-function-syntax">decTempStoreDADB</span></span>:<br/><a href="S-s22.html#SP54">&#167;54</a><br/>Chapter 13: Sprite editor block memory copy - <a href="S-s13.html#SP2">&#167;2</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7b1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDB</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDA</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP75" class="paragraph-anchor"></a><b>&#167;75. decTempStoreDCDD. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">decTempStoreDCDD</span><button class="popup" onclick="togglePopup('usagePopup98')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup98">Usage of <span class="code-font"><span class="ACME-function-syntax">decTempStoreDCDD</span></span>:<br/><a href="S-s22.html#SP54">&#167;54</a>, <a href="S-s22.html#SP71">&#167;71</a><br/>Chapter 13: Sprite editor block memory copy - <a href="S-s13.html#SP2">&#167;2</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7ba</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP76" class="paragraph-anchor"></a><b>&#167;76. Find the address of the given sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   A = sprite number to find</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   (A,Y): vduTempStoreDC/DD = start of sprite</span>
<span class="ACME-plain-syntax">   X: Sprite index (in the range 1 to number of sprites), or 0 for not found</span>
<span class="ACME-plain-syntax">   Z Set and X = 0 if we ran out of sprites</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">findSpriteA</span><button class="popup" onclick="togglePopup('usagePopup99')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup99">Usage of <span class="code-font"><span class="ACME-function-syntax">findSpriteA</span></span>:<br/><a href="S-s22.html#SP17">&#167;17</a>, <a href="S-s22.html#SP21">&#167;21</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP4">&#167;4</a>, <a href="S-s21.html#SP16">&#167;16</a>, <a href="S-s21.html#SP17">&#167;17</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7c3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">remember sprite number</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">address = start of sprite page + 3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetSpriteStartPage</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">.vduTempStoreDD = sprite start page</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #3                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">.vduTempStoreDC = 3</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetNumberOfSprites</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = number of sprites = loop counter</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>

<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #5                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall and remember sprite number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">have we reached the sprite we want?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (yes) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP77" class="function-link"><span class="ACME-function-syntax">moveToNextSprite</span></a><span class="ACME-plain-syntax">                               </span><span class="ACME-comment-syntax">move .vduTempStoreDC/D to next sprite</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (X != 0) then branch (loop back)</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">recall and discard the sprite number</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">now</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} get address in AY</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CPX</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">did we reach the end of the sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">list?</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP77" class="paragraph-anchor"></a><b>&#167;77. Move address to the start of the next sprite. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">       .vduTempStoreDC/DD points to a sprite</span>
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       .vduTempStoreDC/DD points to the next sprite</span>
<span class="ACME-plain-syntax">       Preserves X</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveToNextSprite</span><button class="popup" onclick="togglePopup('usagePopup100')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup100">Usage of <span class="code-font"><span class="ACME-function-syntax">moveToNextSprite</span></span>:<br/><a href="S-s22.html#SP17">&#167;17</a>, <a href="S-s22.html#SP54">&#167;54</a>, <a href="S-s22.html#SP71">&#167;71</a>, <a href="S-s22.html#SP76">&#167;76</a>, <a href="S-s22.html#SP78">&#167;78</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b7eb</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #2                                              </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDC/DD += size of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} sprite + 6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #6                                              </span><span class="ACME-comment-syntax">} six is the size of the sprite</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} header data</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP78" class="paragraph-anchor"></a><b>&#167;78. Get the amount of free space remaining in the sprite data. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   .vduTempStoreDE/DF holds the free space in bytes</span>
<span class="ACME-plain-syntax">   .vduTempStoreDC/DD holds the end of used sprite memory address</span>
<span class="ACME-plain-syntax">   Preserves A,X,Y</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">getFreeSpace</span><button class="popup" onclick="togglePopup('usagePopup101')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup101">Usage of <span class="code-font"><span class="ACME-function-syntax">getFreeSpace</span></span>:<br/><a href="S-s22.html#SP21">&#167;21</a>, <a href="S-s22.html#SP55">&#167;55</a><br/>Chapter 7: Parsing *HELP Commands - <a href="S-s7.html#SP1">&#167;1</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP4">&#167;4</a>, <a href="S-s21.html#SP7">&#167;7</a>, <a href="S-s21.html#SP9">&#167;9</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b804</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} store A,X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PHA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetSpriteStartPage</span></a><span class="ACME-plain-syntax">                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDC/DD = sprite page</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} start + 3</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #3                                              </span><span class="ACME-comment-syntax">}                    = initial space</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} used</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetNumberOfSprites</span></a><span class="ACME-plain-syntax">                </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">get number of sprites</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (no sprites) then branch</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = number of sprites = loop counter</span>

<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP77" class="function-link"><span class="ACME-function-syntax">moveToNextSprite</span></a><span class="ACME-plain-syntax">                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (not done yet) then branch back</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetSpriteEndPage</span></a><span class="ACME-plain-syntax">                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDC</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">free space = total space - space used</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDD</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAY</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} recall A,X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">PLA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP79" class="paragraph-anchor"></a><b>&#167;79. Skips past any spaces on the command line. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   (X,Y): address of the current position in the command line</span>

<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   (X,Y): address of the rest of the command line</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipLeadingSpaces</span><button class="popup" onclick="togglePopup('usagePopup102')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup102">Usage of <span class="code-font"><span class="ACME-function-syntax">skipLeadingSpaces</span></span>:<br/><a href="S-s22.html#SP16">&#167;16</a>, <a href="S-s22.html#SP21">&#167;21</a>, <a href="S-s22.html#SP80">&#167;80</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP17">&#167;17</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b835</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceHigh</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} store pointer to remainder of user</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} input string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">skipSpaces</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b83b</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">' '</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP79" class="function-link"><span class="ACME-function-syntax">nonSpace</span></a><span class="ACME-plain-syntax">                                       </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP79" class="function-link"><span class="ACME-function-syntax">skipSpaces</span></a><span class="ACME-plain-syntax">                                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceHigh</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP79" class="function-link"><span class="ACME-function-syntax">skipSpaces</span></a><span class="ACME-plain-syntax">                                     </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">nonSpace</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b84a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceHigh</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} set XY to the remainder of the</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} user input string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">get proper workspace address</span>
</pre>
<p class="commentary firstcommentary"><a id="SP80" class="paragraph-anchor"></a><b>&#167;80. Read 8 bit number from user input string into A. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">       XY = address of remainder of user input string</span>
<span class="ACME-plain-syntax">       A = .vduTempStoreDE = 8 bit value read</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">read8BitNumberIntoA</span><button class="popup" onclick="togglePopup('usagePopup103')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup103">Usage of <span class="code-font"><span class="ACME-function-syntax">read8BitNumberIntoA</span></span>:<br/><a href="S-s22.html#SP16">&#167;16</a>, <a href="S-s22.html#SP21">&#167;21</a><br/>Chapter 10: Star commands affecting memory - <a href="S-s10.html#SP6">&#167;6</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP1">&#167;1</a>, <a href="S-s21.html#SP14">&#167;14</a>, <a href="S-s21.html#SP17">&#167;17</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b851</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP79" class="function-link"><span class="ACME-function-syntax">skipLeadingSpaces</span></a><span class="ACME-plain-syntax">                              </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span><span class="ACME-comment-syntax">} workspace address is set to current</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceHigh</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} position in user input string</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">result = 0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span><span class="ACME-comment-syntax">get next character</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'0'</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">convert ASCII digit to value 0-9</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #10                                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP81" class="function-link"><span class="ACME-function-syntax">badNumberError</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">if (10 or more) then branch (bad</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">number)</span>

<span class="ACME-identifier-syntax">-</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Multiply the existing result by 10</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TAX</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">X = digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDE *= 2</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP81" class="function-link"><span class="ACME-function-syntax">badNumberError</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP81" class="function-link"><span class="ACME-function-syntax">badNumberError</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ASL</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} A = .vduTempStoreDE * 4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP81" class="function-link"><span class="ACME-function-syntax">badNumberError</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} A += .vduTempStoreDE</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDE = A =</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} .vduTempStoreDE * 10</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP81" class="function-link"><span class="ACME-function-syntax">badNumberError</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Add the digit in X to the result</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">} .vduTempStoreDE += digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">}</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Branch if overflow occurs</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCS</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP81" class="function-link"><span class="ACME-function-syntax">badNumberError</span></a><span class="ACME-plain-syntax">                                 </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Move to next digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceHigh</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Read the next digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'0'</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #10                                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">-</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">branch back if there is another digit</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">Get result in A, and XY is the address of the rest of the command</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceHigh</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s8.html#SP2" class="function-link"><span class="ACME-function-syntax">getPrivateWorkspaceAddress</span></a><span class="ACME-plain-syntax">                     </span>
</pre>
<p class="commentary firstcommentary"><a id="SP81" class="paragraph-anchor"></a><b>&#167;81. badNumberError. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">badNumberError</span><button class="popup" onclick="togglePopup('usagePopup104')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup104">Usage of <span class="code-font"><span class="ACME-function-syntax">badNumberError</span></span>:<br/><a href="S-s22.html#SP80">&#167;80</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b897</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s10.html#SP8" class="function-link"><span class="ACME-function-syntax">generateError</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">$89</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">error number</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"Bad number"</span><span class="ACME-plain-syntax">,0                                </span><span class="ACME-comment-syntax">error message</span>
</pre>
<p class="commentary firstcommentary"><a id="SP82" class="paragraph-anchor"></a><b>&#167;82. PLOT X,. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: plot number</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">plotX</span><button class="popup" onclick="togglePopup('usagePopup105')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup105">Usage of <span class="code-font"><span class="ACME-function-syntax">plotX</span></span>:<br/><a href="S-s22.html#SP5">&#167;5</a>, <a href="S-s22.html#SP9">&#167;9</a>, <a href="S-s22.html#SP10">&#167;10</a>, <a href="S-s22.html#SP11">&#167;11</a>, <a href="S-s22.html#SP32">&#167;32</a>, <a href="S-s22.html#SP34">&#167;34</a>, <a href="S-s22.html#SP51">&#167;51</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8a6</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$19</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} VDU 25,X, = PLOT X,</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP83" class="paragraph-anchor"></a><b>&#167;83. VDU plotPointX;. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditOutputXCoordinate</span><button class="popup" onclick="togglePopup('usagePopup106')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup106">Usage of <span class="code-font"><span class="ACME-function-syntax">seditOutputXCoordinate</span></span>:<br/><a href="S-s22.html#SP3">&#167;3</a>, <a href="S-s22.html#SP5">&#167;5</a>, <a href="S-s22.html#SP34">&#167;34</a>, <a href="S-s22.html#SP51">&#167;51</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8af</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointXHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP84" class="paragraph-anchor"></a><b>&#167;84. VDU plotPointY;. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditOutputYCoordinate</span><button class="popup" onclick="togglePopup('usagePopup107')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup107">Usage of <span class="code-font"><span class="ACME-function-syntax">seditOutputYCoordinate</span></span>:<br/><a href="S-s22.html#SP3">&#167;3</a>, <a href="S-s22.html#SP11">&#167;11</a>, <a href="S-s22.html#SP34">&#167;34</a>, <a href="S-s22.html#SP51">&#167;51</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8bb</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYLow</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">plotPointYHigh</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>
</pre>
<p class="commentary firstcommentary"><a id="SP85" class="paragraph-anchor"></a><b>&#167;85. GCOL X,Y. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X: GCOL mode</span>
<span class="ACME-plain-syntax">   Y: GCOL logical colour</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">gcolXY</span><button class="popup" onclick="togglePopup('usagePopup108')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup108">Usage of <span class="code-font"><span class="ACME-function-syntax">gcolXY</span></span>:<br/><a href="S-s22.html#SP3">&#167;3</a>, <a href="S-s22.html#SP29">&#167;29</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8c7</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$12</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">} VDU 18,X,Y = GCOL X,Y</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP86" class="paragraph-anchor"></a><b>&#167;86. 8 bit unsigned multiply, 16 bit result. </b></p>

<pre class="ACME-undisplayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax"> On Entry:</span>
<span class="ACME-plain-syntax">   X = multiplicand</span>
<span class="ACME-plain-syntax">   Y = multiplier</span>
<span class="ACME-plain-syntax"> On Exit:</span>
<span class="ACME-plain-syntax">   vduTempStoreDE/DF: product (16 bit)</span>
</pre>
<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">multiply8x8</span><button class="popup" onclick="togglePopup('usagePopup109')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup109">Usage of <span class="code-font"><span class="ACME-function-syntax">multiply8x8</span></span>:<br/><a href="S-s22.html#SP12">&#167;12</a>, <a href="S-s22.html#SP64">&#167;64</a><br/>Chapter 21: Sprite commands - <a href="S-s21.html#SP4">&#167;4</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8d4</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">clear high byte of product</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">shift multiplier and first bit into</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">carry</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">store multiplier as low byte of</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">product</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #8                                              </span><span class="ACME-comment-syntax">loop counter</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">multiply8x8Loop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8de</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">skip if bit clear</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">add multiplicand (=X) to high byte</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">of product</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDF</span></a><span class="ACME-plain-syntax">                                 </span><span class="ACME-comment-syntax">shift product</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ROR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">vduTempStoreDE</span></a><span class="ACME-plain-syntax">                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP86" class="function-link"><span class="ACME-function-syntax">multiply8x8Loop</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">loop 8 times</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP87" class="paragraph-anchor"></a><b>&#167;87. Print sprite details (in editor). </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">seditPrintModeMessage</span><button class="popup" onclick="togglePopup('usagePopup110')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup110">Usage of <span class="code-font"><span class="ACME-function-syntax">seditPrintModeMessage</span></span>:<br/><a href="S-s22.html#SP22">&#167;22</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b8ee</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">6</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charHomeCursor</span></a><span class="ACME-plain-syntax">, </span><span class="ACME-string-syntax">"Mode "</span><span class="ACME-plain-syntax">                      </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP5" class="function-link"><span class="ACME-function-syntax">vduCurrentScreenMODE</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP88" class="function-link"><span class="ACME-function-syntax">printNumberA</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">} Print current screen MOE</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">9</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charCR</span></a><span class="ACME-plain-syntax">,.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charLF</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-string-syntax">"Sprite "</span><span class="ACME-plain-syntax">                     </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #5                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP88" class="function-link"><span class="ACME-function-syntax">printNumberA</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">4</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charMoveCursor</span></a><span class="ACME-plain-syntax">,11,1,</span><span class="ACME-string-syntax">"["</span><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">PRINT;TAB(11,1);"[";</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP88" class="function-link"><span class="ACME-function-syntax">printNumberA</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">','</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">currentSpriteDefinitionLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #1                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP88" class="function-link"><span class="ACME-function-syntax">printNumberA</span></a><span class="ACME-plain-syntax">                                   </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">5</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">"] "</span><span class="ACME-plain-syntax">,.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charMoveCursor</span></a><span class="ACME-plain-syntax">,0,2                      </span><span class="ACME-comment-syntax">PRINT;"]";TAB(0,2);</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #.</span><a href="S-s2.html#SP3" class="function-link"><span class="ACME-function-syntax">workspaceOffsetOptions</span></a><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> (.</span><a href="S-s3.html#SP2" class="function-link"><span class="ACME-function-syntax">privateWorkspaceLow</span></a><span class="ACME-plain-syntax">),</span><span class="ACME-reserved-syntax">Y</span><span class="ACME-plain-syntax">                        </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LSR</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (bit 0 of options clear) then</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'D'</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">pen is DOWN</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">++</span><span class="ACME-plain-syntax">                                              </span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">'U'</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">pen is UP</span>
<span class="ACME-identifier-syntax">++</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">2</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">" "</span><span class="ACME-plain-syntax">,.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charDefineTextColour</span></a><span class="ACME-plain-syntax">                     </span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditBackgroundColour</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">set text background colour</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">7</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-character-syntax">' '</span><span class="ACME-plain-syntax">                                           </span><span class="ACME-comment-syntax">space</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charDefineTextColour</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-constant-syntax">$80</span><span class="ACME-plain-syntax">                     </span><span class="ACME-comment-syntax">change background colour to black</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> .</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charMoveCursor</span></a><span class="ACME-plain-syntax">,11,2,</span><span class="ACME-string-syntax">"("</span><span class="ACME-plain-syntax">                      </span><span class="ACME-comment-syntax">PRINT;TAB(11,2);"(";</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleX</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentX</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP88" class="function-link"><span class="ACME-function-syntax">printNumberA</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">print cursor X position</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-character-syntax">','</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">PRINT;",";</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentVisibleY</span></a><span class="ACME-plain-syntax">                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP4" class="function-link"><span class="ACME-function-syntax">seditCurrentY</span></a><span class="ACME-plain-syntax">                                  </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP88" class="function-link"><span class="ACME-function-syntax">printNumberA</span></a><span class="ACME-plain-syntax">                                   </span><span class="ACME-comment-syntax">print cursor Y position</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP65" class="function-link"><span class="ACME-function-syntax">printInlineCounted</span></a><span class="ACME-plain-syntax">                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!byte</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">6</span><span class="ACME-plain-syntax">                                             </span><span class="ACME-comment-syntax">length of message to print</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!text</span><span class="ACME-plain-syntax"> </span><span class="ACME-string-syntax">")  "</span><span class="ACME-plain-syntax">,.</span><a href="S-s2.html#SP2" class="function-link"><span class="ACME-function-syntax">charMoveCursor</span></a><span class="ACME-plain-syntax">,0,4                     </span><span class="ACME-comment-syntax">PRINT;TAB(0,4);</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP88" class="paragraph-anchor"></a><b>&#167;88. Print the 8 bit number in A. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">printNumberA</span><button class="popup" onclick="togglePopup('usagePopup111')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup111">Usage of <span class="code-font"><span class="ACME-function-syntax">printNumberA</span></span>:<br/><a href="S-s22.html#SP87">&#167;87</a><br/>Chapter 7: Parsing *HELP Commands - <a href="S-s7.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b98a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-comment-syntax">fall through...</span>
</pre>
<p class="commentary firstcommentary"><a id="SP89" class="paragraph-anchor"></a><b>&#167;89. Print the 16 bit number in XA. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">printNumberXA</span><button class="popup" onclick="togglePopup('usagePopup112')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup112">Usage of <span class="code-font"><span class="ACME-function-syntax">printNumberXA</span></span>:<br/>Chapter 7: Parsing *HELP Commands - <a href="S-s7.html#SP1">&#167;1</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b98c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STY</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberPrintedFlag</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">'have we printed a digit yet?' flag</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintLow</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">number (low)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STX</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintHigh</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">number (high)</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ORA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintHigh</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP89" class="function-link"><span class="ACME-function-syntax">printDigitY</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">if (number is zero) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDX</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">pointer to table of powers of ten</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">X is twice the number of digits</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">handled so far</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">digitLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b99a</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDY</span><span class="ACME-plain-syntax"> #0                                              </span><span class="ACME-comment-syntax">counter for current digit</span>
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">subtractionLoop</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b99c</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintLow</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SEC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP90" class="function-link"><span class="ACME-function-syntax">powersOfTenTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintLow</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} A8/A9 -= power of ten for current</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">} digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintHigh</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">SBC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP90" class="function-link"><span class="ACME-function-syntax">powersOfTenTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintHigh</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BCC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP89" class="function-link"><span class="ACME-function-syntax">doneSubtraction</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP89" class="function-link"><span class="ACME-function-syntax">subtractionLoop</span></a><span class="ACME-plain-syntax">                                </span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">printDigitY</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b9b1</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TYA</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">} convert to ASCII digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$30</span><span class="ACME-plain-syntax">                                            </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP11" class="function-link"><span class="ACME-function-syntax">OSWRCH</span></a><span class="ACME-plain-syntax">                                         </span><span class="ACME-comment-syntax">print digit</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">doneSubtraction</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b9b8</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintLow</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CLC</span><span class="ACME-plain-syntax">                                                 </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP90" class="function-link"><span class="ACME-function-syntax">powersOfTenTable</span></a><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                             </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintLow</span></a><span class="ACME-plain-syntax">                           </span><span class="ACME-comment-syntax">} add power of ten for current digit</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintHigh</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">ADC</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP90" class="function-link"><span class="ACME-function-syntax">powersOfTenTable</span></a><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">,</span><span class="ACME-reserved-syntax">X</span><span class="ACME-plain-syntax">                         </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberToPrintHigh</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">}</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">DEY</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BNE</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span><span class="ACME-comment-syntax">if (digit is not zero) then branch</span>

<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberPrintedFlag</span></a><span class="ACME-plain-syntax">                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP89" class="function-link"><span class="ACME-function-syntax">moveToNextDigit</span></a><span class="ACME-plain-syntax">                                </span><span class="ACME-comment-syntax">if (we have not printed a digit yet)</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">then branch</span>

<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">LDA</span><span class="ACME-plain-syntax"> #</span><span class="ACME-constant-syntax">$FF</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">STA</span><span class="ACME-plain-syntax"> .</span><a href="S-s3.html#SP1" class="function-link"><span class="ACME-function-syntax">tempNumberPrintedFlag</span></a><span class="ACME-plain-syntax">                          </span><span class="ACME-comment-syntax">mark flag to say that a digit is</span>
<span class="ACME-plain-syntax">                                                        </span><span class="ACME-comment-syntax">printed</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JSR</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP89" class="function-link"><span class="ACME-function-syntax">printDigitY</span></a><span class="ACME-plain-syntax">                                    </span><span class="ACME-comment-syntax">print the digit</span>

<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">moveToNextDigit</span><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b9d5</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">INX</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">TXA</span><span class="ACME-plain-syntax">                                                 </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">CMP</span><span class="ACME-plain-syntax"> #10                                             </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">BEQ</span><span class="ACME-plain-syntax"> </span><span class="ACME-identifier-syntax">+</span><span class="ACME-plain-syntax">                                               </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">JMP</span><span class="ACME-plain-syntax"> .</span><a href="S-s22.html#SP89" class="function-link"><span class="ACME-function-syntax">digitLoop</span></a><span class="ACME-plain-syntax">                                      </span>
<span class="ACME-identifier-syntax">+</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-reserved-syntax">RTS</span><span class="ACME-plain-syntax">                                                 </span>
</pre>
<p class="commentary firstcommentary"><a id="SP90" class="paragraph-anchor"></a><b>&#167;90. powersOfTenTable. </b></p>

<pre class="ACME-displayed-code all-displayed-code code-font">
<span class="ACME-plain-syntax">.</span><span class="ACME-function-syntax">powersOfTenTable</span><button class="popup" onclick="togglePopup('usagePopup113')"><span class="ACME-comment-syntax">?</span><span class="popuptext" id="usagePopup113">Usage of <span class="code-font"><span class="ACME-function-syntax">powersOfTenTable</span></span>:<br/><a href="S-s22.html#SP89">&#167;89</a></span></button><span class="ACME-plain-syntax"> </span><span class="ACME-comment-syntax">= $b9e0</span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">10000</span><span class="ACME-plain-syntax">                                         </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1000</span><span class="ACME-plain-syntax">                                          </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">100</span><span class="ACME-plain-syntax">                                           </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">10</span><span class="ACME-plain-syntax">                                            </span>
<span class="ACME-plain-syntax">    </span><span class="ACME-element-syntax">!word</span><span class="ACME-plain-syntax"> </span><span class="ACME-constant-syntax">1</span><span class="ACME-plain-syntax">                                             </span>
</pre>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="S-s21.html">&#10094;</a></li><li class="progresssection"><a href="S-s1.html">1</a></li><li class="progresssection"><a href="S-s2.html">2</a></li><li class="progresssection"><a href="S-s3.html">3</a></li><li class="progresssection"><a href="S-s4.html">4</a></li><li class="progresssection"><a href="S-s5.html">5</a></li><li class="progresssection"><a href="S-s6.html">6</a></li><li class="progresssection"><a href="S-s7.html">7</a></li><li class="progresssection"><a href="S-s8.html">8</a></li><li class="progresssection"><a href="S-s9.html">9</a></li><li class="progresssection"><a href="S-s10.html">10</a></li><li class="progresssection"><a href="S-s11.html">11</a></li><li class="progresssection"><a href="S-s12.html">12</a></li><li class="progresssection"><a href="S-s13.html">13</a></li><li class="progresssection"><a href="S-s14.html">14</a></li><li class="progresssection"><a href="S-s15.html">15</a></li><li class="progresssection"><a href="S-s16.html">16</a></li><li class="progresssection"><a href="S-s17.html">17</a></li><li class="progresssection"><a href="S-s18.html">18</a></li><li class="progresssection"><a href="S-s19.html">19</a></li><li class="progresssection"><a href="S-s20.html">20</a></li><li class="progresssection"><a href="S-s21.html">21</a></li><li class="progresscurrent">22</li><li class="progresssection"><a href="S-s23.html">23</a></li><li class="progresssection"><a href="S-s24.html">24</a></li><li class="progresssection"><a href="S-s25.html">25</a></li><li class="progressnext"><a href="S-s23.html">&#10095;</a></li></ul></div>
</nav><!--End of weave-->

		</main>
	</body>
</html>

